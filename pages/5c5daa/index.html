<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>k8s common commands | wx-notes</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/assets/img/favicon.png">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3129839_xft6cqs5gc.css">
    <noscript><meta http-equiv="refresh" content="0; url=https://github.com/xugaoyi/vuepress-theme-vdoing"><style>.theme-vdoing-content { display:none }</noscript>
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.9d774b0a.css" as="style"><link rel="preload" href="/assets/js/app.d382a226.js" as="script"><link rel="preload" href="/assets/js/2.87a8012a.js" as="script"><link rel="preload" href="/assets/js/194.86983a62.js" as="script"><link rel="prefetch" href="/assets/js/10.8cef245d.js"><link rel="prefetch" href="/assets/js/100.de0de5b3.js"><link rel="prefetch" href="/assets/js/101.e32bb2b9.js"><link rel="prefetch" href="/assets/js/102.0ef9f132.js"><link rel="prefetch" href="/assets/js/103.1914eb13.js"><link rel="prefetch" href="/assets/js/104.b12325e1.js"><link rel="prefetch" href="/assets/js/105.4f29b02d.js"><link rel="prefetch" href="/assets/js/106.902b14af.js"><link rel="prefetch" href="/assets/js/107.34461d9b.js"><link rel="prefetch" href="/assets/js/108.720097f0.js"><link rel="prefetch" href="/assets/js/109.ec66db5b.js"><link rel="prefetch" href="/assets/js/11.06117714.js"><link rel="prefetch" href="/assets/js/110.f767f523.js"><link rel="prefetch" href="/assets/js/111.bcfbfa02.js"><link rel="prefetch" href="/assets/js/112.d8df71d9.js"><link rel="prefetch" href="/assets/js/113.c9a6c922.js"><link rel="prefetch" href="/assets/js/114.3d85868d.js"><link rel="prefetch" href="/assets/js/115.993787ed.js"><link rel="prefetch" href="/assets/js/116.5bd70a45.js"><link rel="prefetch" href="/assets/js/117.7c5ea865.js"><link rel="prefetch" href="/assets/js/118.575c2813.js"><link rel="prefetch" href="/assets/js/119.eff9f6bc.js"><link rel="prefetch" href="/assets/js/12.801127a7.js"><link rel="prefetch" href="/assets/js/120.91de158c.js"><link rel="prefetch" href="/assets/js/121.860d400f.js"><link rel="prefetch" href="/assets/js/122.954d04cd.js"><link rel="prefetch" href="/assets/js/123.5b3e835d.js"><link rel="prefetch" href="/assets/js/124.ec79fba8.js"><link rel="prefetch" href="/assets/js/125.1bbba1d0.js"><link rel="prefetch" href="/assets/js/126.5e7fded7.js"><link rel="prefetch" href="/assets/js/127.e43dfbff.js"><link rel="prefetch" href="/assets/js/128.cef089b9.js"><link rel="prefetch" href="/assets/js/129.326be7ae.js"><link rel="prefetch" href="/assets/js/13.35b92c07.js"><link rel="prefetch" href="/assets/js/130.7cca68b6.js"><link rel="prefetch" href="/assets/js/131.c7695993.js"><link rel="prefetch" href="/assets/js/132.66f9eb75.js"><link rel="prefetch" href="/assets/js/133.499ff9d6.js"><link rel="prefetch" href="/assets/js/134.2f1548d7.js"><link rel="prefetch" href="/assets/js/135.a0e10d3e.js"><link rel="prefetch" href="/assets/js/136.92a270c5.js"><link rel="prefetch" href="/assets/js/137.5b0ac09e.js"><link rel="prefetch" href="/assets/js/138.21de847d.js"><link rel="prefetch" href="/assets/js/139.c058c237.js"><link rel="prefetch" href="/assets/js/14.91560b85.js"><link rel="prefetch" href="/assets/js/140.93275f57.js"><link rel="prefetch" href="/assets/js/141.6c6df578.js"><link rel="prefetch" href="/assets/js/142.16de5023.js"><link rel="prefetch" href="/assets/js/143.6e03e08c.js"><link rel="prefetch" href="/assets/js/144.592bb4ed.js"><link rel="prefetch" href="/assets/js/145.b7bdadcc.js"><link rel="prefetch" href="/assets/js/146.a18f49a0.js"><link rel="prefetch" href="/assets/js/147.dced2ea6.js"><link rel="prefetch" href="/assets/js/148.e06ea4d7.js"><link rel="prefetch" href="/assets/js/149.ac95d564.js"><link rel="prefetch" href="/assets/js/15.4606cb23.js"><link rel="prefetch" href="/assets/js/150.c9e28f94.js"><link rel="prefetch" href="/assets/js/151.a1997c81.js"><link rel="prefetch" href="/assets/js/152.3d479903.js"><link rel="prefetch" href="/assets/js/153.3073c76d.js"><link rel="prefetch" href="/assets/js/154.3bcbee0f.js"><link rel="prefetch" href="/assets/js/155.9dddaff4.js"><link rel="prefetch" href="/assets/js/156.f376855e.js"><link rel="prefetch" href="/assets/js/157.9eb774bc.js"><link rel="prefetch" href="/assets/js/158.44ee8e16.js"><link rel="prefetch" href="/assets/js/159.390af831.js"><link rel="prefetch" href="/assets/js/16.9bcf78d7.js"><link rel="prefetch" href="/assets/js/160.e9a320f2.js"><link rel="prefetch" href="/assets/js/161.2c70b400.js"><link rel="prefetch" href="/assets/js/162.363decbd.js"><link rel="prefetch" href="/assets/js/163.3ce1e512.js"><link rel="prefetch" href="/assets/js/164.e9313d92.js"><link rel="prefetch" href="/assets/js/165.1eb8d002.js"><link rel="prefetch" href="/assets/js/166.ab22eb15.js"><link rel="prefetch" href="/assets/js/167.b000f630.js"><link rel="prefetch" href="/assets/js/168.f25a631c.js"><link rel="prefetch" href="/assets/js/169.b7129356.js"><link rel="prefetch" href="/assets/js/17.0e700bd5.js"><link rel="prefetch" href="/assets/js/170.323672ca.js"><link rel="prefetch" href="/assets/js/171.49820adb.js"><link rel="prefetch" href="/assets/js/172.5367dfe3.js"><link rel="prefetch" href="/assets/js/173.87ce95d1.js"><link rel="prefetch" href="/assets/js/174.4733aac2.js"><link rel="prefetch" href="/assets/js/175.4c8b426b.js"><link rel="prefetch" href="/assets/js/176.34060d5c.js"><link rel="prefetch" href="/assets/js/177.d0404722.js"><link rel="prefetch" href="/assets/js/178.1a46b01f.js"><link rel="prefetch" href="/assets/js/179.9fcc84b5.js"><link rel="prefetch" href="/assets/js/18.d1fcff83.js"><link rel="prefetch" href="/assets/js/180.bdfedfa3.js"><link rel="prefetch" href="/assets/js/181.47e6d26e.js"><link rel="prefetch" href="/assets/js/182.2d878f03.js"><link rel="prefetch" href="/assets/js/183.7e9aace3.js"><link rel="prefetch" href="/assets/js/184.2eff2189.js"><link rel="prefetch" href="/assets/js/185.ba9aab94.js"><link rel="prefetch" href="/assets/js/186.93016b73.js"><link rel="prefetch" href="/assets/js/187.a617b993.js"><link rel="prefetch" href="/assets/js/188.2d5a02f4.js"><link rel="prefetch" href="/assets/js/189.939a191f.js"><link rel="prefetch" href="/assets/js/19.b636a521.js"><link rel="prefetch" href="/assets/js/190.bbbd77c8.js"><link rel="prefetch" href="/assets/js/191.3d110f91.js"><link rel="prefetch" href="/assets/js/192.61fab52d.js"><link rel="prefetch" href="/assets/js/193.07e8db8d.js"><link rel="prefetch" href="/assets/js/195.ea852b80.js"><link rel="prefetch" href="/assets/js/196.f3f47585.js"><link rel="prefetch" href="/assets/js/197.67c354ba.js"><link rel="prefetch" href="/assets/js/198.561b321e.js"><link rel="prefetch" href="/assets/js/199.e25381a9.js"><link rel="prefetch" href="/assets/js/20.3be87fb7.js"><link rel="prefetch" href="/assets/js/200.010ba3c5.js"><link rel="prefetch" href="/assets/js/201.67ac619d.js"><link rel="prefetch" href="/assets/js/202.f09ce2ad.js"><link rel="prefetch" href="/assets/js/203.65d725b4.js"><link rel="prefetch" href="/assets/js/204.f3447d91.js"><link rel="prefetch" href="/assets/js/205.1f095751.js"><link rel="prefetch" href="/assets/js/206.d932f379.js"><link rel="prefetch" href="/assets/js/207.f1b07592.js"><link rel="prefetch" href="/assets/js/208.ae8c6256.js"><link rel="prefetch" href="/assets/js/209.35180e8c.js"><link rel="prefetch" href="/assets/js/21.49934eb6.js"><link rel="prefetch" href="/assets/js/210.2c20b67d.js"><link rel="prefetch" href="/assets/js/211.b6b9d090.js"><link rel="prefetch" href="/assets/js/212.9aabd8b9.js"><link rel="prefetch" href="/assets/js/213.af591f91.js"><link rel="prefetch" href="/assets/js/214.243220ba.js"><link rel="prefetch" href="/assets/js/215.91918129.js"><link rel="prefetch" href="/assets/js/216.d778718b.js"><link rel="prefetch" href="/assets/js/217.dac38162.js"><link rel="prefetch" href="/assets/js/218.3ad31069.js"><link rel="prefetch" href="/assets/js/219.9197a62a.js"><link rel="prefetch" href="/assets/js/22.a7d6a9eb.js"><link rel="prefetch" href="/assets/js/220.bbd7b124.js"><link rel="prefetch" href="/assets/js/221.0efe0337.js"><link rel="prefetch" href="/assets/js/222.700049fd.js"><link rel="prefetch" href="/assets/js/223.46405e41.js"><link rel="prefetch" href="/assets/js/224.6e350c81.js"><link rel="prefetch" href="/assets/js/225.1993613f.js"><link rel="prefetch" href="/assets/js/226.acb60b10.js"><link rel="prefetch" href="/assets/js/227.5c29d8d9.js"><link rel="prefetch" href="/assets/js/228.f2fa7cf9.js"><link rel="prefetch" href="/assets/js/229.ee960944.js"><link rel="prefetch" href="/assets/js/23.5400645b.js"><link rel="prefetch" href="/assets/js/230.068b06bc.js"><link rel="prefetch" href="/assets/js/231.34d85795.js"><link rel="prefetch" href="/assets/js/232.163f77c8.js"><link rel="prefetch" href="/assets/js/233.245df212.js"><link rel="prefetch" href="/assets/js/234.b889ca13.js"><link rel="prefetch" href="/assets/js/235.f8a222af.js"><link rel="prefetch" href="/assets/js/236.9741ba00.js"><link rel="prefetch" href="/assets/js/237.5cb51cf1.js"><link rel="prefetch" href="/assets/js/238.c7b8dbd4.js"><link rel="prefetch" href="/assets/js/239.a74a4736.js"><link rel="prefetch" href="/assets/js/24.854a29ed.js"><link rel="prefetch" href="/assets/js/240.3c8801b3.js"><link rel="prefetch" href="/assets/js/241.1930e71a.js"><link rel="prefetch" href="/assets/js/242.31d76505.js"><link rel="prefetch" href="/assets/js/243.36c52617.js"><link rel="prefetch" href="/assets/js/244.4adc8887.js"><link rel="prefetch" href="/assets/js/245.f221ffd4.js"><link rel="prefetch" href="/assets/js/246.03b3149d.js"><link rel="prefetch" href="/assets/js/247.cb26f1ac.js"><link rel="prefetch" href="/assets/js/248.e0b76f15.js"><link rel="prefetch" href="/assets/js/249.cde39b0c.js"><link rel="prefetch" href="/assets/js/25.d429e2ad.js"><link rel="prefetch" href="/assets/js/250.30e7e869.js"><link rel="prefetch" href="/assets/js/251.b14e683b.js"><link rel="prefetch" href="/assets/js/252.5a2a17bb.js"><link rel="prefetch" href="/assets/js/253.64575468.js"><link rel="prefetch" href="/assets/js/254.5ee1d4b0.js"><link rel="prefetch" href="/assets/js/255.a701e12c.js"><link rel="prefetch" href="/assets/js/256.205df8b5.js"><link rel="prefetch" href="/assets/js/257.62941e39.js"><link rel="prefetch" href="/assets/js/258.82c01d6a.js"><link rel="prefetch" href="/assets/js/259.74f3d1a1.js"><link rel="prefetch" href="/assets/js/26.3716f14a.js"><link rel="prefetch" href="/assets/js/260.a07fea6f.js"><link rel="prefetch" href="/assets/js/261.0e9cc558.js"><link rel="prefetch" href="/assets/js/262.8e381643.js"><link rel="prefetch" href="/assets/js/263.1da50740.js"><link rel="prefetch" href="/assets/js/264.3201225f.js"><link rel="prefetch" href="/assets/js/265.778e81a2.js"><link rel="prefetch" href="/assets/js/266.6fc8c8f2.js"><link rel="prefetch" href="/assets/js/267.6058e70a.js"><link rel="prefetch" href="/assets/js/268.90728fbe.js"><link rel="prefetch" href="/assets/js/269.57a1b247.js"><link rel="prefetch" href="/assets/js/27.90a02103.js"><link rel="prefetch" href="/assets/js/270.e1fbaf15.js"><link rel="prefetch" href="/assets/js/271.67bd6fa1.js"><link rel="prefetch" href="/assets/js/272.324204c9.js"><link rel="prefetch" href="/assets/js/273.3d723913.js"><link rel="prefetch" href="/assets/js/274.34e0cc99.js"><link rel="prefetch" href="/assets/js/275.c7b6a30a.js"><link rel="prefetch" href="/assets/js/276.4475ed4a.js"><link rel="prefetch" href="/assets/js/277.108044d1.js"><link rel="prefetch" href="/assets/js/278.dc6f0fad.js"><link rel="prefetch" href="/assets/js/279.c2c6595a.js"><link rel="prefetch" href="/assets/js/28.7d19fe1e.js"><link rel="prefetch" href="/assets/js/280.00b3a96f.js"><link rel="prefetch" href="/assets/js/281.35218fe6.js"><link rel="prefetch" href="/assets/js/282.833aa9a1.js"><link rel="prefetch" href="/assets/js/283.b854e98d.js"><link rel="prefetch" href="/assets/js/284.55390ee5.js"><link rel="prefetch" href="/assets/js/285.e60c8473.js"><link rel="prefetch" href="/assets/js/286.1fb42b39.js"><link rel="prefetch" href="/assets/js/287.76d416c4.js"><link rel="prefetch" href="/assets/js/288.cc30790d.js"><link rel="prefetch" href="/assets/js/289.fead2fdb.js"><link rel="prefetch" href="/assets/js/29.7eeb3de4.js"><link rel="prefetch" href="/assets/js/290.06e7dd5c.js"><link rel="prefetch" href="/assets/js/291.a073502f.js"><link rel="prefetch" href="/assets/js/292.ee597491.js"><link rel="prefetch" href="/assets/js/293.b55cd65c.js"><link rel="prefetch" href="/assets/js/294.ee3bbd54.js"><link rel="prefetch" href="/assets/js/295.5e680082.js"><link rel="prefetch" href="/assets/js/296.cc18faac.js"><link rel="prefetch" href="/assets/js/297.c421a612.js"><link rel="prefetch" href="/assets/js/298.01889782.js"><link rel="prefetch" href="/assets/js/299.2c4c2cb2.js"><link rel="prefetch" href="/assets/js/3.14f582e8.js"><link rel="prefetch" href="/assets/js/30.cba82c26.js"><link rel="prefetch" href="/assets/js/300.14aa1fc0.js"><link rel="prefetch" href="/assets/js/301.85d64cdf.js"><link rel="prefetch" href="/assets/js/302.e2815e7f.js"><link rel="prefetch" href="/assets/js/303.98c1febb.js"><link rel="prefetch" href="/assets/js/304.50df0bb2.js"><link rel="prefetch" href="/assets/js/305.41b537b2.js"><link rel="prefetch" href="/assets/js/306.40fc4ca0.js"><link rel="prefetch" href="/assets/js/307.e7f1fd37.js"><link rel="prefetch" href="/assets/js/308.9c019000.js"><link rel="prefetch" href="/assets/js/309.932890cc.js"><link rel="prefetch" href="/assets/js/31.09ae525c.js"><link rel="prefetch" href="/assets/js/310.4ee417ea.js"><link rel="prefetch" href="/assets/js/311.bb2655cc.js"><link rel="prefetch" href="/assets/js/312.8448f772.js"><link rel="prefetch" href="/assets/js/313.1cc95dd2.js"><link rel="prefetch" href="/assets/js/314.a0e4ce60.js"><link rel="prefetch" href="/assets/js/315.92099df1.js"><link rel="prefetch" href="/assets/js/316.4ccce55e.js"><link rel="prefetch" href="/assets/js/317.de8cc4ad.js"><link rel="prefetch" href="/assets/js/318.475f44de.js"><link rel="prefetch" href="/assets/js/319.f4f8a31f.js"><link rel="prefetch" href="/assets/js/32.cf5672f3.js"><link rel="prefetch" href="/assets/js/320.64cbd076.js"><link rel="prefetch" href="/assets/js/321.77581796.js"><link rel="prefetch" href="/assets/js/322.9fa19651.js"><link rel="prefetch" href="/assets/js/323.8dc23ccd.js"><link rel="prefetch" href="/assets/js/324.00d7ed12.js"><link rel="prefetch" href="/assets/js/325.0e9f380d.js"><link rel="prefetch" href="/assets/js/326.95883d38.js"><link rel="prefetch" href="/assets/js/327.b0415db7.js"><link rel="prefetch" href="/assets/js/328.89746536.js"><link rel="prefetch" href="/assets/js/329.c1a43c4d.js"><link rel="prefetch" href="/assets/js/33.a7f5ab01.js"><link rel="prefetch" href="/assets/js/330.9ddac96b.js"><link rel="prefetch" href="/assets/js/331.9d697ac8.js"><link rel="prefetch" href="/assets/js/332.6ee28795.js"><link rel="prefetch" href="/assets/js/333.170f7a62.js"><link rel="prefetch" href="/assets/js/334.cb9d727c.js"><link rel="prefetch" href="/assets/js/335.8a3b74f8.js"><link rel="prefetch" href="/assets/js/336.8c897ca1.js"><link rel="prefetch" href="/assets/js/34.0361ed84.js"><link rel="prefetch" href="/assets/js/35.7944f93a.js"><link rel="prefetch" href="/assets/js/36.cb553688.js"><link rel="prefetch" href="/assets/js/37.06e9f182.js"><link rel="prefetch" href="/assets/js/38.2472ee7f.js"><link rel="prefetch" href="/assets/js/39.82eca662.js"><link rel="prefetch" href="/assets/js/4.837e9ea1.js"><link rel="prefetch" href="/assets/js/40.022ad8aa.js"><link rel="prefetch" href="/assets/js/41.821fb36a.js"><link rel="prefetch" href="/assets/js/42.180ab912.js"><link rel="prefetch" href="/assets/js/43.d9375ce1.js"><link rel="prefetch" href="/assets/js/44.d212f8b3.js"><link rel="prefetch" href="/assets/js/45.ba520f2b.js"><link rel="prefetch" href="/assets/js/46.5447129c.js"><link rel="prefetch" href="/assets/js/47.3e3fdc9a.js"><link rel="prefetch" href="/assets/js/48.d96c69a1.js"><link rel="prefetch" href="/assets/js/49.96ac804b.js"><link rel="prefetch" href="/assets/js/5.94383f14.js"><link rel="prefetch" href="/assets/js/50.ff732aa7.js"><link rel="prefetch" href="/assets/js/51.cafabf54.js"><link rel="prefetch" href="/assets/js/52.8cbc09b9.js"><link rel="prefetch" href="/assets/js/53.7bc1ec87.js"><link rel="prefetch" href="/assets/js/54.45d36044.js"><link rel="prefetch" href="/assets/js/55.e7192e85.js"><link rel="prefetch" href="/assets/js/56.711184df.js"><link rel="prefetch" href="/assets/js/57.a617b81c.js"><link rel="prefetch" href="/assets/js/58.176a088e.js"><link rel="prefetch" href="/assets/js/59.41c6b746.js"><link rel="prefetch" href="/assets/js/6.2bd98a80.js"><link rel="prefetch" href="/assets/js/60.a9ad50e8.js"><link rel="prefetch" href="/assets/js/61.4d205bfa.js"><link rel="prefetch" href="/assets/js/62.ecefe86d.js"><link rel="prefetch" href="/assets/js/63.d3924f46.js"><link rel="prefetch" href="/assets/js/64.40f6beaf.js"><link rel="prefetch" href="/assets/js/65.001bcc37.js"><link rel="prefetch" href="/assets/js/66.f281aa40.js"><link rel="prefetch" href="/assets/js/67.4bd2ef0c.js"><link rel="prefetch" href="/assets/js/68.9ff84d3d.js"><link rel="prefetch" href="/assets/js/69.e21e77b0.js"><link rel="prefetch" href="/assets/js/7.f2ae7930.js"><link rel="prefetch" href="/assets/js/70.8715f006.js"><link rel="prefetch" href="/assets/js/71.0804d179.js"><link rel="prefetch" href="/assets/js/72.d47a4a99.js"><link rel="prefetch" href="/assets/js/73.a72ed2e1.js"><link rel="prefetch" href="/assets/js/74.bf813865.js"><link rel="prefetch" href="/assets/js/75.0f9354a3.js"><link rel="prefetch" href="/assets/js/76.521fe63b.js"><link rel="prefetch" href="/assets/js/77.da026e66.js"><link rel="prefetch" href="/assets/js/78.caf4ae61.js"><link rel="prefetch" href="/assets/js/79.0ca61053.js"><link rel="prefetch" href="/assets/js/8.bf1039e7.js"><link rel="prefetch" href="/assets/js/80.cd005ed5.js"><link rel="prefetch" href="/assets/js/81.6d9c7fc6.js"><link rel="prefetch" href="/assets/js/82.e90bac88.js"><link rel="prefetch" href="/assets/js/83.63b5d58f.js"><link rel="prefetch" href="/assets/js/84.6d112559.js"><link rel="prefetch" href="/assets/js/85.fb99dd6c.js"><link rel="prefetch" href="/assets/js/86.dde3c192.js"><link rel="prefetch" href="/assets/js/87.b011c014.js"><link rel="prefetch" href="/assets/js/88.493b12c1.js"><link rel="prefetch" href="/assets/js/89.c2e431ec.js"><link rel="prefetch" href="/assets/js/9.b42343bd.js"><link rel="prefetch" href="/assets/js/90.eecd1598.js"><link rel="prefetch" href="/assets/js/91.74f45fff.js"><link rel="prefetch" href="/assets/js/92.ea554734.js"><link rel="prefetch" href="/assets/js/93.aefaca74.js"><link rel="prefetch" href="/assets/js/94.9d983301.js"><link rel="prefetch" href="/assets/js/95.13a41e26.js"><link rel="prefetch" href="/assets/js/96.92799e4e.js"><link rel="prefetch" href="/assets/js/97.dc0873a3.js"><link rel="prefetch" href="/assets/js/98.1032eb92.js"><link rel="prefetch" href="/assets/js/99.b28f8efa.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9d774b0a.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">wx-notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/pages/948095/" class="nav-link">Top</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="BE" class="dropdown-title"><a href="/backend/" class="link-title">BE</a> <span class="title" style="display:none;">BE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0a3d16/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/pages/907e2d/" class="nav-link">Python</a></li><li class="dropdown-item"><!----> <a href="/pages/f1ea5b/" class="nav-link">Go</a></li><li class="dropdown-item"><!----> <a href="/pages/ee7ace/" class="nav-link">Framework</a></li><li class="dropdown-item"><!----> <a href="/pages/f1fcc1/" class="nav-link">Database</a></li><li class="dropdown-item"><!----> <a href="/pages/ab7fe2/" class="nav-link">MessageMiddleware</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FE" class="dropdown-title"><a href="/frontend/" class="link-title">FE</a> <span class="title" style="display:none;">FE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0767c1/" class="nav-link">FE Docs</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="More" class="dropdown-title"><a href="/more/" class="link-title">More</a> <span class="title" style="display:none;">More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/6f7935/" class="nav-link">OperatingSystem</a></li><li class="dropdown-item"><!----> <a href="/pages/570625/" class="nav-link">Container</a></li><li class="dropdown-item"><!----> <a href="/pages/b5bf02/" class="nav-link">DevOps</a></li><li class="dropdown-item"><!----> <a href="/pages/3e0468/" class="nav-link">WebServer</a></li><li class="dropdown-item"><!----> <a href="/pages/5c5daa/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Cloud</a></li><li class="dropdown-item"><!----> <a href="/pages/49864f/" class="nav-link">GPT</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><a href="/others/" class="link-title">Others</a> <span class="title" style="display:none;">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/b95cf8/" class="nav-link">PackageManager</a></li><li class="dropdown-item"><!----> <a href="/pages/6a8a1c/" class="nav-link">TestTool</a></li><li class="dropdown-item"><!----> <a href="/pages/8ca6e0/" class="nav-link">EditorAndIDE</a></li><li class="dropdown-item"><!----> <a href="/pages/b95cf8/" class="nav-link">CommandLineTool</a></li><li class="dropdown-item"><!----> <a href="/pages/ccee87/" class="nav-link">Browser</a></li><li class="dropdown-item"><!----> <a href="/pages/a9d7d6/" class="nav-link">Articles</a></li><li class="dropdown-item"><!----> <a href="/pages/9d47df/" class="nav-link">Others</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Index" class="dropdown-title"><a href="/archives/" class="link-title">Index</a> <span class="title" style="display:none;">Index</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">Categories</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">Tags</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">Archives</a></li></ul></div></div> <a href="https://github.com/dlwxin/wx-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://dlwang.xin:11796/image/avatar/avatar03-small.jpg"> <div class="blogger-info"><h3>wx</h3> <span>Tomorrow is always fresh, with no mistakes in it.</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/pages/948095/" class="nav-link">Top</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="BE" class="dropdown-title"><a href="/backend/" class="link-title">BE</a> <span class="title" style="display:none;">BE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0a3d16/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/pages/907e2d/" class="nav-link">Python</a></li><li class="dropdown-item"><!----> <a href="/pages/f1ea5b/" class="nav-link">Go</a></li><li class="dropdown-item"><!----> <a href="/pages/ee7ace/" class="nav-link">Framework</a></li><li class="dropdown-item"><!----> <a href="/pages/f1fcc1/" class="nav-link">Database</a></li><li class="dropdown-item"><!----> <a href="/pages/ab7fe2/" class="nav-link">MessageMiddleware</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FE" class="dropdown-title"><a href="/frontend/" class="link-title">FE</a> <span class="title" style="display:none;">FE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0767c1/" class="nav-link">FE Docs</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="More" class="dropdown-title"><a href="/more/" class="link-title">More</a> <span class="title" style="display:none;">More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/6f7935/" class="nav-link">OperatingSystem</a></li><li class="dropdown-item"><!----> <a href="/pages/570625/" class="nav-link">Container</a></li><li class="dropdown-item"><!----> <a href="/pages/b5bf02/" class="nav-link">DevOps</a></li><li class="dropdown-item"><!----> <a href="/pages/3e0468/" class="nav-link">WebServer</a></li><li class="dropdown-item"><!----> <a href="/pages/5c5daa/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Cloud</a></li><li class="dropdown-item"><!----> <a href="/pages/49864f/" class="nav-link">GPT</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><a href="/others/" class="link-title">Others</a> <span class="title" style="display:none;">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/b95cf8/" class="nav-link">PackageManager</a></li><li class="dropdown-item"><!----> <a href="/pages/6a8a1c/" class="nav-link">TestTool</a></li><li class="dropdown-item"><!----> <a href="/pages/8ca6e0/" class="nav-link">EditorAndIDE</a></li><li class="dropdown-item"><!----> <a href="/pages/b95cf8/" class="nav-link">CommandLineTool</a></li><li class="dropdown-item"><!----> <a href="/pages/ccee87/" class="nav-link">Browser</a></li><li class="dropdown-item"><!----> <a href="/pages/a9d7d6/" class="nav-link">Articles</a></li><li class="dropdown-item"><!----> <a href="/pages/9d47df/" class="nav-link">Others</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Index" class="dropdown-title"><a href="/archives/" class="link-title">Index</a> <span class="title" style="display:none;">Index</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">Categories</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">Tags</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">Archives</a></li></ul></div></div> <a href="https://github.com/dlwxin/wx-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>OperatingSystem</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Container</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DevOps</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>WebServer</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>GPT</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Cloud</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Kubernetes</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/8bc4c6/" class="sidebar-link">Kubernetes/k8s</a></li><li><a href="/pages/5c5daa/" aria-current="page" class="active sidebar-link">k8s common commands</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/5c5daa/#links" class="sidebar-link">Links</a></li><li class="sidebar-sub-header level2"><a href="/pages/5c5daa/#kubectl-autocomplete" class="sidebar-link">Kubectl autocomplete</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/5c5daa/#bash" class="sidebar-link">BASH</a></li><li class="sidebar-sub-header level3"><a href="/pages/5c5daa/#zsh" class="sidebar-link">ZSH</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/5c5daa/#namespace-management" class="sidebar-link">Namespace management</a></li><li class="sidebar-sub-header level2"><a href="/pages/5c5daa/#cluster-management" class="sidebar-link">Cluster management</a></li><li class="sidebar-sub-header level2"><a href="/pages/5c5daa/#authorization-management" class="sidebar-link">Authorization management</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/5c5daa/#access-clusters-using-the-kubernetes-api" class="sidebar-link">Access Clusters Using the Kubernetes API</a></li><li class="sidebar-sub-header level3"><a href="/pages/5c5daa/#get-ca-certificate" class="sidebar-link">Get CA Certificate</a></li><li class="sidebar-sub-header level3"><a href="/pages/5c5daa/#kubernetes-client-libraries" class="sidebar-link">Kubernetes Client Libraries</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/5c5daa/#resource-management" class="sidebar-link">Resource management</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/5c5daa/#creating-objects" class="sidebar-link">Creating objects</a></li><li class="sidebar-sub-header level3"><a href="/pages/5c5daa/#viewing-finding-resources" class="sidebar-link">Viewing, finding resources</a></li><li class="sidebar-sub-header level3"><a href="/pages/5c5daa/#updating-editing-resources" class="sidebar-link">Updating, editing resources</a></li><li class="sidebar-sub-header level3"><a href="/pages/5c5daa/#patching-resources" class="sidebar-link">Patching resources</a></li><li class="sidebar-sub-header level3"><a href="/pages/5c5daa/#scaling-resources" class="sidebar-link">Scaling resources</a></li><li class="sidebar-sub-header level3"><a href="/pages/5c5daa/#deleting-resources" class="sidebar-link">Deleting resources</a></li><li class="sidebar-sub-header level3"><a href="/pages/5c5daa/#debugging-resources" class="sidebar-link">Debugging resources</a></li><li class="sidebar-sub-header level3"><a href="/pages/5c5daa/#labeling-resources" class="sidebar-link">Labeling resources</a></li><li class="sidebar-sub-header level3"><a href="/pages/5c5daa/#annotating-resources" class="sidebar-link">Annotating resources</a></li><li class="sidebar-sub-header level3"><a href="/pages/5c5daa/#operational-commands" class="sidebar-link">Operational commands</a></li><li class="sidebar-sub-header level3"><a href="/pages/5c5daa/#build-and-deploy" class="sidebar-link">Build and deploy</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/5c5daa/#other-commands" class="sidebar-link">Other Commands</a></li></ul></li><li><a href="/pages/c83125/" class="sidebar-link">How to set multiple commands in one yaml file with k8s</a></li><li><a href="/pages/e04dab/" class="sidebar-link">k8s Pod related</a></li><li><a href="/pages/fd1b83/" class="sidebar-link">k8s Deployment related</a></li><li><a href="/pages/c6ce5e/" class="sidebar-link">k8s DaemonSet related</a></li><li><a href="/pages/5cb590/" class="sidebar-link">k8s Storage</a></li><li><a href="/pages/e3eea7/" class="sidebar-link">k8s Service</a></li><li><a href="/pages/ed1c95/" class="sidebar-link">Kubernetes ConfigMap and Secret</a></li><li><a href="/pages/2c3e5a/" class="sidebar-link">Kubernetes hpa</a></li><li><a href="/pages/b18350/" class="sidebar-link">minikube basic</a></li><li><a href="/pages/ebe316/" class="sidebar-link">k8s Chore</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Rancher</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>OpenShift</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Azure</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Aliyun</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>AWS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>ElasticStack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Terraform</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Helm</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Kong</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Others</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-057748f7><div class="articleInfo" data-v-057748f7><ul class="breadcrumbs" data-v-057748f7><li data-v-057748f7><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-057748f7></a></li> <li data-v-057748f7><a href="/more/#More" data-v-057748f7>More</a></li><li data-v-057748f7><a href="/more/#Cloud" data-v-057748f7>Cloud</a></li><li data-v-057748f7><a href="/more/#Kubernetes" data-v-057748f7>Kubernetes</a></li></ul> <div class="info" data-v-057748f7><div title="作者" class="author iconfont icon-touxiang" data-v-057748f7><a href="https://github.com/dlwxin/wx-notes" target="_blank" title="作者" class="beLink" data-v-057748f7>wx</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-057748f7><a href="javascript:;" data-v-057748f7>2022-01-16</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><!---->k8s common commands<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="links"><a href="#links" class="header-anchor">#</a> Links</h2> <ul><li><a href="https://kubernetes.io/docs/tasks/tools/#kubectl" target="_blank" rel="noopener noreferrer">Install kubectl<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://kubernetes.io/docs/reference/kubectl/cheatsheet/" target="_blank" rel="noopener noreferrer">kubectl Cheat Sheet<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/dennyzhang/cheatsheet-kubernetes-A4" target="_blank" rel="noopener noreferrer">cheatsheet-kubernetes-A4<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://m.yisu.com/zixun/459393.html" target="_blank" rel="noopener noreferrer">Kubernetes 的 CLI 是使用哪些技术实现的<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://erosb.github.io/post/json-patch-vs-merge-patch/" target="_blank" rel="noopener noreferrer">JSON Patch and JSON Merge Patch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="kubectl-autocomplete"><a href="#kubectl-autocomplete" class="header-anchor">#</a> Kubectl autocomplete</h2> <ul><li><a href="https://kubernetes.io/docs/reference/kubectl/cheatsheet/#kubectl-autocomplete" target="_blank" rel="noopener noreferrer">Kubectl autocomplete<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="bash"><a href="#bash" class="header-anchor">#</a> BASH</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># setup autocomplete in bash into the current shell, bash-completion package should be installed first.</span>
<span class="token builtin class-name">source</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span>kubectl completion <span class="token function">bash</span><span class="token punctuation">)</span>
<span class="token comment"># add autocomplete permanently to your bash shell.</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;source &lt;(kubectl completion bash)&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.bashrc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>You can also use a shorthand alias for <code>kubectl</code> that also works with completion:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">alias</span> <span class="token assign-left variable">k</span><span class="token operator">=</span>kubectl
complete -F __start_kubectl k
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>NB:</p> <blockquote><p>bash-completion package should be installed first</p></blockquote> <p>That means you should <a href="https://kubernetes.io/docs/tasks/tools/#kubectl" target="_blank" rel="noopener noreferrer">install kubectl<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> first</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>kubectl --help <span class="token operator">|</span> <span class="token function">grep</span> completion
  completion    Output shell completion code <span class="token keyword">for</span> the specified shell <span class="token punctuation">(</span>bash or <span class="token function">zsh</span><span class="token punctuation">)</span>

$ complete <span class="token operator">|</span> <span class="token function">grep</span> -i start
complete -o default -F __start_kubectl kubectl
complete -F __start_kubectl k
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="zsh"><a href="#zsh" class="header-anchor">#</a> ZSH</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">source</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span>kubectl completion <span class="token function">zsh</span><span class="token punctuation">)</span>  <span class="token comment"># setup autocomplete in zsh into the current shell</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;[[ <span class="token variable">$commands</span>[kubectl] ]] &amp;&amp; source &lt;(kubectl completion zsh)&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.zshrc <span class="token comment"># add autocomplete permanently to your zsh shell</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="namespace-management"><a href="#namespace-management" class="header-anchor">#</a> Namespace management</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># List the current namespaces in a cluster</span>
kubectl get namespace
kubectl get ns

<span class="token comment"># Swithch namespace</span>
<span class="token comment"># You can permanently save the namespace for all subsequent kubectl commands in that context.</span>
kubectl config set-context --current --namespace<span class="token operator">=</span><span class="token operator">&lt;</span>insert-namespace-name-here<span class="token operator">&gt;</span>
<span class="token comment"># kubectl config set-context --current --namespace=my-namespace</span>
<span class="token comment"># kubectl config set-context $(kubectl config current-context) --namespace=default</span>

<span class="token comment"># View current namespace used by current-context</span>
<span class="token comment"># --minify=false: Remove all information not used by current-context from the output</span>
kubectl config view --minify <span class="token operator">|</span> <span class="token function">grep</span> namespace:

<span class="token comment"># Create a namespace</span>
<span class="token comment"># Note: Avoid creating namespaces with the prefix 'kube-', since it is reserved for Kubernetes system namespaces.</span>
kubectl create namespace my-namespace

<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">|</span> kubectl apply -f -</span>
apiVersion: v1
kind: Namespace
metadata:
   name: my-namespace
EOF</span>

<span class="token comment"># Delete a namespace</span>
kubectl delete namespace my-namespace

<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">|</span> kubectl delete -f -</span>
apiVersion: v1
kind: Namespace
metadata:
   name: my-namespace
EOF</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h2 id="cluster-management"><a href="#cluster-management" class="header-anchor">#</a> Cluster management</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># Check k8s version</span>
kubectl version
<span class="token comment"># Client Version: version.Info{Major:&quot;1&quot;, Minor:&quot;18&quot;, GitVersion:&quot;v1.18.3&quot;, GitCommit:&quot;2e7996e3e2712684bc73f0dec0200d64eec7fe40&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2020-05-20T12:52:00Z&quot;, GoVersion:&quot;go1.14.3&quot;, Compiler:&quot;gc&quot;, Platform:&quot;darwin/amd64&quot;}</span>
<span class="token comment"># Server Version: version.Info{Major:&quot;1&quot;, Minor:&quot;18&quot;, GitVersion:&quot;v1.18.3&quot;, GitCommit:&quot;2e7996e3e2712684bc73f0dec0200d64eec7fe40&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2020-05-27T23:11:46Z&quot;, GoVersion:&quot;go1.13.9&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;}</span>
<span class="token comment"># 其中， &quot;Client Version&quot; 表示客户端（kubectl）版本信息， &quot;Server Version&quot; 表示服务器上运行的 Kubernetes 版本信息。</span>
kubectl version --output<span class="token operator">=</span>yaml

<span class="token comment"># Display addresses of the control plane and services with label kubernetes.io/cluster-service=true.</span>
<span class="token comment"># 显示整个集群的 Kubernetes master、KubeDNS、Metrics-server 等服务组件的 Endpoints</span>
kubectl cluster-info
<span class="token comment"># Kubernetes control plane is running at https://127.0.0.1:6443</span>
<span class="token comment"># CoreDNS is running at https://127.0.0.1:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</span>
<span class="token comment"># Metrics-server is running at https://127.0.0.1:6443/api/v1/namespaces/kube-system/services/https:metrics-server:https/proxy</span>

<span class="token comment"># To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.</span>

<span class="token comment"># 使用 kubectl cluster-info dump --output-directory 分类存放集群信息，进一步调试和诊断集群问题。</span>
kubectl cluster-info dump --output-directory<span class="token operator">=</span>/path/to/cluster-state
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 修改证书请求资源的状态</span>
<span class="token comment"># Modify certificate resources.</span>
kubectl certificate

<span class="token comment"># 列出证书签名请求</span>
kubectl get csr

kubectl api-resources <span class="token operator">|</span> <span class="token function">grep</span> csr
certificatesigningrequests        csr          certificates.k8s.io/v1                 <span class="token boolean">false</span>        CertificateSigningRequest

<span class="token comment"># Approve a certificate signing request.</span>
kubectl certificate approve
<span class="token comment"># Approve CSR 'csr-sqgzp'</span>
kubectl certificate approve csr-sqgzp

<span class="token comment"># Deny a certificate signing request</span>
kubectl certificate deny

<span class="token comment"># Deny CSR 'csr-sqgzp'</span>
kubectl certificate deny csr-sqgzp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 显示 node 或 pod 的 CPU、Memory 的使用量,需要提前安装并正确配置 Meric-server</span>
kubectl <span class="token function">top</span> node
NAME           CPU<span class="token punctuation">(</span>cores<span class="token punctuation">)</span>   CPU%   MEMORY<span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>   MEMORY%
<span class="token number">10.177</span>.185.7   219m         <span class="token number">11</span>%    1684Mi          <span class="token number">59</span>%

kubectl <span class="token function">top</span> pod
NAME    CPU<span class="token punctuation">(</span>cores<span class="token punctuation">)</span>   MEMORY<span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>
nginx   0m           3Mi

kubectl <span class="token function">top</span> node --sort-by<span class="token operator">=</span>cpu
kubectl <span class="token function">top</span> node --sort-by<span class="token operator">=</span>memory
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># Mark node as unschedulable.</span>
<span class="token comment"># 将指定节点标记为不可被调度，将不会被 master 节点上的 kube-scheduler 分配新的 pod 运行任务。被标记的节点（除非发布任务时使用nodeName 强制指定标记的节点）</span>
<span class="token comment"># kubectl get nodes 查看到的 STATUS 为 Ready,SchedulingDisable</span>
kubectl cordon

<span class="token comment"># Mark node &quot;foo&quot; as unschedulable</span>
kubectl cordon foo

<span class="token comment"># 标记指定节点为可以被 kube-scheduler 调度。</span>
<span class="token comment"># Mark node &quot;foo&quot; as schedulable</span>
kubectl uncordon foo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># Drain node in preparation for maintenance.</span>
<span class="token comment"># 排空准备维护的节点</span>
<span class="token comment"># 1. 给指定的节点标记为 SchedulingDisabled，防止被 kube-scheduler 分配新的 pod 运行任务。</span>
<span class="token comment"># 2. 尝试把运行的 pod 迁移到其它 node 节点，如果无法迁移将删除 pod。</span>
<span class="token comment"># 3. 使用 --ignore-daemonsets 参数删除由 DaemonSet 管理的 pod,使用 --delete-emptydir-data 参数删除存没有使用共享存储运行在数据存放在当前 node 节点的 pod。</span>
<span class="token comment"># 4. drain 后的 node 节点，可以使用 kubectl delete node NodeName,从 etcd 中彻底删除节点。使用 kubeadm reset 初始化该节点。</span>
<span class="token comment"># 5. 也可以把 drain 后的 node 节点，使用 kubectl uncordon NodeName,重新标记为可以被调度</span>

<span class="token comment"># Drain node &quot;foo&quot;, even if there are pods not managed by a replication controller, replica set, job, daemon set or stateful set on it</span>
kubectl drain foo --force

<span class="token comment"># use a grace period of 15 minutes</span>
kubectl drain foo --grace-period<span class="token operator">=</span><span class="token number">900</span>

kubectl drain k8s-node2.lab.example.com --ignore-daemonsets --delete-emptydir-data <span class="token punctuation">[</span>--force<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># taint（污点）</span>
<span class="token comment"># 使用 kubeadm 初始化的集群，出于安全考虑 Pod 不会被调度到 Master 节点上，也就是说 Master 节点不参与工作负载。</span>
<span class="token comment"># 这是因为当前的 master 节点被打上了 `node-role.kubernetes.io/master: NoSchedule` 的污点</span>

<span class="token comment"># 使用 taint 是从架构的角度， 不想一些 infra 的节点运行业务的 pod</span>
<span class="token comment"># 使用 cordon 是从运维的角度，比如说某个节点要下线，或者需要维护</span>

$ kubectl describe nodes k8s-master.lab.example.com <span class="token operator">|</span> <span class="token function">grep</span> Taints
Taints:      node-role.kubernetes.io/master: NoSchedule

<span class="token comment"># Usage:</span>
kubectl taint NODE NAME <span class="token assign-left variable">KEY_1</span><span class="token operator">=</span>VAL_1:TAINT_EFFECT_1 <span class="token punctuation">..</span>. <span class="token assign-left variable">KEY_N</span><span class="token operator">=</span>VAL_N:TAINT_EFFECT_N <span class="token punctuation">[</span>options<span class="token punctuation">]</span>

<span class="token comment"># effect 取值</span>
<span class="token comment"># NoSchedule: 一定不能被调度</span>
<span class="token comment"># PreferNoSchedule:  尽量不要调度，实在没有地方调度的情况下，才考虑调度到当前节点</span>
<span class="token comment"># NoExecute: 不仅不会调度, 还会立即驱逐 Node 上已有的 Pod</span>
<span class="token comment"># -:去掉 taint，取值为空。</span>

 <span class="token comment"># Update node 'foo' with a taint with key 'dedicated' and value 'special-user' and effect 'NoSchedule'</span>
<span class="token comment"># If a taint with that key and effect already exists, its value is replaced as specified</span>
kubectl taint nodes foo <span class="token assign-left variable">dedicated</span><span class="token operator">=</span>special-user:NoSchedule

<span class="token comment"># Remove from node 'foo' the taint with key 'dedicated' and effect 'NoSchedule' if one exists</span>
kubectl taint nodes foo dedicated:NoSchedule-

<span class="token comment"># Remove from node 'foo' all the taints with key 'dedicated'</span>
kubectl taint nodes foo dedicated-

<span class="token comment"># Add a taint with key 'dedicated' on nodes having label mylabel=X</span>
kubectl taint node -l <span class="token assign-left variable">myLabel</span><span class="token operator">=</span>X  <span class="token assign-left variable">dedicated</span><span class="token operator">=</span>foo:PreferNoSchedule

<span class="token comment"># Add to node 'foo' a taint with key 'bar' and no value</span>
kubectl taint nodes foo bar:NoSchedule

<span class="token comment"># 去掉 master 节点的污点，使 master 节点可以被调度</span>
$ kubectl taint nodes k8s-master.lab.example.com node-role.kubernetes.io/master-

<span class="token comment"># 设置 master 节点尽量不要被调度</span>
kubectl taint nodes k8s-master.lab.example.com node-role.kubernetes.io/master:PreferNoSchedule
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># toleration（容忍）</span>
<span class="token comment"># 除了直接去除污点，还有一种办法可以让 pod 调度到 master 上</span>
<span class="token comment"># 可以在 pod 的 yaml 配置文件中添加 tolerations 字段来使 pod 容忍节点的污点</span>
<span class="token comment"># 或者在 pod 的 yaml 配置文件中添加 nodeName 字段来使 pod 容忍节点的污点</span>
<span class="token comment"># 例如，如果你想让你的 pod 可以被调度到 master 节点上，在 pod 的 spec 中添加如下设置即可：</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> pod<span class="token punctuation">-</span>toleration
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'sleep'</span><span class="token punctuation">,</span> <span class="token string">'3600'</span><span class="token punctuation">]</span>
      <span class="token key atrule">image</span><span class="token punctuation">:</span> busybox
      <span class="token key atrule">name</span><span class="token punctuation">:</span> pod<span class="token punctuation">-</span>toleration<span class="token punctuation">-</span>container
  <span class="token key atrule">tolerations</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token string">'node-role.kubernetes.io/master'</span>
      <span class="token comment"># - key: '' # empty means match all taint keys</span>
      <span class="token key atrule">operator</span><span class="token punctuation">:</span> <span class="token string">'Equal'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> pod<span class="token punctuation">-</span>single<span class="token punctuation">-</span>simple<span class="token punctuation">-</span>container<span class="token punctuation">-</span>busybox
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">nodeName</span><span class="token punctuation">:</span> k8s<span class="token punctuation">-</span>node1.lab.example.com
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">command</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> sleep
        <span class="token punctuation">-</span> <span class="token string">'3600'</span>
      <span class="token key atrule">image</span><span class="token punctuation">:</span> busybox
      <span class="token key atrule">name</span><span class="token punctuation">:</span> pods<span class="token punctuation">-</span>simple<span class="token punctuation">-</span>container
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>pod.spec.tolerations</strong></p> <table><thead><tr><th>字段</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>effect</td> <td><code>&lt;string&gt;</code></td> <td>匹配的 taint 效果。空意味着匹配所有的污染效果。允许的值是 NoSchedule、PreferNoSchedule 和 NoExecute。</td></tr> <tr><td>key</td> <td><code>&lt;string&gt;</code></td> <td>key 是容忍适用所有适用的污点的 key。空表示匹配所有 taint keys。如果键为空，operator 操作符必须为 Exists;这种组合 意味着匹配所有 values 和所有 keys。</td></tr> <tr><td>value</td> <td><code>&lt;string&gt;</code></td> <td>值是容忍匹配的污染值。如果操作符为 Exists，则该值应该为空，否则只是一个常规字符串。</td></tr> <tr><td>operator</td> <td><code>&lt;string&gt;</code></td> <td>操作符表示键与值的关系。合法的操作符是 Exists 和 Equal。默认为 Equal。Exists 等价于值的通配符，因此 pod 可以容忍特 定类别的所有缺陷。</td></tr> <tr><td>tolerationSeconds</td> <td><code>&lt;string&gt;</code></td> <td>表示容忍污染的时间(NoExecute 必须有效，否则该字段将被忽略)。默认情况下，它没有设置，这意味着永远容忍污浊(而不是 驱逐)。0 和负值将被系统视为 0(立即驱逐)。</td></tr></tbody></table> <h2 id="authorization-management"><a href="#authorization-management" class="header-anchor">#</a> Authorization management</h2> <ul><li><a href="https://kubernetes.io/zh/docs/reference/access-authn-authz/" target="_blank" rel="noopener noreferrer">访问 API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 修改、配置客户端登录凭证文件。每次执行 kubectl 命令可以使用--kubeconfig 指定登录凭证，或设置环境变量，</span>
<span class="token comment"># 当多个登录凭证存在时，优先级排序： --kubeconfig &gt; $KUBECONFIG &gt; ${HOME}/.kube/config</span>

kubectl get nodes --kubeconfig<span class="token operator">=~</span>/.kube/config
<span class="token builtin class-name">export</span> <span class="token variable">$KUBECONFIG</span><span class="token operator">=~</span>/.kube/config
kubectl get nodes

<span class="token comment"># Display merged kubeconfig settings or a specified kubeconfig file</span>
kubectl config view
kubectl config view <span class="token operator">|</span> <span class="token function">grep</span> namespace

<span class="token comment"># Display the current-context</span>
kubectl config current-context
mycluster-free/c7qubeaf0mevjf5urfdg
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># Inspect authorization</span>
<span class="token comment"># 检查当前用户的授权。 command: kubectl auth</span>

<span class="token comment"># --as='': Username to impersonate for the operation</span>
<span class="token comment"># 检查 tool-sa 这个service account 有没有权限创建 pod</span>
kubectl auth can-i create pods --as tool-sa

<span class="token comment"># 检查当前用户是否可对某种资源执行操作</span>

kubectl auth can-i create pods

<span class="token comment"># Check to see if I can create pods in any namespace</span>
kubectl auth can-i create pods --all-namespaces

<span class="token comment"># Check to see if I can list deployments in my current namespace</span>
kubectl auth can-i list deployments.apps

<span class="token comment"># Check to see if I can do everything in my current namespace (&quot;*&quot; means all)</span>
kubectl auth can-i <span class="token string">'*'</span> <span class="token string">'*'</span>

<span class="token comment"># Check to see if I can get the job named &quot;bar&quot; in namespace &quot;foo&quot;</span>
kubectl auth can-i list jobs.batch/bar -n foo

<span class="token comment"># Check to see if I can read pod logs</span>
kubectl auth can-i get pods --subresource<span class="token operator">=</span>log

<span class="token comment"># Check to see if I can access the URL /logs/</span>
kubectl auth can-i get /logs/

<span class="token comment"># List all allowed actions in namespace &quot;foo&quot;</span>
kubectl auth can-i --list --namespace<span class="token operator">=</span>foo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># Reconciles rules for RBAC role, role binding, cluster role, and cluster role binding objects.</span>
<span class="token comment"># 使用清单文件来创建或者更新 rbac.authorization.k8s.io/v1 API 对象。</span>
<span class="token comment"># 尚不存在的对象会被创建，如果对应的名字空间也不存在，必要的话也会被创建。 已经存在的角色会被更新，使之包含输入对象中所给的权限。如果指定了 --remove-extra-permissions，可以删除额外的权限。</span>

<span class="token comment"># 已经存在的绑定也会被更新，使之包含输入对象中所给的主体。如果指定了 --remove-extra-permissions，则可以删除多余的主体。</span>

<span class="token comment"># Reconcile RBAC resources from a file</span>
<span class="token comment"># 应用 RBAC 对象的清单文件，保留角色中的额外权限和绑定中的其他主体</span>
kubectl auth reconcile -f my-rbac-rules.yaml

<span class="token comment"># 测试应用 RBAC 对象的清单文件，显示将要进行的更改：</span>
kubectl auth reconcile -f my-rbac-rules.yaml --dry-run

<span class="token comment"># 应用 RBAC 对象的清单文件, 删除角色中的额外权限和绑定中的其他主体</span>
kubectl auth reconcile -f my-rbac-rules.yaml --remove-extra-subjects --remove-extra-permissions
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="access-clusters-using-the-kubernetes-api"><a href="#access-clusters-using-the-kubernetes-api" class="header-anchor">#</a> Access Clusters Using the Kubernetes API</h3> <div id="access_endpoints"></div> <ul><li><a href="https://www.jianshu.com/p/892b0e469266" target="_blank" rel="noopener noreferrer">k8s 之 service account<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://superuser.com/questions/1394619/how-to-get-the-admin-user-token-from-kubectl" target="_blank" rel="noopener noreferrer">How to get the admin-user token from kubectl<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <blockquote><p>有了 sa 后，我们就可以使用 sa 的 token 和 apiserver 交互了，由于所有通信都通过 TLS 进行，所以也得需要证书（ca.crt，这里的证书指的是 server 端的 ca 证书）或者允许不安全的连接(<code>--insecure</code>)。
token 和证书如何获取的？每个 sa 都会自动关联一个 secret，token 和证书就存在 secret 中。在 pod 内部他们被放在如下文件中(所有 pod 内部的 ca.crt 证书都一样，都是<code>/etc/kubernetes/pki/ca.crt</code>)</p></blockquote> <hr> <blockquote><p>!!! IMPORTANT. With Kubernetes v1.24, non-expiring service account tokens are no longer auto-generated.
K8s won’t generate Secrets any longer automatically for ServiceAccounts</p> <ul><li><a href="https://itnext.io/big-change-in-k8s-1-24-about-serviceaccounts-and-their-secrets-4b909a4af4e0" target="_blank" rel="noopener noreferrer">BIG change in K8s 1.24 about ServiceAccounts and their Secrets<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://eng.d2iq.com/blog/service-account-tokens-in-kubernetes-v1.24/" target="_blank" rel="noopener noreferrer">Service Account Tokens in Kubernetes v1.24<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 查看 endpoints</span>
<span class="token comment"># The URL of the Kubernetes API server.</span>
kubectl config view --minify <span class="token operator">|</span> <span class="token function">grep</span> server <span class="token operator">|</span> <span class="token function">cut</span> -f <span class="token number">2</span>- -d <span class="token string">&quot;:&quot;</span> <span class="token operator">|</span> <span class="token function">tr</span> -d <span class="token string">&quot; &quot;</span>
https://192.168.49.2:8443
<span class="token comment"># cat ~/.kube/config</span>

<span class="token comment"># https://kubernetes.default.svc</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 在k8s v1.24之前，每个 sa 默认都会绑定一个 secret(token)</span>
<span class="token comment"># 根据 sa 查看 secret 的名字</span>
<span class="token assign-left variable">SERVICE_ACCOUNT</span><span class="token operator">=</span>default
<span class="token assign-left variable">NAMESPACE</span><span class="token operator">=</span>default
<span class="token comment"># SECRET=$(kubectl describe sa $SERVICE_ACCOUNT -n $NAMESPACE | grep -i tokens | awk '{print $2}')</span>
<span class="token assign-left variable">SECRET</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>kubectl get sa $SERVICE_ACCOUNT -n $NAMESPACE -o json <span class="token operator">|</span> jq -Mr '.secrets<span class="token punctuation">[</span><span class="token punctuation">]</span>.name <span class="token operator">|</span> select<span class="token punctuation">(</span>contains<span class="token punctuation">(</span><span class="token string">&quot;token&quot;</span><span class="token punctuation">)</span><span class="token variable">)</span></span>'<span class="token punctuation">)</span>

<span class="token comment"># 从 secret 中查看 token</span>
<span class="token comment"># TOKEN=$(kubectl describe secret $SECRET -n $NAMESPACE | grep -i 'token:' | awk '{print $2}')</span>
<span class="token assign-left variable">TOKEN</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>kubectl get secret $SECRET -n $NAMESPACE -o json <span class="token operator">|</span> jq -Mr <span class="token string">'.data.token'</span> <span class="token operator">|</span> base64 -d<span class="token variable">)</span></span>
<span class="token assign-left variable">API_SERVER</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>kubectl config view --minify <span class="token operator">|</span> <span class="token function">grep</span> server <span class="token operator">|</span> <span class="token function">cut</span> -f <span class="token number">2</span>- -d <span class="token string">&quot;:&quot;</span> <span class="token operator">|</span> <span class="token function">tr</span> -d <span class="token string">&quot; &quot;</span><span class="token variable">)</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">curl</span> --header <span class="token string">&quot;Authorization: Bearer <span class="token variable">$TOKEN</span>&quot;</span> --insecure -s <span class="token variable">$API_SERVER</span>/api
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>After v1.24</strong></p> <ul><li><a href="https://kubernetes.io/docs/concepts/configuration/secret/#service-account-token-secrets" target="_blank" rel="noopener noreferrer">Service account token Secrets<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token assign-left variable">NAMESPACE</span><span class="token operator">=</span>default
<span class="token assign-left variable">SERVICE_ACCOUNT</span><span class="token operator">=</span>build-robot
<span class="token assign-left variable">SECRET</span><span class="token operator">=</span>build-robot-secret

kubectl apply --namespace<span class="token operator">=</span><span class="token variable">$NAMESPACE</span> -f - <span class="token operator">&lt;&lt;</span><span class="token string">EOF
apiVersion: v1
kind: Secret
metadata:
  name: <span class="token variable">$SECRET</span>
  annotations:
    kubernetes.io/service-account.name: <span class="token variable">$SERVICE_ACCOUNT</span>
type: kubernetes.io/service-account-token
EOF</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 从 secret 中查看 token</span>
<span class="token comment"># TOKEN=$(kubectl describe secret $SECRET -n $NAMESPACE | grep -i 'token:' | awk '{print $2}')</span>
<span class="token assign-left variable">TOKEN</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>kubectl get secret $SECRET -n $NAMESPACE -o json <span class="token operator">|</span> jq -Mr <span class="token string">'.data.token'</span> <span class="token operator">|</span> base64 -d<span class="token variable">)</span></span>
<span class="token comment"># API_SERVER=$(kubectl config view --minify | grep server | cut -f 2- -d &quot;:&quot; | tr -d &quot; &quot;)</span>
<span class="token comment"># API_SERVER=$(kubectl --kubeconfig=kubeconfig-$NAMESPACE config view --minify -o jsonpath='{.clusters[].cluster.server}')</span>
<span class="token assign-left variable">API_SERVER</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>kubectl config view --minify -o <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">'{.clusters[].cluster.server}'</span><span class="token variable">)</span></span>
<span class="token function">curl</span> -H <span class="token string">&quot;Authorization: Bearer <span class="token variable">$TOKEN</span>&quot;</span> --insecure -s <span class="token variable">$API_SERVER</span>/api
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>From - <a href="https://kubernetes.io/docs/tasks/administer-cluster/access-cluster-api/#without-kubectl-proxy" target="_blank" rel="noopener noreferrer">Offical Doc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># Check all possible clusters, as your .KUBECONFIG may have multiple contexts:</span>
kubectl config view -o <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">'{&quot;Cluster name\tServer\n&quot;}{range .clusters[*]}{.name}{&quot;\t&quot;}{.cluster.server}{&quot;\n&quot;}{end}'</span>

<span class="token comment"># Select name of cluster you want to interact with from above output:</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLUSTER_NAME</span><span class="token operator">=</span><span class="token string">&quot;some_server_name&quot;</span>

<span class="token comment"># Point to the API server referring the cluster name</span>
<span class="token assign-left variable">APISERVER</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>kubectl config view -o <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">&quot;{.clusters[?(@.name==<span class="token entity" title="\&quot;">\&quot;</span><span class="token variable">$CLUSTER_NAME</span><span class="token entity" title="\&quot;">\&quot;</span>)].cluster.server}&quot;</span><span class="token variable">)</span></span>

<span class="token comment"># Create a secret to hold a token for the default service account</span>
kubectl apply -f - <span class="token operator">&lt;&lt;</span><span class="token string">EOF
apiVersion: v1
kind: Secret
metadata:
  name: default-token
  annotations:
    kubernetes.io/service-account.name: default
type: kubernetes.io/service-account-token
EOF</span>

<span class="token comment"># Wait for the token controller to populate the secret with a token:</span>
<span class="token keyword">while</span> <span class="token operator">!</span> kubectl describe secret default-token <span class="token operator">|</span> <span class="token function">grep</span> -E <span class="token string">'^token'</span> <span class="token operator">&gt;</span>/dev/null<span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;waiting for token...&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
  <span class="token function">sleep</span> <span class="token number">1</span>
<span class="token keyword">done</span>

<span class="token comment"># Get the token value</span>
<span class="token assign-left variable">TOKEN</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>kubectl get secret default-token -o <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">'{.data.token}'</span> <span class="token operator">|</span> base64 --decode<span class="token variable">)</span></span>

<span class="token comment"># Explore the API with TOKEN</span>
<span class="token function">curl</span> -X GET <span class="token variable">$APISERVER</span>/api --header <span class="token string">&quot;Authorization: Bearer <span class="token variable">$TOKEN</span>&quot;</span> --insecure
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="get-ca-certificate"><a href="#get-ca-certificate" class="header-anchor">#</a> Get CA Certificate</h3> <ul><li><a href="https://technekey.com/how-to-get-kubernetes-ca-certificate/" target="_blank" rel="noopener noreferrer">How To Get Kubernetes CA Certificate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># Using Jsonpath</span>
kubectl config view --raw -o <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">'{.clusters[0].cluster.certificate-authority-data}'</span> <span class="token operator">|</span>base64  -d
<span class="token comment"># Replace [0] With [*] To Get For All The Clusters</span>
<span class="token comment"># kubectl config view --raw -o jsonpath='{.clusters[*].cluster.certificate-authority-data}' |base64  -d</span>

<span class="token comment"># Using Go-Template, A Caveat: Dump The CA Certificate Of 1st Cluster If Kubeconfig Contains Multiple Clusters</span>
kubectl config view --raw -o go-template<span class="token operator">=</span><span class="token string">'{{index ((index (index .clusters 0) &quot;cluster&quot;)) &quot;certificate-authority-data&quot;|base64decode}}'</span>

<span class="token comment"># Fetch It From Any Running POD Which Has A Service Account Mounted(If Needed Within The Pod)</span>
kubectl <span class="token builtin class-name">exec</span> -it busybox -- <span class="token function">cat</span> /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
kubectl <span class="token builtin class-name">exec</span> -it busybox -- <span class="token function">sh</span>
/ <span class="token comment"># ls /var/run/secrets/kubernetes.io/serviceaccount/</span>
ca.crt     namespace  token
/ <span class="token comment"># cat  /etc/kubernetes/pki/ca.crt</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="kubernetes-client-libraries"><a href="#kubernetes-client-libraries" class="header-anchor">#</a> Kubernetes Client Libraries</h3> <ul><li><a href="https://kubernetes.io/docs/reference/using-api/client-libraries/" target="_blank" rel="noopener noreferrer">Client Libraries<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="resource-management"><a href="#resource-management" class="header-anchor">#</a> Resource management</h2> <h3 id="creating-objects"><a href="#creating-objects" class="header-anchor">#</a> Creating objects</h3> <p>Kubernetes 配置可以用 YAML 或 JSON 定义。可以使用的文件扩展名有 <code>.yaml</code>、<code>.yml</code> 和 <code>.json</code>。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 从文本文件或终端创建 kubenetes 资源。</span>
<span class="token comment"># Create a pod using the data in pod.json</span>
kubectl create -f ./pod.json

<span class="token comment"># Create a pod based on the JSON passed into stdin</span>
<span class="token function">cat</span> pod.json <span class="token operator">|</span> kubectl create -f -

<span class="token comment"># Edit the data in docker-registry.yaml in JSON then create the resource using the edited data</span>
kubectl create -f docker-registry.yaml --edit -o json

<span class="token comment"># 启动单实例 nginx</span>
kubectl create deployment nginx --image<span class="token operator">=</span>nginx

kubectl create deployment nginx --image<span class="token operator">=</span>nginx:1.20 --replicas<span class="token operator">=</span><span class="token number">5</span>

kubectl create deployment nginx --image<span class="token operator">=</span>nginx:1.20 --dry-run<span class="token operator">=</span>client -o yaml

kubectl create configmap env-config --from-literal<span class="token operator">=</span>log_level<span class="token operator">=</span>INFO
kubectl create configmap env-config --from-literal<span class="token operator">=</span>log_level<span class="token operator">=</span>INFO --from-literal<span class="token operator">=</span>log_file<span class="token operator">=</span>logfile
kubectl create configmap cm-hosts --from-file<span class="token operator">=</span>/etce/hosts

kubectl create secret
docker-registry  generic          tls
kubectl create secret docker-registry --help

<span class="token comment"># If you don't already have a .dockercfg file, you can create a dockercfg secret directly by using:</span>
kubectl create secret docker-registry my-secret --docker-server<span class="token operator">=</span>DOCKER_REGISTRY_SERVER --docker-username<span class="token operator">=</span>DOCKER_USER
--docker-password<span class="token operator">=</span>DOCKER_PASSWORD --docker-email<span class="token operator">=</span>DOCKER_EMAIL

<span class="token comment"># Create a new secret named my-secret from ~/.docker/config.json</span>
kubectl create secret docker-registry my-secret --from-file<span class="token operator">=</span>.dockerconfigjson<span class="token operator">=</span>path/to/.docker/config.json

<span class="token assign-left variable">CERT_PATH</span><span class="token operator">=~</span>/myapp/cert
kubectl create secret generic my-secret --from-file<span class="token operator">=</span><span class="token variable">$CERT_PATH</span>/AlipayRootCert.crt --from-file<span class="token operator">=</span><span class="token variable">$CERT_PATH</span>/AlipayRootCert.crt --from-file<span class="token operator">=</span><span class="token variable">$CERT_PATH</span>/AlipayCertPublicKey.crt --from-file<span class="token operator">=</span><span class="token variable">$CERT_PATH</span>/AppCertPublicKey.crt -n default -o yaml --dry-run<span class="token operator">=</span>client
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 通过文件名或标准输入将配置应用于资源。必须指定资源名称。如果该资源尚不存在，则将创建它。要使用“应用”，请始终首先使用“apply”或“create --save-config”创建资源</span>

<span class="token comment"># 创建资源</span>
kubectl apply -f ./my-manifest.yaml
<span class="token comment"># 使用多个文件创建</span>
kubectl apply -f ./my1.yaml -f ./my2.yaml

<span class="token comment"># Apply the configuration in pod.json to a pod</span>
kubectl apply -f ./pod.json

<span class="token comment"># Apply resources from a directory containing kustomization.yaml - e.g. dir/kustomization.yaml</span>
kubectl apply -k dir/

<span class="token comment"># Apply the JSON passed into stdin to a pod</span>
<span class="token function">cat</span> pod.json <span class="token operator">|</span> kubectl apply -f -

<span class="token comment"># 从 URL 中创建资源</span>
kubectl apply -f https://git.io/vPieo

<span class="token comment"># Note: --prune is still in Alpha</span>
<span class="token comment"># Apply the configuration in manifest.yaml that matches label app=nginx and delete all other resources that are not in the file and match label app=nginx</span>
kubectl apply --prune -f manifest.yaml -l <span class="token assign-left variable">app</span><span class="token operator">=</span>nginx

<span class="token comment"># Apply the configuration in manifest.yaml and delete all the other config maps that are not in the file</span>
kubectl apply --prune -f manifest.yaml --all --prune-whitelist<span class="token operator">=</span>core/v1/ConfigMap

<span class="token comment"># Create a secret with several keys</span>
<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">|</span> kubectl apply -f -</span>
apiVersion: v1
kind: Secret
metadata:
  name: mysecret
type: Opaque
data:
  password: <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> -n <span class="token string">&quot;s33msi4&quot;</span> <span class="token operator">|</span> base64 -w0<span class="token variable">)</span></span>
  username: <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> -n <span class="token string">&quot;jane&quot;</span> <span class="token operator">|</span> base64 -w0<span class="token variable">)</span></span>
EOF</span>

kubectl apply -f - <span class="token operator">&lt;&lt;</span><span class="token string">EOF
apiVersion: v1
kind: Pod
metadata:
  name: busybox
spec:
  containers:
    - command: ['/bin/sh', '-c', 'tail -f /dev/null']
      image: busybox
      name: busybox
EOF</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># Create and run a particular image in a pod.</span>
<span class="token comment"># !!!Note: 'kubectl run' command does not support run multiple containers.</span>

<span class="token comment"># Start a nginx pod</span>
kubectl run nginx --image<span class="token operator">=</span>nginx

<span class="token variable">$kubectl</span> run nginx --image<span class="token operator">=</span>nginx --limits<span class="token operator">=</span>cpu<span class="token operator">=</span>500m,memory<span class="token operator">=</span>300Mi
Flag --limits has been deprecated, has no effect and will be removed <span class="token keyword">in</span> <span class="token number">1.24</span>.
pod/nginx created

kubectl run nginx --image<span class="token operator">=</span>docker.io/nginx:1.20 --expose
<span class="token comment"># output:</span>
service/nginx created
pod/nginx created

<span class="token comment"># Start a hazelcast pod and let the container expose port 5701</span>
kubectl run hazelcast --image<span class="token operator">=</span>hazelcast/hazelcast --port<span class="token operator">=</span><span class="token number">5701</span>

<span class="token comment"># Start a hazelcast pod and set environment variables &quot;DNS_DOMAIN=cluster&quot; and &quot;POD_NAMESPACE=default&quot; in the container</span>
kubectl run hazelcast --image<span class="token operator">=</span>hazelcast/hazelcast --env<span class="token operator">=</span><span class="token string">&quot;DNS_DOMAIN=cluster&quot;</span> --env<span class="token operator">=</span><span class="token string">&quot;POD_NAMESPACE=default&quot;</span>

<span class="token comment"># Start a hazelcast pod and set labels &quot;app=hazelcast&quot; and &quot;env=prod&quot; in the container</span>
kubectl run hazelcast --image<span class="token operator">=</span>hazelcast/hazelcast --labels<span class="token operator">=</span><span class="token string">&quot;app=hazelcast,env=prod&quot;</span>

<span class="token comment"># Dry run; print the corresponding API objects without creating them</span>
kubectl run nginx --image<span class="token operator">=</span>nginx --dry-run<span class="token operator">=</span>client

kubectl run nginx --image<span class="token operator">=</span>nginx --dry-run<span class="token operator">=</span>client -o yaml
kubectl run nginx --image<span class="token operator">=</span>nginx --dry-run<span class="token operator">=</span>client -o yaml <span class="token operator">&gt;</span>nginx_pod.yaml

<span class="token comment"># Start a nginx pod, but overload the spec with a partial set of values parsed from JSON</span>
kubectl run nginx --image<span class="token operator">=</span>nginx --overrides<span class="token operator">=</span><span class="token string">'{ &quot;apiVersion&quot;: &quot;v1&quot;, &quot;spec&quot;: { ... } }'</span>

<span class="token comment"># Start a busybox pod and keep it in the foreground, don't restart it if it exits</span>
kubectl run -i -t busybox --image<span class="token operator">=</span>busybox:1.28 --restart<span class="token operator">=</span>Never
kubectl run -i -t busybox --image<span class="token operator">=</span>busybox:1.28.4 --restart<span class="token operator">=</span>Never

kubectl run busybox --image<span class="token operator">=</span>busybox:1.28 -it --attach --rm -- <span class="token function">sh</span>

<span class="token comment"># Start the nginx pod using the default command, but use custom arguments (arg1 .. argN) for that command</span>
kubectl run nginx --image<span class="token operator">=</span>nginx -- <span class="token operator">&lt;</span>arg<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span>arg<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token punctuation">..</span>. <span class="token operator">&lt;</span>argN<span class="token operator">&gt;</span>

<span class="token comment"># Start the nginx pod using a different command and custom arguments</span>
kubectl run nginx --image<span class="token operator">=</span>nginx --command -- <span class="token operator">&lt;</span>cmd<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>arg<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token punctuation">..</span>. <span class="token operator">&lt;</span>argN<span class="token operator">&gt;</span>

kubectl run nginx --image<span class="token operator">=</span>docker.io/nginx:1.20 <span class="token punctuation">\</span>
  --image-pull-policy<span class="token operator">=</span>IfNotPresent <span class="token punctuation">\</span>
  -l <span class="token assign-left variable">server</span><span class="token operator">=</span>frontend,os<span class="token operator">=</span>ubuntu <span class="token punctuation">\</span>
  --annotations<span class="token operator">=</span>k1<span class="token operator">=</span>v1 <span class="token punctuation">\</span>
  --annotations<span class="token operator">=</span>k2<span class="token operator">=</span>v2 <span class="token punctuation">\</span>
  --env<span class="token operator">=</span>username<span class="token operator">=</span>test <span class="token punctuation">\</span>
  --env<span class="token operator">=</span>password<span class="token operator">=</span>test1234 <span class="token punctuation">\</span>
  --expose --port<span class="token operator">=</span><span class="token number">80</span> --privileged


<span class="token comment">########  Options ########</span>
<span class="token comment"># 指定镜像的名字。</span>
--image<span class="token operator">=</span>

<span class="token comment"># 指定下载镜像的策略,可选策略 Always,Never,IfNotPresent,默认为 always</span>
--image-pull-policy<span class="token operator">=</span>

<span class="token comment"># 指定 pod 的标签</span>
<span class="token comment"># Comma separated labels to apply to the pod. Will override previous values.</span>
-l, --labels<span class="token operator">=</span><span class="token string">''</span> <span class="token string">'k1=v1,k2=v2,...'</span>

<span class="token comment"># 应用于 pod 的注释，多个注释使用多个 --annotations 引导</span>
--annotations<span class="token operator">=</span><span class="token string">''</span>

<span class="token comment"># 设置 pod 中的环境变量，多个变量使用多个--env 引导</span>
--env<span class="token operator">=</span><span class="token string">''</span>

<span class="token comment"># 在容器中执行的命令</span>
--command

<span class="token comment"># 为 pod 创建 clusterIP Service</span>
--expose

<span class="token comment"># 指定容器的暴露端口</span>
<span class="token comment"># 与 docker 在 Dockerfile expose 端口的作用类似。没有实际作用，只起提示信息的作用</span>
--port<span class="token operator">=</span>

<span class="token comment"># 请等待 pod 启动运行，附加命令到 pod 中执行</span>
--attach

<span class="token comment"># 在执行完容器中 attach 命令后删除 pod</span>
<span class="token comment"># --rm=false: If true, delete the pod after it exits.  Only valid when attaching to the container, e.g. with '--attach' or with '-i/--stdin'.</span>
--rm

<span class="token comment"># 在资源 annotations 中记录当前的 kubectl 命令</span>
--record

<span class="token comment"># 以特权身份（超级用户）运行容器，默认为 false</span>
--privileged

<span class="token comment"># 指定 pod 的重启策略，可选策略：Always,OnFailure,Never，默认为 Always</span>
--restart<span class="token operator">=</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br></div></div><h3 id="viewing-finding-resources"><a href="#viewing-finding-resources" class="header-anchor">#</a> Viewing, finding resources</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 打印指定资源的信息，默认为当前名称空间。其中 all 为所有资源</span>
<span class="token comment"># Display one or many resources.</span>

kubectl get pod
<span class="token comment"># -v, --v=0: number for the log level verbosity</span>
kubectl get pod --v<span class="token operator">=</span><span class="token number">8</span>
kubectl get po
kubectl get po nginx
kubectl get po nginx -o yaml <span class="token operator">&gt;</span> pod_nginx.yaml
kubectl get node
kubectl get no
kubectl get deploy
kubectl get svc
kubectl get all
kubectl get all -n kube-system
kubectl get all -A

<span class="token comment"># List all pods in ps output format</span>
kubectl get pods

<span class="token comment"># List all pods in ps output format with more information (such as node name)</span>
kubectl get pods -o wide

<span class="token comment"># List pods name only</span>
kubectl get pods -o name

<span class="token comment"># When printing, show all labels as the last column (default hide labels column)</span>
kubectl get pods --show-labels

<span class="token comment"># 显示 label key=region 的 pod</span>
kubectl get pods -L region

<span class="token comment"># 显示 pod IP</span>
kubectl get pods -o custom-columns<span class="token operator">=</span>POD:metadata.name,IP:status.podIP --no-headers

<span class="token comment"># 获取特定节点上运行的 Pod 列表</span>
kubectl get pods --field-selector spec.nodeName<span class="token operator">=</span><span class="token operator">&lt;</span>node-name<span class="token operator">&gt;</span> -n <span class="token operator">&lt;</span>namespace<span class="token operator">&gt;</span>

<span class="token comment"># List a single replication controller with specified NAME in ps output format</span>
kubectl get replicationcontroller web

<span class="token comment"># List deployments in JSON output format, in the &quot;v1&quot; version of the &quot;apps&quot; API group</span>
kubectl get deployments.v1.apps -o json

<span class="token comment"># List a single pod in JSON output format</span>
kubectl get -o json pod web-pod-13je7

<span class="token comment"># 健康检查</span>
<span class="token comment"># 检查 Pod 准备情况</span>
kubectl get pods <span class="token operator">&lt;</span>pod-name<span class="token operator">&gt;</span> -n <span class="token operator">&lt;</span>namespace<span class="token operator">&gt;</span> -o <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">'{.status.conditions[?(@.type==&quot;Ready&quot;)].status}'</span>

<span class="token comment"># List a pod identified by type and name specified in &quot;pod.yaml&quot; in JSON output format</span>
kubectl get -f pod.yaml -o json

<span class="token comment"># List resources from a directory with kustomization.yaml - e.g. dir/kustomization.yaml</span>
kubectl get -k dir/

<span class="token comment"># Return only the phase value of the specified pod</span>
kubectl get -o template pod/web-pod-13je7 --template<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>.status.phase<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token comment"># List resource information in custom columns</span>
kubectl get pod test-pod -o custom-columns<span class="token operator">=</span>CONTAINER:.spec.containers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>.name,IMAGE:.spec.containers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>.image

<span class="token comment"># List all replication controllers and services together in ps output format</span>
kubectl get rc,services

<span class="token comment"># List one or more resources by their type and names</span>
kubectl get rc/web service/frontend pods/web-pod-13je7

kubectl get secret --namespace default my-secret -o <span class="token assign-left variable">jsonpath</span><span class="token operator">=</span><span class="token string">&quot;{.data.my-password}&quot;</span> <span class="token operator">|</span> base64 --decode
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 打印指定资源的详细信息，包括 events、controllers、annotation 等。</span>

<span class="token comment"># Describe a node</span>
kubectl describe nodes kubernetes-node-emt8.c.myproject.internal

<span class="token comment"># Describe a pod</span>
kubectl describe pods/nginx

<span class="token comment"># Describe a pod identified by type and name in &quot;pod.json&quot;</span>
kubectl describe -f pod.json

<span class="token comment"># Describe all pods</span>
kubectl describe pods

<span class="token comment"># Describe pods by label name=myLabel</span>
kubectl describe po -l <span class="token assign-left variable">name</span><span class="token operator">=</span>myLabel

<span class="token comment"># Describe all pods managed by the 'frontend' replication controller</span>
<span class="token comment"># (rc-created pods get the name of the rc as a prefix in the pod name)</span>
kubectl describe pods frontend
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 获取资源的指定类型的文档信息</span>
<span class="token comment"># List the fields for supported resources.</span>

<span class="token comment"># Get the documentation of the resource and its fields</span>
kubectl explain pods

<span class="token comment"># Get the documentation of a specific field of a resource</span>
<span class="token comment"># &lt;type&gt;.&lt;fieldName&gt;[.&lt;fieldName&gt;]</span>
kubectl explain pods.spec.containers
kubectl explain pods.metadata
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="updating-editing-resources"><a href="#updating-editing-resources" class="header-anchor">#</a> Updating, editing resources</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>kubectl <span class="token builtin class-name">set</span>

<span class="token comment"># Configure application resources.</span>
<span class="token comment"># 对现有应用程序的资源进行更改。</span>
<span class="token comment"># 使用 key=value 的格式设置变量，多个变量用空格分割。</span>
<span class="token comment"># kubectl set env 立刻触发重新部署</span>

Available Commands:
  <span class="token function">env</span>            Update environment variables on a pod template
  image          Update the image of a pod template
  resources      Update resource requests/limits on objects with pod templates
  selector       Set the selector on a resource
  serviceaccount Update the <span class="token function">service</span> account of a resource
  subject        Update the user, group, or <span class="token function">service</span> account <span class="token keyword">in</span> a role binding or cluster role binding

<span class="token comment"># Set a deployment's nginx container image to 'nginx:1.9.1', and its busybox container image to 'busybox'</span>
kubectl <span class="token builtin class-name">set</span> image deployment/nginx <span class="token assign-left variable">busybox</span><span class="token operator">=</span>busybox <span class="token assign-left variable">nginx</span><span class="token operator">=</span>nginx:1.9.1

<span class="token comment"># Update all deployments' and rc's nginx container's image to 'nginx:1.9.1'</span>
kubectl <span class="token builtin class-name">set</span> image deployments,rc <span class="token assign-left variable">nginx</span><span class="token operator">=</span>nginx:1.9.1 --all

<span class="token comment"># Update image of all containers of daemonset abc to 'nginx:1.9.1'</span>
kubectl <span class="token builtin class-name">set</span> image daemonset abc *<span class="token operator">=</span>nginx:1.9.1
kubectl <span class="token builtin class-name">set</span> image daemonset abc *<span class="token operator">=</span>nginx:1.9.1 --record
<span class="token comment"># Flag --record can record `change cause`</span>
<span class="token comment"># Flag --record has been deprecated  --record will be removed in the future</span>
<span class="token comment"># 可以将 change cause 写在 annotation中</span>
<span class="token comment"># kubectl annotate daemonset/abc kubernetes.io/change-cause=&quot;XXX&quot;</span>
<span class="token comment"># kubectl rollout history daemonset/abc 查看部署版本编号 REVISION 及版本变更缘由 CHANGE-CAUSE</span>

<span class="token comment"># Print result (in yaml format) of updating nginx container image from local file, without hitting the server</span>
kubectl <span class="token builtin class-name">set</span> image -f path/to/file.yaml <span class="token assign-left variable">nginx</span><span class="token operator">=</span>nginx:1.9.1 --local -o yaml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># Update deployment 'registry' with a new environment variable</span>
kubectl <span class="token builtin class-name">set</span> <span class="token function">env</span> deployment/registry <span class="token assign-left variable">STORAGE_DIR</span><span class="token operator">=</span>/local
kubectl <span class="token builtin class-name">set</span> <span class="token function">env</span> deployment registry <span class="token assign-left variable">k1</span><span class="token operator">=</span>v1 <span class="token assign-left variable">K2</span><span class="token operator">=</span>v2

kubectl <span class="token builtin class-name">exec</span> registry-907i85gy98-io98jt -- <span class="token function">printenv</span>
kubectl <span class="token builtin class-name">exec</span> registry-907i85gy98-io98jt -- <span class="token builtin class-name">echo</span> <span class="token variable">$k1</span>

<span class="token comment"># List the environment variables defined on a deployments 'sample-build'</span>
kubectl <span class="token builtin class-name">set</span> <span class="token function">env</span> deployment/sample-build --list
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Kubectl set 子命令可应用的资源</strong></p> <table><thead><tr><th>resources</th> <th>kubectl set env</th> <th>kubectl set image</th> <th>vkubectl set resource</th> <th>kubectl set serviceaccount</th></tr></thead> <tbody><tr><td>pod (po)</td> <td>Y</td> <td>Y</td> <td>Y</td> <td></td></tr> <tr><td>replicationcontroller (rc)</td> <td>Y</td> <td>Y</td> <td>Y</td> <td>Y</td></tr> <tr><td>replicaset (rs)</td> <td>Y</td> <td>Y</td> <td>Y</td> <td>Y</td></tr> <tr><td>deployment (deploy)</td> <td>Y</td> <td>Y</td> <td>Y</td> <td>Y</td></tr> <tr><td>daemonset (ds)</td> <td>Y</td> <td>Y</td> <td>Y</td> <td>Y</td></tr> <tr><td>job</td> <td>Y</td> <td></td> <td>Y</td> <td>Y</td></tr> <tr><td>statefulset</td> <td></td> <td></td> <td>Y</td> <td>Y</td></tr></tbody></table> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># kubectl rollout</span>
<span class="token comment"># 支持的资源：deployments、daemonsets、statefulsets</span>

Available Commands:
  <span class="token function">history</span>     View rollout <span class="token function">history</span>
  pause       Mark the provided resource as paused
  restart     Restart a resource
  resume      Resume a paused resource
  status      Show the status of the rollout
  undo        Undo a previous rollout

<span class="token comment"># history 查看部署版本编号 REVISION 及版本变更缘由 CHANGE-CAUSE</span>

<span class="token comment"># history 子命令回显的 CHANGE-CAUSE</span>
<span class="token comment"># CHANGE-CAUSE 默认为空。从 Deployment 的 kubernetes.io/change-cause 注解复制过来的。 复制动作发生在修订版本创建时。</span>
<span class="token comment"># 你可以通过 以下方式设置 CHANGE-CAUSE 消息：</span>
<span class="token comment"># - 使用 kubectl annotate deployment.v1.apps/nginx-deployment kubernetes.io/change-cause=&quot;XXX&quot; 为 Deployment 添加注解。</span>
<span class="token comment"># - 使用 kubectl 变更 deployment 时，添加 --record 参数。</span>
<span class="token comment"># - 手动编辑资源的 manifest（清单）。</span>

<span class="token comment"># View the rollout history of a deployment</span>
kubectl rollout <span class="token function">history</span> deployment/abc

<span class="token comment"># View the details of daemonset revision 3</span>
kubectl rollout <span class="token function">history</span> daemonset/abc --revision<span class="token operator">=</span><span class="token number">3</span>

<span class="token comment"># pause 暂停当前的重新部署或回滚操作</span>

<span class="token comment"># Mark the nginx deployment as paused</span>
<span class="token comment"># Any current state of the deployment will continue its function; new updates</span>
<span class="token comment"># to the deployment will not have an effect as long as the deployment is paused</span>
kubectl rollout pause deployment/nginx

<span class="token comment"># resume 恢复暂停的部署或回滚操作</span>

<span class="token comment"># Resume an already paused deployment</span>
kubectl rollout resume deployment/nginx

<span class="token comment"># restart 重新执行回滚操</span>

<span class="token comment"># Restart a deployment</span>
kubectl rollout restart deployment/nginx

<span class="token comment"># Restart a daemon set</span>
kubectl rollout restart daemonset/abc

<span class="token comment"># status 占用一个终端，持续监控回滚状态直到回滚完成。--revision=N 指定版本号</span>

<span class="token comment"># Watch the rollout status of a deployment</span>
kubectl rollout status deployment/nginx

<span class="token comment"># undo 回滚部署，默认为上一个版本。--to-revision=N 指定版本</span>

<span class="token comment"># Roll back to the previous deployment</span>
kubectl rollout undo deployment/abc

<span class="token comment"># Roll back to daemonset revision 3</span>
kubectl rollout undo daemonset/abc --to-revision<span class="token operator">=</span><span class="token number">3</span>

<span class="token comment"># Roll back to the previous deployment with dry-run</span>
kubectl rollout undo --dry-run<span class="token operator">=</span>server deployment/abc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># Edit a resource from the default editor.</span>
<span class="token comment"># edit 命令使您可以直接编辑可通过命令行工具检索的任何 API 资源。 它将打开由 KUBE_EDITOR 或 EDITOR 环境变量定义的编辑器，</span>
<span class="token comment"># 或者对于 Linux 退回到&quot;vi&quot;，对于 Windows 退回到&quot;notepad&quot;。 您可以编辑多个对象，尽管一次只能应用一个更改</span>

<span class="token comment"># Edit the service named 'docker-registry'</span>
kubectl edit svc/docker-registry

<span class="token comment"># Use an alternative editor</span>
<span class="token assign-left variable">KUBE_EDITOR</span><span class="token operator">=</span><span class="token string">&quot;nano&quot;</span> kubectl edit svc/docker-registry

<span class="token comment"># Edit the job 'myjob' in JSON using the v1 API format</span>
kubectl edit job.v1.batch/myjob -o json

<span class="token comment"># Edit the deployment 'mydeployment' in YAML and save the modified config in its annotation</span>
kubectl edit deployment/mydeployment -o yaml --save-config
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 通过文本文件或标准命令行特换已经存在的资源</span>
<span class="token comment"># Replace a pod using the data in pod.json</span>
kubectl replace -f ./pod.json

<span class="token comment"># Replace a pod based on the JSON passed into stdin</span>
<span class="token function">cat</span> pod.json <span class="token operator">|</span> kubectl replace -f -

<span class="token comment"># Update a single-container pod's image version (tag) to v4</span>
kubectl get pod mypod -o yaml <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/\(image: myimage\):.*$/\1:v4/'</span> <span class="token operator">|</span> kubectl replace -f -

kubectl get cm configmap-log4j2-01 -o yaml <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/&lt;Root level=\&quot;info\&quot;/&lt;Root level=\&quot;trace\&quot;/'</span> <span class="token operator">|</span> kubectl replace -f -


<span class="token comment"># Force replace, delete and then re-create the resource</span>
kubectl replace --force -f ./pod.json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="patching-resources"><a href="#patching-resources" class="header-anchor">#</a> Patching resources</h3> <ul><li><a href="https://stackoverflow.com/questions/55744582/how-to-update-secret-with-kubectl-patch-type-json" target="_blank" rel="noopener noreferrer">How to update secret with &quot;kubectl patch --type='json'&quot;<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://erosb.github.io/post/json-patch-vs-merge-patch/" target="_blank" rel="noopener noreferrer">JSON Patch and JSON Merge Patch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://datatracker.ietf.org/doc/html/rfc6902" target="_blank" rel="noopener noreferrer">RFC 6902 (JSON Patch)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://datatracker.ietf.org/doc/html/rfc7386" target="_blank" rel="noopener noreferrer">RFC 7396 (JSON Merge Patch)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://kubernetes.io/docs/tasks/manage-kubernetes-objects/update-api-object-kubectl-patch/#use-a-json-merge-patch-to-update-a-deployment" target="_blank" rel="noopener noreferrer">Use a JSON merge patch to update a Deployment<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 使用 JSON 补丁更新资源的字段。</span>
<span class="token comment"># Update fields of a resource using strategic merge patch, a JSON merge patch, or a JSON patch.</span>
<span class="token comment"># JSON and YAML formats are accepted.</span>

<span class="token comment"># Partially update a node using a strategic merge patch, specifying the patch as JSON</span>
kubectl patch node k8s-node-1 -p <span class="token string">'{&quot;spec&quot;:{&quot;unschedulable&quot;:true}}'</span>

<span class="token comment"># Partially update a node using a strategic merge patch, specifying the patch as YAML</span>
kubectl patch node k8s-node-1 -p <span class="token string">$'spec:<span class="token entity" title="\n">\n</span> unschedulable: true'</span>

<span class="token comment"># Partially update a node identified by the type and name specified in &quot;node.json&quot; using strategic merge patch</span>
kubectl patch -f node.json -p <span class="token string">'{&quot;spec&quot;:{&quot;unschedulable&quot;:true}}'</span>

<span class="token comment"># Update a container's image; spec.containers[*].name is required because it</span><span class="token string">'s a merge key
kubectl patch pod valid-pod -p '</span><span class="token punctuation">{</span><span class="token string">&quot;spec&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;containers&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;kubernetes-serve-hostname&quot;</span>,<span class="token string">&quot;image&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;new image&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token string">'

# Update a container'</span>s image using a JSON patch with positional arrays
kubectl patch pod valid-pod --type<span class="token operator">=</span><span class="token string">'json'</span> -p<span class="token operator">=</span><span class="token string">'[{&quot;op&quot;: &quot;replace&quot;, &quot;path&quot;: &quot;/spec/containers/0/image&quot;, &quot;value&quot;:&quot;newimage&quot;}]'</span>

kubectl patch deployment deployment-demo --type<span class="token operator">=</span><span class="token string">'json'</span> -p<span class="token operator">=</span><span class="token string">'[{&quot;op&quot;: &quot;replace&quot;, &quot;path&quot;: &quot;/spec/replicas&quot;, &quot;value&quot;:8}]'</span>
kubectl patch deployment deployment-demo --type<span class="token operator">=</span><span class="token string">'json'</span> -p<span class="token operator">=</span><span class="token string">'[{&quot;op&quot;: &quot;replace&quot;, &quot;path&quot;: &quot;/spec/template/spec/containers/0/image&quot;, &quot;value&quot;:&quot;http&quot;}]'</span>
kubectl patch secret <span class="token builtin class-name">test</span> --type<span class="token operator">=</span><span class="token string">'json'</span> -p<span class="token operator">=</span><span class="token string">'[{&quot;op&quot; : &quot;replace&quot; ,&quot;path&quot; : &quot;/data/username&quot; ,&quot;value&quot; : &quot;dGVzdHVzZXIy&quot;}]'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="scaling-resources"><a href="#scaling-resources" class="header-anchor">#</a> Scaling resources</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 对 指 定 的 deployments 、 replicasets 、 replicationcontrollers 、 statefulsets 副 本 数 量 进 行 缩 放 。 如 果 指 定 了 --current-replicas 或</span>
<span class="token comment"># --resource-version 则会在尝试缩放之前对其进行验证，并保证在将缩放发送到服务器时前提条件为 true</span>

<span class="token comment"># Scale a replica set named 'foo' to 3</span>
kubectl scale --replicas<span class="token operator">=</span><span class="token number">3</span> rs/foo

<span class="token comment"># Scale a resource identified by type and name specified in &quot;foo.yaml&quot; to 3</span>
kubectl scale --replicas<span class="token operator">=</span><span class="token number">3</span> -f foo.yaml

<span class="token comment"># If the deployment named mysql's current size is 2, scale mysql to 3</span>
kubectl scale --current-replicas<span class="token operator">=</span><span class="token number">2</span> --replicas<span class="token operator">=</span><span class="token number">3</span> deployment/mysql

<span class="token comment"># Scale multiple replication controllers</span>
kubectl scale --replicas<span class="token operator">=</span><span class="token number">5</span> rc/foo rc/bar rc/baz

<span class="token comment"># Scale stateful set named 'web' to 3</span>
kubectl scale --replicas<span class="token operator">=</span><span class="token number">3</span> statefulset/web
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 使用 metric-server 对指定的 deployments、replicasets、replicationcontrollers、statefulsets 的 cpu-percent 进行监控，自动缩放 pod 副本的数量</span>
<span class="token comment"># Auto scale a deployment &quot;foo&quot;, with the number of pods between 2 and 10, no target CPU utilization specified</span>
<span class="token comment"># so a default autoscaling policy will be used</span>
kubectl autoscale deployment foo --min<span class="token operator">=</span><span class="token number">2</span> --max<span class="token operator">=</span><span class="token number">10</span>

<span class="token comment"># Auto scale a replication controller &quot;foo&quot;, with the number of pods between 1 and 5, target CPU utilization at 80%</span>
kubectl autoscale rc foo --max<span class="token operator">=</span><span class="token number">5</span> --cpu-percent<span class="token operator">=</span><span class="token number">80</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="deleting-resources"><a href="#deleting-resources" class="header-anchor">#</a> Deleting resources</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># Delete resources by file names, stdin, resources and names, or by resources and label selector.</span>
<span class="token comment"># 按照资源名称或标签选择器检索使用文本或命令行的方式删除资源</span>

<span class="token comment"># 指定优雅终止资源时等待的时间，单位为秒。pod 优雅终止时间默认为 30 秒。设置为 0 配合--force 强制立刻删除资。</span>
--grace-period<span class="token operator">=</span>N

<span class="token comment"># 立刻删除资源等同于--grace-period=1</span>
--now

<span class="token comment"># Delete a pod using the type and name specified in pod.json</span>
kubectl delete -f ./pod.json

<span class="token comment"># Delete resources from a directory containing kustomization.yaml - e.g. dir/kustomization.yaml</span>
kubectl delete -k <span class="token function">dir</span>

<span class="token comment"># Delete a pod based on the type and name in the JSON passed into stdin</span>
<span class="token function">cat</span> pod.json <span class="token operator">|</span> kubectl delete -f -

<span class="token comment"># Delete pods and services with same names &quot;baz&quot; and &quot;foo&quot;</span>
kubectl delete pod,service baz foo

<span class="token comment"># Delete pods and services with label name=myLabel</span>
kubectl delete pods,services -l <span class="token assign-left variable">name</span><span class="token operator">=</span>myLabel

<span class="token comment"># Delete a pod with minimal delay</span>
kubectl delete pod foo --now

<span class="token comment"># Force delete a pod on a dead node</span>
kubectl delete pod foo --force

<span class="token comment"># Delete all pods</span>
kubectl delete pods --all

kubectl delete pod --all --now
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="debugging-resources"><a href="#debugging-resources" class="header-anchor">#</a> Debugging resources</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 创建调试会话以对工作负载和节点进行故障排除，默认资源类型为 pod。</span>
<span class="token comment"># 调试”采取的操作因指定的资源而异。支持的行动包括：</span>
<span class="token comment"># *工作负载：创建现有 pod 的副本，并更改某些属性，例如将图像标记更改为新版本。</span>
<span class="token comment"># *工作负载：向已经运行的 pod 添加临时容器，例如，在不重新启动 pod 的情况下添加调试实用程序。</span>
<span class="token comment"># *节点：创建一个新的 pod，该 pod 在节点的主机名称空间中运行，并且可以访问节点的文件系统。</span>

<span class="token comment"># Create an interactive debugging session in pod mypod and immediately attach to it.</span>
<span class="token comment"># (requires the EphemeralContainers feature to be enabled in the cluster)</span>
kubectl debug mypod -it --image<span class="token operator">=</span>busybox

<span class="token comment"># Create a debug container named debugger using a custom automated debugging image.</span>
<span class="token comment"># (requires the EphemeralContainers feature to be enabled in the cluster)</span>
kubectl debug --image<span class="token operator">=</span>myproj/debug-tools -c debugger mypod

<span class="token comment"># Create a copy of mypod adding a debug container and attach to it</span>
kubectl debug mypod -it --image<span class="token operator">=</span>busybox --copy-to<span class="token operator">=</span>my-debugger

<span class="token comment"># Create a copy of mypod changing the command of mycontainer</span>
kubectl debug mypod -it --copy-to<span class="token operator">=</span>my-debugger --container<span class="token operator">=</span>mycontainer -- <span class="token function">sh</span>

<span class="token comment"># Create a copy of mypod changing all container images to busybox</span>
kubectl debug mypod --copy-to<span class="token operator">=</span>my-debugger --set-image<span class="token operator">=</span>*<span class="token operator">=</span>busybox

<span class="token comment"># Create a copy of mypod adding a debug container and changing container images</span>
kubectl debug mypod -it --copy-to<span class="token operator">=</span>my-debugger --image<span class="token operator">=</span>debian --set-image<span class="token operator">=</span>app<span class="token operator">=</span>app:debug,sidecar<span class="token operator">=</span>sidecar:debug

<span class="token comment"># Create an interactive debugging session on a node and immediately attach to it.</span>
<span class="token comment"># The container will run in the host namespaces and the host's filesystem will be mounted at /host</span>
kubectl debug node/mynode -it --image<span class="token operator">=</span>busybox

<span class="token comment"># 在 node1 节点上使用&quot;hostIPC: true&quot;，&quot;hostNetwork: true&quot;，&quot;hostPID: true&quot;，&quot;restartPolicy: Never&quot;启用 debugger 容器，并以 rw 挂载 节点的&quot;/&quot;文件系统到 centos 容器中的/host 文件夹。</span>
kubectl debug node/mynode -it --image<span class="token operator">=</span>centos

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 转发 kube-apiserver 到本地的指定地址和端口默认为 127.0.0.1:8001，通过 curl 获取集群资源信息。</span>
<span class="token comment"># --address='' 指定转发到本机的 ip 地址，默认为 127.0.0.1 -p, --port= 指定转发到本机的端口默认为 8001, 0 为随机端口。</span>
<span class="token comment"># --accept-hosts='' 使用正则表达式指定允许访问转发的主机，默认为 localhost，'^*$'为放行所有主机。</span>

kubectl proxy <span class="token number">0</span> --address<span class="token operator">=</span><span class="token number">0.0</span>.0.0 --accept-hosts<span class="token operator">=</span><span class="token string">'^*$'</span>
kubectl proxy <span class="token number">9999</span>
kubectl proxy

<span class="token comment"># To proxy all of the Kubernetes API and nothing else</span>
kubectl proxy --api-prefix<span class="token operator">=</span>/

<span class="token comment"># To proxy only part of the Kubernetes API and also some static files</span>
<span class="token comment"># You can get pods info with 'curl localhost:8001/api/v1/pods'</span>
kubectl proxy --www<span class="token operator">=</span>/my/files --www-prefix<span class="token operator">=</span>/static/ --api-prefix<span class="token operator">=</span>/api/

<span class="token comment"># To proxy the entire Kubernetes API at a different root</span>
<span class="token comment"># You can get pods info with 'curl localhost:8001/custom/api/v1/pods'</span>
kubectl proxy --api-prefix<span class="token operator">=</span>/custom/

<span class="token comment"># Run a proxy to the Kubernetes API server on port 8011, serving static content from ./local/www/</span>
kubectl proxy --port<span class="token operator">=</span><span class="token number">8011</span> --www<span class="token operator">=</span>./local/www/

<span class="token comment"># Run a proxy to the Kubernetes API server on an arbitrary local port</span>
<span class="token comment"># The chosen port for the server will be output to stdout</span>
<span class="token comment"># The port on which to run the proxy. Set to 0 to pick a random port.</span>
kubectl proxy --port<span class="token operator">=</span><span class="token number">0</span>

<span class="token comment"># Run a proxy to the Kubernetes API server, changing the API prefix to k8s-api</span>
<span class="token comment"># This makes e.g. the pods API available at localhost:8001/k8s-api/v1/pods/</span>
kubectl proxy --api-prefix<span class="token operator">=</span>/k8s-api
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="labeling-resources"><a href="#labeling-resources" class="header-anchor">#</a> Labeling resources</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 以 key=value 的格式，设置或更新资源的标签</span>

<span class="token comment"># 标签 key 和 value 必须以字母或数字开头，可以包含字母、数字、“-”、“.”和“_”，每个字符长度不超过 63 个字符。</span>
<span class="token comment"># key 可以以使用类似于 DNS 子域前缀和单个“/”开头，如 example.com/my-app.</span>
<span class="token comment"># 默认不允许修改现存标签的 value，使用--overwrite 覆盖现有标签的 value.</span>
<span class="token comment"># 使用--resource-version 设置资源的某个版本的标签，否则为当前版本。</span>

<span class="token comment"># Update pod 'foo' with the label 'unhealthy' and the value 'true'</span>
kubectl label pods foo <span class="token assign-left variable">unhealthy</span><span class="token operator">=</span>true

<span class="token comment"># Update pod 'foo' with the label 'status' and the value 'unhealthy', overwriting any existing value</span>
kubectl label --overwrite pods foo <span class="token assign-left variable">status</span><span class="token operator">=</span>unhealthy

<span class="token comment"># Update all pods in the namespace</span>
kubectl label pods --all <span class="token assign-left variable">status</span><span class="token operator">=</span>unhealthy

<span class="token comment"># Update a pod identified by the type and name in &quot;pod.json&quot;</span>
kubectl label -f pod.json <span class="token assign-left variable">status</span><span class="token operator">=</span>unhealthy

<span class="token comment"># Update pod 'foo' only if the resource is unchanged from version 1</span>
kubectl label pods foo <span class="token assign-left variable">status</span><span class="token operator">=</span>unhealthy --resource-version<span class="token operator">=</span><span class="token number">1</span>

<span class="token comment"># Update pod 'foo' by removing a label named 'bar' if it exists</span>
<span class="token comment"># Does not require the --overwrite flag</span>
<span class="token comment"># 删除 label</span>
kubectl label pods foo bar-
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="annotating-resources"><a href="#annotating-resources" class="header-anchor">#</a> Annotating resources</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 更新或设置一个或多个资源的注释</span>

<span class="token comment"># 1. 所有 Kubernetes 对象都支持将附加数据作为注释与对象一起存储。注释是权重大于标签的键/值对，并且包含任意字符串值，如结构化 JSON。可以</span>
<span class="token comment"># 可以使用注释来所有 Kubernetes 对象都支持将附加数据作为注释与对象一起存储。注释是可以大于标签的键/值对，并且包含任意字符串值，可以</span>
<span class="token comment"># 使用注释实现 Kubernetes 处于 beta 阶段的功能扩展。</span>
<span class="token comment"># 2. 默认不允许修改现存注释的 value，使用--overwrite 覆盖现有注释的 value.</span>
<span class="token comment"># 3. 使用--resource-version 设置资源的某个版本的注释，否则为当前版本</span>

<span class="token comment"># Update pod 'foo' with the annotation 'description' and the value 'my frontend'</span>
<span class="token comment"># If the same annotation is set multiple times, only the last value will be applied</span>
kubectl annotate pods foo <span class="token assign-left variable">description</span><span class="token operator">=</span><span class="token string">'my frontend'</span>

<span class="token comment"># Update a pod identified by type and name in &quot;pod.json&quot;</span>
kubectl annotate -f pod.json <span class="token assign-left variable">description</span><span class="token operator">=</span><span class="token string">'my frontend'</span>

<span class="token comment"># Update pod 'foo' with the annotation 'description' and the value 'my frontend running nginx', overwriting any existing value</span>
kubectl annotate --overwrite pods foo <span class="token assign-left variable">description</span><span class="token operator">=</span><span class="token string">'my frontend running nginx'</span>

<span class="token comment"># Update all pods in the namespace</span>
kubectl annotate pods --all <span class="token assign-left variable">description</span><span class="token operator">=</span><span class="token string">'my frontend running nginx'</span>

<span class="token comment"># Update pod 'foo' only if the resource is unchanged from version 1</span>
kubectl annotate pods foo <span class="token assign-left variable">description</span><span class="token operator">=</span><span class="token string">'my frontend running nginx'</span> --resource-version<span class="token operator">=</span><span class="token number">1</span>

<span class="token comment"># Update pod 'foo' by removing an annotation named 'description' if it exists</span>
<span class="token comment"># Does not require the --overwrite flag</span>
kubectl annotate pods foo description-
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="operational-commands"><a href="#operational-commands" class="header-anchor">#</a> Operational commands</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 在指定容器中执行命</span>

<span class="token comment"># -c, --container='' 指定 pod 中容器的名字，默认为 pod 中的第一个容器。</span>
<span class="token comment"># -it: 配合 -- bash | sh 进入容器内部以交互式方式执行命令</span>

<span class="token comment"># Get output from running the 'date' command from pod mypod, using the first container by default</span>
kubectl <span class="token builtin class-name">exec</span> mypod -- <span class="token function">date</span>

kubectl <span class="token builtin class-name">exec</span> mypod -- <span class="token function">printenv</span>

<span class="token comment"># Get output from running the 'date' command in ruby-container from pod mypod</span>
<span class="token comment"># check container name via 'kubectl describe' command</span>
kubectl <span class="token builtin class-name">exec</span> mypod -c ruby-container -- <span class="token function">date</span>

<span class="token comment"># Switch to raw terminal mode; sends stdin to 'bash' in ruby-container from pod mypod</span>
<span class="token comment"># and sends stdout/stderr from 'bash' back to the client</span>
kubectl <span class="token builtin class-name">exec</span> mypod -c ruby-container -i -t -- <span class="token function">bash</span> -il

<span class="token comment"># List contents of /usr from the first container of pod mypod and sort by modification time</span>
<span class="token comment"># If the command you want to execute in the pod has any flags in common (e.g. -i),</span>
<span class="token comment"># you must use two dashes (--) to separate your command's flags/arguments</span>
<span class="token comment"># Also note, do not surround your command and its flags/arguments with quotes</span>
<span class="token comment"># unless that is how you would execute it normally (i.e., do ls -t /usr, not &quot;ls -t /usr&quot;)</span>
kubectl <span class="token builtin class-name">exec</span> mypod -i -t -- <span class="token function">ls</span> -t /usr

<span class="token comment"># Get output from running 'date' command from the first pod of the deployment mydeployment, using the first container by default</span>
kubectl <span class="token builtin class-name">exec</span> deploy/mydeployment -- <span class="token function">date</span>

<span class="token comment"># Get output from running 'date' command from the first pod of the service myservice, using the first container by default</span>
kubectl <span class="token builtin class-name">exec</span> svc/myservice -- <span class="token function">date</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 在本地文件系统和容器内部拷贝文件。</span>
<span class="token comment">### 依赖容器内 tar 命令，如果容器内没有 tar 命令，kubectl cp 将会失败 ###</span>

<span class="token comment"># Copy /tmp/foo local file to /tmp/bar in a remote pod in namespace &lt;some-namespace&gt;</span>
<span class="token function">tar</span> cf - /tmp/foo <span class="token operator">|</span> kubectl <span class="token builtin class-name">exec</span> -i -n <span class="token operator">&lt;</span>some-namespace<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>some-pod<span class="token operator">&gt;</span> -- <span class="token function">tar</span> xf - -C /tmp/bar

<span class="token comment"># Copy /tmp/foo from a remote pod to /tmp/bar locally</span>
kubectl <span class="token builtin class-name">exec</span> -n <span class="token operator">&lt;</span>some-namespace<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>some-pod<span class="token operator">&gt;</span> -- <span class="token function">tar</span> cf - /tmp/foo <span class="token operator">|</span> <span class="token function">tar</span> xf - -C /tmp/bar

<span class="token comment"># Copy /tmp/foo_dir local directory to /tmp/bar_dir in a remote pod in the default namespace</span>
kubectl <span class="token function">cp</span> /tmp/foo_dir <span class="token operator">&lt;</span>some-pod<span class="token operator">&gt;</span>:/tmp/bar_dir

<span class="token comment"># Copy /tmp/foo local file to /tmp/bar in a remote pod in a specific container</span>
kubectl <span class="token function">cp</span> /tmp/foo <span class="token operator">&lt;</span>some-pod<span class="token operator">&gt;</span>:/tmp/bar -c <span class="token operator">&lt;</span>specific-container<span class="token operator">&gt;</span>

<span class="token comment"># Copy /tmp/foo local file to /tmp/bar in a remote pod in namespace &lt;some-namespace&gt;</span>
kubectl <span class="token function">cp</span> /tmp/foo <span class="token operator">&lt;</span>some-namespace<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>some-pod<span class="token operator">&gt;</span>:/tmp/bar

<span class="token comment"># Copy /tmp/foo from a remote pod to /tmp/bar locally</span>
kubectl <span class="token function">cp</span> <span class="token operator">&lt;</span>some-namespace<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>some-pod<span class="token operator">&gt;</span>:/tmp/foo /tmp/bar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 打印 pod 中指定 container 的日志信息，默认为 pod 中第一个 container 的日志。</span>
<span class="token comment"># Print the logs for a container in a pod or specified resource. If the pod has only one container, the container name is optional.</span>

<span class="token comment"># 打印指定 pod 中所有容器的日志。</span>
--all-containers

<span class="token comment"># 打印指定容器的日志，默认为 pod 中第一个容器。</span>
-c, --container<span class="token operator">=</span>

<span class="token comment"># 打印指定标签的容器的日志。</span>
-l, --selector<span class="token operator">=</span><span class="token string">''</span>

<span class="token comment"># 以流式方式滚动打印日志。</span>
-f, --follow

<span class="token comment"># 仅打印最后 N 行日志</span>
--tail<span class="token operator">=</span>N

<span class="token comment"># Return snapshot logs from pod nginx with only one container</span>
kubectl logs nginx

<span class="token comment"># Return snapshot logs from pod nginx with multi containers</span>
kubectl logs nginx --all-containers<span class="token operator">=</span>true

<span class="token comment"># Return snapshot logs from all containers in pods defined by label app=nginx</span>
kubectl logs -l <span class="token assign-left variable">app</span><span class="token operator">=</span>nginx --all-containers<span class="token operator">=</span>true

<span class="token comment"># Return snapshot of previous terminated ruby container logs from pod web-1</span>
kubectl logs -p -c ruby web-1

<span class="token comment"># Begin streaming the logs of the ruby container in pod web-1</span>
kubectl logs -f -c ruby web-1

<span class="token comment"># Begin streaming the logs from all containers in pods defined by label app=nginx</span>
kubectl logs -f -l <span class="token assign-left variable">app</span><span class="token operator">=</span>nginx --all-containers<span class="token operator">=</span>true

<span class="token comment"># Display only the most recent 20 lines of output in pod nginx</span>
kubectl logs --tail<span class="token operator">=</span><span class="token number">20</span> nginx

<span class="token comment"># Show all logs from pod nginx written in the last hour</span>
kubectl logs --since<span class="token operator">=</span>1h nginx

<span class="token comment"># Show logs from a kubelet with an expired serving certificate</span>
kubectl logs --insecure-skip-tls-verify-backend nginx

<span class="token comment"># Return snapshot logs from first container of a job named hello</span>
kubectl logs job/hello

<span class="token comment"># Return snapshot logs from container nginx-1 of a deployment named nginx</span>
kubectl logs deployment/nginx -c nginx-1

<span class="token comment"># ----previous If true, print the logs for the previous instance of the container in a pod if it exists.</span>
kubectl logs pod-name --previous
kubectl logs pod-name --previous -c container-name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><h3 id="build-and-deploy"><a href="#build-and-deploy" class="header-anchor">#</a> Build and deploy</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 将本地的一个或多个端口转发到 pod localport:Podport，会持续占用一个终端。 支持的资源:pod、deploy、service</span>
<span class="token comment"># Usage:</span>
kubectl port-forward TYPE/NAME <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>LOCAL_PORT:<span class="token punctuation">]</span>REMOTE_PORT <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">[</span>LOCAL_PORT_N:<span class="token punctuation">]</span>REMOTE_PORT_N<span class="token punctuation">]</span>

<span class="token comment"># Listen on ports 5000 and 6000 locally, forwarding data to/from ports 5000 and 6000 in the pod</span>
<span class="token comment"># 将本地的 5000 和 6000 端口转发到 pod 的 5000 和 6000 端口</span>
kubectl port-forward pod/mypod <span class="token number">5000</span> <span class="token number">6000</span>

<span class="token comment"># Listen on ports 5000 and 6000 locally, forwarding data to/from ports 5000 and 6000 in a pod selected by the deployment</span>
kubectl port-forward deployment/mydeployment <span class="token number">5000</span> <span class="token number">6000</span>

<span class="token comment"># Listen on port 8443 locally, forwarding to the targetPort of the service's port named &quot;https&quot; in a pod selected by the service</span>
kubectl port-forward service/myservice <span class="token number">8443</span>:https

<span class="token comment"># Listen on port 8888 locally, forwarding to 5000 in the pod</span>
kubectl port-forward pod/mypod <span class="token number">8888</span>:5000

<span class="token comment"># Listen on port 8888 on all addresses, forwarding to 5000 in the pod</span>
kubectl port-forward --address <span class="token number">0.0</span>.0.0 pod/mypod <span class="token number">8888</span>:5000

<span class="token comment"># Listen on port 8888 on localhost and selected IP, forwarding to 5000 in the pod</span>
kubectl port-forward --address localhost,10.19.21.23 pod/mypod <span class="token number">8888</span>:5000

<span class="token comment"># Listen on a random port locally, forwarding to 5000 in the pod</span>
kubectl port-forward pod/mypod :5000

kubectl port-forward --address <span class="token number">0.0</span>.0.0 svc/nexus3 <span class="token number">8081</span>:80 -n tools
<span class="token comment"># to perform `kubectl port-forward` in background, can append the command `&amp;`</span>
kubectl port-forward --address <span class="token number">0.0</span>.0.0 svc/nexus3 <span class="token number">8081</span>:80 -n tools <span class="token operator">&amp;</span>

<span class="token assign-left variable">tunnel</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> port-forward <span class="token operator">|</span> <span class="token function">grep</span> nexus3 <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $2}'</span><span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> <span class="token variable">$tunnel</span>
<span class="token function">kill</span> <span class="token variable">$tunnel</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 给已经存在的 pod (po), service (svc), replicationcontroller (rc), deployment (deploy), replicaset (rs)资源创建或关联 service</span>
<span class="token comment"># Expose a resource as a new Kubernetes service.</span>

<span class="token comment"># Create a service for a replicated nginx, which serves on port 80 and connects to the containers on port 8000</span>
kubectl expose rc nginx --port<span class="token operator">=</span><span class="token number">80</span> --target-port<span class="token operator">=</span><span class="token number">8000</span>

<span class="token comment"># Create a service for a replication controller identified by type and name specified in &quot;nginx-controller.yaml&quot;, which serves on port 80 and connects to the containers on port 8000</span>
kubectl expose -f nginx-controller.yaml --port<span class="token operator">=</span><span class="token number">80</span> --target-port<span class="token operator">=</span><span class="token number">8000</span>

<span class="token comment"># Create a service for a pod valid-pod, which serves on port 444 with the name &quot;frontend&quot;</span>
kubectl expose pod valid-pod --port<span class="token operator">=</span><span class="token number">444</span> --name<span class="token operator">=</span>frontend

<span class="token comment"># Create a second service based on the above service, exposing the container port 8443 as port 443 with the name &quot;nginx-https&quot;</span>
kubectl expose <span class="token function">service</span> nginx --port<span class="token operator">=</span><span class="token number">443</span> --target-port<span class="token operator">=</span><span class="token number">8443</span> --name<span class="token operator">=</span>nginx-https

<span class="token comment"># Create a service for a replicated streaming application on port 4100 balancing UDP traffic and named 'video-stream'.</span>
kubectl expose rc streamer --port<span class="token operator">=</span><span class="token number">4100</span> --protocol<span class="token operator">=</span>UDP --name<span class="token operator">=</span>video-stream

<span class="token comment"># Create a service for a replicated nginx using replica set, which serves on port 80 and connects to the containers on port 8000</span>
kubectl expose rs nginx --port<span class="token operator">=</span><span class="token number">80</span> --target-port<span class="token operator">=</span><span class="token number">8000</span>

<span class="token comment"># Create a service for an nginx deployment, which serves on port 80 and connects to the containers on port 8000</span>
kubectl expose deployment nginx --port<span class="token operator">=</span><span class="token number">80</span> --target-port<span class="token operator">=</span><span class="token number">8000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="other-commands"><a href="#other-commands" class="header-anchor">#</a> Other Commands</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 以&quot;group/version&quot;的格式，打印当前服务端支持的 api 版本。</span>
kubectl api-versions
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 列出集群支持 API 资源，NAME 资源名称、SHORTNAMES 简名、APIVERSION 版本号、NAMESPACED 是否为名称空间资源以及类型 Kind</span>
<span class="token comment"># Print the supported API resources on the server.</span>
kubectl api-resources

kubectl api-resources<span class="token operator">|</span> <span class="token function">head</span> -4
NAME                              SHORTNAMES   APIVERSION                             NAMESPACED   KIND
bindings                                       v1                                     <span class="token boolean">true</span>         Binding
componentstatuses                 cs           v1                                     <span class="token boolean">false</span>        ComponentStatus
configmaps                        cm           v1                                     <span class="token boolean">true</span>         ConfigMap

<span class="token comment"># Print the supported API resources with more information</span>
kubectl api-resources -o wide

<span class="token comment"># Print the supported API resources sorted by a column</span>
kubectl api-resources --sort-by<span class="token operator">=</span>name

<span class="token comment"># 大多数 kubernetes 资源（例如 Pod、Service、副本控制器等）都位于某些名字空间中。 但是名字空间资源本身并不在名字空间中。而是底层资源，</span>
<span class="token comment"># 例如节点和持久化卷不属于任何名字空间。</span>
<span class="token comment"># Print the supported namespaced resources</span>
kubectl api-resources --namespaced<span class="token operator">=</span>true

<span class="token comment"># Print the supported non-namespaced resources</span>
kubectl api-resources --namespaced<span class="token operator">=</span>false

<span class="token comment"># Print the supported API resources with a specific APIGroup</span>
kubectl api-resources --api-group<span class="token operator">=</span>extensions
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=Cloud" title="标签">#Cloud</a><a href="/tags/?tag=Kubernetes" title="标签">#Kubernetes</a><a href="/tags/?tag=k8s" title="标签">#k8s</a><a href="/tags/?tag=Common%20Command" title="标签">#Common Command</a></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/8/2023, 10:37:57 PM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/8bc4c6/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Kubernetes/k8s</div></a> <a href="/pages/c83125/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">How to set multiple commands in one yaml file with k8s</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/8bc4c6/" class="prev">Kubernetes/k8s</a></span> <span class="next"><a href="/pages/c83125/">How to set multiple commands in one yaml file with k8s</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/5a9395/"><div>
            Ehcache3 Basic
            <!----></div></a> <span class="date">01-30</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/71d94f/"><div>
            Apache HTTP Client Basic
            <!----></div></a> <span class="date">01-21</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/4a2fe4/"><div>
            Oracle Index
            <!----></div></a> <span class="date">12-27</span></dt></dl> <dl><dd></dd> <dt><a href="/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/dlwxin/wx-notes" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="mailto:dlwxin@outlook.com" title="Email" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2024
    <span>wx | <a href="https://beian.miit.gov.cn" target="_blank">黑ICP备2022000430号</a> | <img src="https://dlwang.xin:11796/image/others/record_icon.png"/><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=23128302000114" target="_blank">黑公网安备 23128302000114号</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d382a226.js" defer></script><script src="/assets/js/2.87a8012a.js" defer></script><script src="/assets/js/194.86983a62.js" defer></script>
  </body>
</html>
