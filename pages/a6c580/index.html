<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL Basic | wx-notes</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/assets/img/favicon.png">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3129839_xft6cqs5gc.css">
    <noscript><meta http-equiv="refresh" content="0; url=https://github.com/xugaoyi/vuepress-theme-vdoing"><style>.theme-vdoing-content { display:none }</noscript>
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.9d774b0a.css" as="style"><link rel="preload" href="/assets/js/app.d382a226.js" as="script"><link rel="preload" href="/assets/js/2.87a8012a.js" as="script"><link rel="preload" href="/assets/js/68.9ff84d3d.js" as="script"><link rel="prefetch" href="/assets/js/10.8cef245d.js"><link rel="prefetch" href="/assets/js/100.de0de5b3.js"><link rel="prefetch" href="/assets/js/101.e32bb2b9.js"><link rel="prefetch" href="/assets/js/102.0ef9f132.js"><link rel="prefetch" href="/assets/js/103.1914eb13.js"><link rel="prefetch" href="/assets/js/104.b12325e1.js"><link rel="prefetch" href="/assets/js/105.4f29b02d.js"><link rel="prefetch" href="/assets/js/106.902b14af.js"><link rel="prefetch" href="/assets/js/107.34461d9b.js"><link rel="prefetch" href="/assets/js/108.720097f0.js"><link rel="prefetch" href="/assets/js/109.ec66db5b.js"><link rel="prefetch" href="/assets/js/11.06117714.js"><link rel="prefetch" href="/assets/js/110.f767f523.js"><link rel="prefetch" href="/assets/js/111.bcfbfa02.js"><link rel="prefetch" href="/assets/js/112.d8df71d9.js"><link rel="prefetch" href="/assets/js/113.c9a6c922.js"><link rel="prefetch" href="/assets/js/114.3d85868d.js"><link rel="prefetch" href="/assets/js/115.993787ed.js"><link rel="prefetch" href="/assets/js/116.5bd70a45.js"><link rel="prefetch" href="/assets/js/117.7c5ea865.js"><link rel="prefetch" href="/assets/js/118.575c2813.js"><link rel="prefetch" href="/assets/js/119.eff9f6bc.js"><link rel="prefetch" href="/assets/js/12.801127a7.js"><link rel="prefetch" href="/assets/js/120.91de158c.js"><link rel="prefetch" href="/assets/js/121.860d400f.js"><link rel="prefetch" href="/assets/js/122.954d04cd.js"><link rel="prefetch" href="/assets/js/123.5b3e835d.js"><link rel="prefetch" href="/assets/js/124.ec79fba8.js"><link rel="prefetch" href="/assets/js/125.1bbba1d0.js"><link rel="prefetch" href="/assets/js/126.5e7fded7.js"><link rel="prefetch" href="/assets/js/127.e43dfbff.js"><link rel="prefetch" href="/assets/js/128.cef089b9.js"><link rel="prefetch" href="/assets/js/129.326be7ae.js"><link rel="prefetch" href="/assets/js/13.35b92c07.js"><link rel="prefetch" href="/assets/js/130.7cca68b6.js"><link rel="prefetch" href="/assets/js/131.c7695993.js"><link rel="prefetch" href="/assets/js/132.66f9eb75.js"><link rel="prefetch" href="/assets/js/133.499ff9d6.js"><link rel="prefetch" href="/assets/js/134.2f1548d7.js"><link rel="prefetch" href="/assets/js/135.a0e10d3e.js"><link rel="prefetch" href="/assets/js/136.92a270c5.js"><link rel="prefetch" href="/assets/js/137.5b0ac09e.js"><link rel="prefetch" href="/assets/js/138.21de847d.js"><link rel="prefetch" href="/assets/js/139.c058c237.js"><link rel="prefetch" href="/assets/js/14.91560b85.js"><link rel="prefetch" href="/assets/js/140.93275f57.js"><link rel="prefetch" href="/assets/js/141.6c6df578.js"><link rel="prefetch" href="/assets/js/142.16de5023.js"><link rel="prefetch" href="/assets/js/143.6e03e08c.js"><link rel="prefetch" href="/assets/js/144.592bb4ed.js"><link rel="prefetch" href="/assets/js/145.b7bdadcc.js"><link rel="prefetch" href="/assets/js/146.a18f49a0.js"><link rel="prefetch" href="/assets/js/147.dced2ea6.js"><link rel="prefetch" href="/assets/js/148.e06ea4d7.js"><link rel="prefetch" href="/assets/js/149.ac95d564.js"><link rel="prefetch" href="/assets/js/15.4606cb23.js"><link rel="prefetch" href="/assets/js/150.c9e28f94.js"><link rel="prefetch" href="/assets/js/151.a1997c81.js"><link rel="prefetch" href="/assets/js/152.3d479903.js"><link rel="prefetch" href="/assets/js/153.3073c76d.js"><link rel="prefetch" href="/assets/js/154.3bcbee0f.js"><link rel="prefetch" href="/assets/js/155.9dddaff4.js"><link rel="prefetch" href="/assets/js/156.f376855e.js"><link rel="prefetch" href="/assets/js/157.9eb774bc.js"><link rel="prefetch" href="/assets/js/158.44ee8e16.js"><link rel="prefetch" href="/assets/js/159.390af831.js"><link rel="prefetch" href="/assets/js/16.9bcf78d7.js"><link rel="prefetch" href="/assets/js/160.e9a320f2.js"><link rel="prefetch" href="/assets/js/161.2c70b400.js"><link rel="prefetch" href="/assets/js/162.363decbd.js"><link rel="prefetch" href="/assets/js/163.3ce1e512.js"><link rel="prefetch" href="/assets/js/164.e9313d92.js"><link rel="prefetch" href="/assets/js/165.1eb8d002.js"><link rel="prefetch" href="/assets/js/166.ab22eb15.js"><link rel="prefetch" href="/assets/js/167.b000f630.js"><link rel="prefetch" href="/assets/js/168.f25a631c.js"><link rel="prefetch" href="/assets/js/169.b7129356.js"><link rel="prefetch" href="/assets/js/17.0e700bd5.js"><link rel="prefetch" href="/assets/js/170.323672ca.js"><link rel="prefetch" href="/assets/js/171.49820adb.js"><link rel="prefetch" href="/assets/js/172.5367dfe3.js"><link rel="prefetch" href="/assets/js/173.87ce95d1.js"><link rel="prefetch" href="/assets/js/174.4733aac2.js"><link rel="prefetch" href="/assets/js/175.4c8b426b.js"><link rel="prefetch" href="/assets/js/176.34060d5c.js"><link rel="prefetch" href="/assets/js/177.d0404722.js"><link rel="prefetch" href="/assets/js/178.1a46b01f.js"><link rel="prefetch" href="/assets/js/179.9fcc84b5.js"><link rel="prefetch" href="/assets/js/18.d1fcff83.js"><link rel="prefetch" href="/assets/js/180.bdfedfa3.js"><link rel="prefetch" href="/assets/js/181.47e6d26e.js"><link rel="prefetch" href="/assets/js/182.2d878f03.js"><link rel="prefetch" href="/assets/js/183.7e9aace3.js"><link rel="prefetch" href="/assets/js/184.2eff2189.js"><link rel="prefetch" href="/assets/js/185.ba9aab94.js"><link rel="prefetch" href="/assets/js/186.93016b73.js"><link rel="prefetch" href="/assets/js/187.a617b993.js"><link rel="prefetch" href="/assets/js/188.2d5a02f4.js"><link rel="prefetch" href="/assets/js/189.939a191f.js"><link rel="prefetch" href="/assets/js/19.b636a521.js"><link rel="prefetch" href="/assets/js/190.bbbd77c8.js"><link rel="prefetch" href="/assets/js/191.3d110f91.js"><link rel="prefetch" href="/assets/js/192.61fab52d.js"><link rel="prefetch" href="/assets/js/193.07e8db8d.js"><link rel="prefetch" href="/assets/js/194.86983a62.js"><link rel="prefetch" href="/assets/js/195.ea852b80.js"><link rel="prefetch" href="/assets/js/196.f3f47585.js"><link rel="prefetch" href="/assets/js/197.67c354ba.js"><link rel="prefetch" href="/assets/js/198.561b321e.js"><link rel="prefetch" href="/assets/js/199.e25381a9.js"><link rel="prefetch" href="/assets/js/20.3be87fb7.js"><link rel="prefetch" href="/assets/js/200.010ba3c5.js"><link rel="prefetch" href="/assets/js/201.67ac619d.js"><link rel="prefetch" href="/assets/js/202.f09ce2ad.js"><link rel="prefetch" href="/assets/js/203.65d725b4.js"><link rel="prefetch" href="/assets/js/204.f3447d91.js"><link rel="prefetch" href="/assets/js/205.1f095751.js"><link rel="prefetch" href="/assets/js/206.d932f379.js"><link rel="prefetch" href="/assets/js/207.f1b07592.js"><link rel="prefetch" href="/assets/js/208.ae8c6256.js"><link rel="prefetch" href="/assets/js/209.35180e8c.js"><link rel="prefetch" href="/assets/js/21.49934eb6.js"><link rel="prefetch" href="/assets/js/210.2c20b67d.js"><link rel="prefetch" href="/assets/js/211.b6b9d090.js"><link rel="prefetch" href="/assets/js/212.9aabd8b9.js"><link rel="prefetch" href="/assets/js/213.af591f91.js"><link rel="prefetch" href="/assets/js/214.243220ba.js"><link rel="prefetch" href="/assets/js/215.91918129.js"><link rel="prefetch" href="/assets/js/216.d778718b.js"><link rel="prefetch" href="/assets/js/217.dac38162.js"><link rel="prefetch" href="/assets/js/218.3ad31069.js"><link rel="prefetch" href="/assets/js/219.9197a62a.js"><link rel="prefetch" href="/assets/js/22.a7d6a9eb.js"><link rel="prefetch" href="/assets/js/220.bbd7b124.js"><link rel="prefetch" href="/assets/js/221.0efe0337.js"><link rel="prefetch" href="/assets/js/222.700049fd.js"><link rel="prefetch" href="/assets/js/223.46405e41.js"><link rel="prefetch" href="/assets/js/224.6e350c81.js"><link rel="prefetch" href="/assets/js/225.1993613f.js"><link rel="prefetch" href="/assets/js/226.acb60b10.js"><link rel="prefetch" href="/assets/js/227.5c29d8d9.js"><link rel="prefetch" href="/assets/js/228.f2fa7cf9.js"><link rel="prefetch" href="/assets/js/229.ee960944.js"><link rel="prefetch" href="/assets/js/23.5400645b.js"><link rel="prefetch" href="/assets/js/230.068b06bc.js"><link rel="prefetch" href="/assets/js/231.34d85795.js"><link rel="prefetch" href="/assets/js/232.163f77c8.js"><link rel="prefetch" href="/assets/js/233.245df212.js"><link rel="prefetch" href="/assets/js/234.b889ca13.js"><link rel="prefetch" href="/assets/js/235.f8a222af.js"><link rel="prefetch" href="/assets/js/236.9741ba00.js"><link rel="prefetch" href="/assets/js/237.5cb51cf1.js"><link rel="prefetch" href="/assets/js/238.c7b8dbd4.js"><link rel="prefetch" href="/assets/js/239.a74a4736.js"><link rel="prefetch" href="/assets/js/24.854a29ed.js"><link rel="prefetch" href="/assets/js/240.3c8801b3.js"><link rel="prefetch" href="/assets/js/241.1930e71a.js"><link rel="prefetch" href="/assets/js/242.31d76505.js"><link rel="prefetch" href="/assets/js/243.36c52617.js"><link rel="prefetch" href="/assets/js/244.4adc8887.js"><link rel="prefetch" href="/assets/js/245.f221ffd4.js"><link rel="prefetch" href="/assets/js/246.03b3149d.js"><link rel="prefetch" href="/assets/js/247.cb26f1ac.js"><link rel="prefetch" href="/assets/js/248.e0b76f15.js"><link rel="prefetch" href="/assets/js/249.cde39b0c.js"><link rel="prefetch" href="/assets/js/25.d429e2ad.js"><link rel="prefetch" href="/assets/js/250.30e7e869.js"><link rel="prefetch" href="/assets/js/251.b14e683b.js"><link rel="prefetch" href="/assets/js/252.5a2a17bb.js"><link rel="prefetch" href="/assets/js/253.64575468.js"><link rel="prefetch" href="/assets/js/254.5ee1d4b0.js"><link rel="prefetch" href="/assets/js/255.a701e12c.js"><link rel="prefetch" href="/assets/js/256.205df8b5.js"><link rel="prefetch" href="/assets/js/257.62941e39.js"><link rel="prefetch" href="/assets/js/258.82c01d6a.js"><link rel="prefetch" href="/assets/js/259.74f3d1a1.js"><link rel="prefetch" href="/assets/js/26.3716f14a.js"><link rel="prefetch" href="/assets/js/260.a07fea6f.js"><link rel="prefetch" href="/assets/js/261.0e9cc558.js"><link rel="prefetch" href="/assets/js/262.8e381643.js"><link rel="prefetch" href="/assets/js/263.1da50740.js"><link rel="prefetch" href="/assets/js/264.3201225f.js"><link rel="prefetch" href="/assets/js/265.778e81a2.js"><link rel="prefetch" href="/assets/js/266.6fc8c8f2.js"><link rel="prefetch" href="/assets/js/267.6058e70a.js"><link rel="prefetch" href="/assets/js/268.90728fbe.js"><link rel="prefetch" href="/assets/js/269.57a1b247.js"><link rel="prefetch" href="/assets/js/27.90a02103.js"><link rel="prefetch" href="/assets/js/270.e1fbaf15.js"><link rel="prefetch" href="/assets/js/271.67bd6fa1.js"><link rel="prefetch" href="/assets/js/272.324204c9.js"><link rel="prefetch" href="/assets/js/273.3d723913.js"><link rel="prefetch" href="/assets/js/274.34e0cc99.js"><link rel="prefetch" href="/assets/js/275.c7b6a30a.js"><link rel="prefetch" href="/assets/js/276.4475ed4a.js"><link rel="prefetch" href="/assets/js/277.108044d1.js"><link rel="prefetch" href="/assets/js/278.dc6f0fad.js"><link rel="prefetch" href="/assets/js/279.c2c6595a.js"><link rel="prefetch" href="/assets/js/28.7d19fe1e.js"><link rel="prefetch" href="/assets/js/280.00b3a96f.js"><link rel="prefetch" href="/assets/js/281.35218fe6.js"><link rel="prefetch" href="/assets/js/282.833aa9a1.js"><link rel="prefetch" href="/assets/js/283.b854e98d.js"><link rel="prefetch" href="/assets/js/284.55390ee5.js"><link rel="prefetch" href="/assets/js/285.e60c8473.js"><link rel="prefetch" href="/assets/js/286.1fb42b39.js"><link rel="prefetch" href="/assets/js/287.76d416c4.js"><link rel="prefetch" href="/assets/js/288.cc30790d.js"><link rel="prefetch" href="/assets/js/289.fead2fdb.js"><link rel="prefetch" href="/assets/js/29.7eeb3de4.js"><link rel="prefetch" href="/assets/js/290.06e7dd5c.js"><link rel="prefetch" href="/assets/js/291.a073502f.js"><link rel="prefetch" href="/assets/js/292.ee597491.js"><link rel="prefetch" href="/assets/js/293.b55cd65c.js"><link rel="prefetch" href="/assets/js/294.ee3bbd54.js"><link rel="prefetch" href="/assets/js/295.5e680082.js"><link rel="prefetch" href="/assets/js/296.cc18faac.js"><link rel="prefetch" href="/assets/js/297.c421a612.js"><link rel="prefetch" href="/assets/js/298.01889782.js"><link rel="prefetch" href="/assets/js/299.2c4c2cb2.js"><link rel="prefetch" href="/assets/js/3.14f582e8.js"><link rel="prefetch" href="/assets/js/30.cba82c26.js"><link rel="prefetch" href="/assets/js/300.14aa1fc0.js"><link rel="prefetch" href="/assets/js/301.85d64cdf.js"><link rel="prefetch" href="/assets/js/302.e2815e7f.js"><link rel="prefetch" href="/assets/js/303.98c1febb.js"><link rel="prefetch" href="/assets/js/304.50df0bb2.js"><link rel="prefetch" href="/assets/js/305.41b537b2.js"><link rel="prefetch" href="/assets/js/306.40fc4ca0.js"><link rel="prefetch" href="/assets/js/307.e7f1fd37.js"><link rel="prefetch" href="/assets/js/308.9c019000.js"><link rel="prefetch" href="/assets/js/309.932890cc.js"><link rel="prefetch" href="/assets/js/31.09ae525c.js"><link rel="prefetch" href="/assets/js/310.4ee417ea.js"><link rel="prefetch" href="/assets/js/311.bb2655cc.js"><link rel="prefetch" href="/assets/js/312.8448f772.js"><link rel="prefetch" href="/assets/js/313.1cc95dd2.js"><link rel="prefetch" href="/assets/js/314.a0e4ce60.js"><link rel="prefetch" href="/assets/js/315.92099df1.js"><link rel="prefetch" href="/assets/js/316.4ccce55e.js"><link rel="prefetch" href="/assets/js/317.de8cc4ad.js"><link rel="prefetch" href="/assets/js/318.475f44de.js"><link rel="prefetch" href="/assets/js/319.f4f8a31f.js"><link rel="prefetch" href="/assets/js/32.cf5672f3.js"><link rel="prefetch" href="/assets/js/320.64cbd076.js"><link rel="prefetch" href="/assets/js/321.77581796.js"><link rel="prefetch" href="/assets/js/322.9fa19651.js"><link rel="prefetch" href="/assets/js/323.8dc23ccd.js"><link rel="prefetch" href="/assets/js/324.00d7ed12.js"><link rel="prefetch" href="/assets/js/325.0e9f380d.js"><link rel="prefetch" href="/assets/js/326.95883d38.js"><link rel="prefetch" href="/assets/js/327.b0415db7.js"><link rel="prefetch" href="/assets/js/328.89746536.js"><link rel="prefetch" href="/assets/js/329.c1a43c4d.js"><link rel="prefetch" href="/assets/js/33.a7f5ab01.js"><link rel="prefetch" href="/assets/js/330.9ddac96b.js"><link rel="prefetch" href="/assets/js/331.9d697ac8.js"><link rel="prefetch" href="/assets/js/332.6ee28795.js"><link rel="prefetch" href="/assets/js/333.170f7a62.js"><link rel="prefetch" href="/assets/js/334.cb9d727c.js"><link rel="prefetch" href="/assets/js/335.8a3b74f8.js"><link rel="prefetch" href="/assets/js/336.8c897ca1.js"><link rel="prefetch" href="/assets/js/34.0361ed84.js"><link rel="prefetch" href="/assets/js/35.7944f93a.js"><link rel="prefetch" href="/assets/js/36.cb553688.js"><link rel="prefetch" href="/assets/js/37.06e9f182.js"><link rel="prefetch" href="/assets/js/38.2472ee7f.js"><link rel="prefetch" href="/assets/js/39.82eca662.js"><link rel="prefetch" href="/assets/js/4.837e9ea1.js"><link rel="prefetch" href="/assets/js/40.022ad8aa.js"><link rel="prefetch" href="/assets/js/41.821fb36a.js"><link rel="prefetch" href="/assets/js/42.180ab912.js"><link rel="prefetch" href="/assets/js/43.d9375ce1.js"><link rel="prefetch" href="/assets/js/44.d212f8b3.js"><link rel="prefetch" href="/assets/js/45.ba520f2b.js"><link rel="prefetch" href="/assets/js/46.5447129c.js"><link rel="prefetch" href="/assets/js/47.3e3fdc9a.js"><link rel="prefetch" href="/assets/js/48.d96c69a1.js"><link rel="prefetch" href="/assets/js/49.96ac804b.js"><link rel="prefetch" href="/assets/js/5.94383f14.js"><link rel="prefetch" href="/assets/js/50.ff732aa7.js"><link rel="prefetch" href="/assets/js/51.cafabf54.js"><link rel="prefetch" href="/assets/js/52.8cbc09b9.js"><link rel="prefetch" href="/assets/js/53.7bc1ec87.js"><link rel="prefetch" href="/assets/js/54.45d36044.js"><link rel="prefetch" href="/assets/js/55.e7192e85.js"><link rel="prefetch" href="/assets/js/56.711184df.js"><link rel="prefetch" href="/assets/js/57.a617b81c.js"><link rel="prefetch" href="/assets/js/58.176a088e.js"><link rel="prefetch" href="/assets/js/59.41c6b746.js"><link rel="prefetch" href="/assets/js/6.2bd98a80.js"><link rel="prefetch" href="/assets/js/60.a9ad50e8.js"><link rel="prefetch" href="/assets/js/61.4d205bfa.js"><link rel="prefetch" href="/assets/js/62.ecefe86d.js"><link rel="prefetch" href="/assets/js/63.d3924f46.js"><link rel="prefetch" href="/assets/js/64.40f6beaf.js"><link rel="prefetch" href="/assets/js/65.001bcc37.js"><link rel="prefetch" href="/assets/js/66.f281aa40.js"><link rel="prefetch" href="/assets/js/67.4bd2ef0c.js"><link rel="prefetch" href="/assets/js/69.e21e77b0.js"><link rel="prefetch" href="/assets/js/7.f2ae7930.js"><link rel="prefetch" href="/assets/js/70.8715f006.js"><link rel="prefetch" href="/assets/js/71.0804d179.js"><link rel="prefetch" href="/assets/js/72.d47a4a99.js"><link rel="prefetch" href="/assets/js/73.a72ed2e1.js"><link rel="prefetch" href="/assets/js/74.bf813865.js"><link rel="prefetch" href="/assets/js/75.0f9354a3.js"><link rel="prefetch" href="/assets/js/76.521fe63b.js"><link rel="prefetch" href="/assets/js/77.da026e66.js"><link rel="prefetch" href="/assets/js/78.caf4ae61.js"><link rel="prefetch" href="/assets/js/79.0ca61053.js"><link rel="prefetch" href="/assets/js/8.bf1039e7.js"><link rel="prefetch" href="/assets/js/80.cd005ed5.js"><link rel="prefetch" href="/assets/js/81.6d9c7fc6.js"><link rel="prefetch" href="/assets/js/82.e90bac88.js"><link rel="prefetch" href="/assets/js/83.63b5d58f.js"><link rel="prefetch" href="/assets/js/84.6d112559.js"><link rel="prefetch" href="/assets/js/85.fb99dd6c.js"><link rel="prefetch" href="/assets/js/86.dde3c192.js"><link rel="prefetch" href="/assets/js/87.b011c014.js"><link rel="prefetch" href="/assets/js/88.493b12c1.js"><link rel="prefetch" href="/assets/js/89.c2e431ec.js"><link rel="prefetch" href="/assets/js/9.b42343bd.js"><link rel="prefetch" href="/assets/js/90.eecd1598.js"><link rel="prefetch" href="/assets/js/91.74f45fff.js"><link rel="prefetch" href="/assets/js/92.ea554734.js"><link rel="prefetch" href="/assets/js/93.aefaca74.js"><link rel="prefetch" href="/assets/js/94.9d983301.js"><link rel="prefetch" href="/assets/js/95.13a41e26.js"><link rel="prefetch" href="/assets/js/96.92799e4e.js"><link rel="prefetch" href="/assets/js/97.dc0873a3.js"><link rel="prefetch" href="/assets/js/98.1032eb92.js"><link rel="prefetch" href="/assets/js/99.b28f8efa.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9d774b0a.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">wx-notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/pages/948095/" class="nav-link">Top</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="BE" class="dropdown-title"><a href="/backend/" class="link-title">BE</a> <span class="title" style="display:none;">BE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0a3d16/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/pages/907e2d/" class="nav-link">Python</a></li><li class="dropdown-item"><!----> <a href="/pages/f1ea5b/" class="nav-link">Go</a></li><li class="dropdown-item"><!----> <a href="/pages/ee7ace/" class="nav-link">Framework</a></li><li class="dropdown-item"><!----> <a href="/pages/f1fcc1/" class="nav-link">Database</a></li><li class="dropdown-item"><!----> <a href="/pages/ab7fe2/" class="nav-link">MessageMiddleware</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FE" class="dropdown-title"><a href="/frontend/" class="link-title">FE</a> <span class="title" style="display:none;">FE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0767c1/" class="nav-link">FE Docs</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="More" class="dropdown-title"><a href="/more/" class="link-title">More</a> <span class="title" style="display:none;">More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/6f7935/" class="nav-link">OperatingSystem</a></li><li class="dropdown-item"><!----> <a href="/pages/570625/" class="nav-link">Container</a></li><li class="dropdown-item"><!----> <a href="/pages/b5bf02/" class="nav-link">DevOps</a></li><li class="dropdown-item"><!----> <a href="/pages/3e0468/" class="nav-link">WebServer</a></li><li class="dropdown-item"><!----> <a href="/pages/5c5daa/" class="nav-link">Cloud</a></li><li class="dropdown-item"><!----> <a href="/pages/49864f/" class="nav-link">GPT</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><a href="/others/" class="link-title">Others</a> <span class="title" style="display:none;">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/b95cf8/" class="nav-link">PackageManager</a></li><li class="dropdown-item"><!----> <a href="/pages/6a8a1c/" class="nav-link">TestTool</a></li><li class="dropdown-item"><!----> <a href="/pages/8ca6e0/" class="nav-link">EditorAndIDE</a></li><li class="dropdown-item"><!----> <a href="/pages/b95cf8/" class="nav-link">CommandLineTool</a></li><li class="dropdown-item"><!----> <a href="/pages/ccee87/" class="nav-link">Browser</a></li><li class="dropdown-item"><!----> <a href="/pages/a9d7d6/" class="nav-link">Articles</a></li><li class="dropdown-item"><!----> <a href="/pages/9d47df/" class="nav-link">Others</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Index" class="dropdown-title"><a href="/archives/" class="link-title">Index</a> <span class="title" style="display:none;">Index</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">Categories</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">Tags</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">Archives</a></li></ul></div></div> <a href="https://github.com/dlwxin/wx-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://dlwang.xin:11796/image/avatar/avatar03-small.jpg"> <div class="blogger-info"><h3>wx</h3> <span>Tomorrow is always fresh, with no mistakes in it.</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/pages/948095/" class="nav-link">Top</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="BE" class="dropdown-title"><a href="/backend/" class="link-title">BE</a> <span class="title" style="display:none;">BE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0a3d16/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/pages/907e2d/" class="nav-link">Python</a></li><li class="dropdown-item"><!----> <a href="/pages/f1ea5b/" class="nav-link">Go</a></li><li class="dropdown-item"><!----> <a href="/pages/ee7ace/" class="nav-link">Framework</a></li><li class="dropdown-item"><!----> <a href="/pages/f1fcc1/" class="nav-link">Database</a></li><li class="dropdown-item"><!----> <a href="/pages/ab7fe2/" class="nav-link">MessageMiddleware</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FE" class="dropdown-title"><a href="/frontend/" class="link-title">FE</a> <span class="title" style="display:none;">FE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0767c1/" class="nav-link">FE Docs</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="More" class="dropdown-title"><a href="/more/" class="link-title">More</a> <span class="title" style="display:none;">More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/6f7935/" class="nav-link">OperatingSystem</a></li><li class="dropdown-item"><!----> <a href="/pages/570625/" class="nav-link">Container</a></li><li class="dropdown-item"><!----> <a href="/pages/b5bf02/" class="nav-link">DevOps</a></li><li class="dropdown-item"><!----> <a href="/pages/3e0468/" class="nav-link">WebServer</a></li><li class="dropdown-item"><!----> <a href="/pages/5c5daa/" class="nav-link">Cloud</a></li><li class="dropdown-item"><!----> <a href="/pages/49864f/" class="nav-link">GPT</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><a href="/others/" class="link-title">Others</a> <span class="title" style="display:none;">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/b95cf8/" class="nav-link">PackageManager</a></li><li class="dropdown-item"><!----> <a href="/pages/6a8a1c/" class="nav-link">TestTool</a></li><li class="dropdown-item"><!----> <a href="/pages/8ca6e0/" class="nav-link">EditorAndIDE</a></li><li class="dropdown-item"><!----> <a href="/pages/b95cf8/" class="nav-link">CommandLineTool</a></li><li class="dropdown-item"><!----> <a href="/pages/ccee87/" class="nav-link">Browser</a></li><li class="dropdown-item"><!----> <a href="/pages/a9d7d6/" class="nav-link">Articles</a></li><li class="dropdown-item"><!----> <a href="/pages/9d47df/" class="nav-link">Others</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Index" class="dropdown-title"><a href="/archives/" class="link-title">Index</a> <span class="title" style="display:none;">Index</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">Categories</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">Tags</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">Archives</a></li></ul></div></div> <a href="https://github.com/dlwxin/wx-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Framework</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Database</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/335cfa/" class="sidebar-link">Oracle Basic</a></li><li><a href="/pages/84cd9c/" class="sidebar-link">PostgreSQL Basic</a></li><li><a href="/pages/a6c580/" aria-current="page" class="active sidebar-link">MySQL Basic</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#links" class="sidebar-link">Links</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#connect-to-mariadb-mysql-in-the-command-line" class="sidebar-link">connect to MariaDB/Mysql in the command line</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#mysqldump" class="sidebar-link">mysqldump</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#execute-command-and-quit" class="sidebar-link">Execute command and quit</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#run-sql-script-in-command-line" class="sidebar-link">run SQL script in command line</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#print-some-words-and-quit-in-sql-script" class="sidebar-link">print some words and quit in sql script</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#mysqladmin" class="sidebar-link">mysqladmin</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#show-variables-statement" class="sidebar-link">SHOW VARIABLES Statement</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#check-version" class="sidebar-link">check version</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#check-time-zone" class="sidebar-link">check time zone</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#create-user" class="sidebar-link">create user</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#grant-privileges" class="sidebar-link">grant privileges</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#refresh-the-system-permission-table" class="sidebar-link">refresh the system permission table</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#database-engine-storage-engine" class="sidebar-link">database engine/storage engine</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#view-the-current-session-isolation-level" class="sidebar-link">view the current session isolation level</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#basic-mysql-operations" class="sidebar-link">Basic MySQL Operations</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/a6c580/#classification-of-annotation" class="sidebar-link">classification of annotation</a></li><li class="sidebar-sub-header level3"><a href="/pages/a6c580/#operations-on-database" class="sidebar-link">Operations on database</a></li><li class="sidebar-sub-header level3"><a href="/pages/a6c580/#operations-on-table" class="sidebar-link">Operations on table</a></li><li class="sidebar-sub-header level3"><a href="/pages/a6c580/#mysql-pagination" class="sidebar-link">mysql pagination</a></li><li class="sidebar-sub-header level3"><a href="/pages/a6c580/#mysql-字符串截取函数-substring-的用法" class="sidebar-link">Mysql 字符串截取函数 substring 的用法</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#the-basic-function-of-mysql" class="sidebar-link">The basic function of MySQL</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#alter-table-examples" class="sidebar-link">ALTER TABLE Examples</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#drop-all-tables-in-mysql" class="sidebar-link">Drop all tables in MySQL</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#call-sql-script-file-from-other-sql-script-file" class="sidebar-link">Call sql script file from other sql script file</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#mysql-关键字和保留字" class="sidebar-link">Mysql 关键字和保留字</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#datatype-mappings" class="sidebar-link">Datatype Mappings</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#loop-statement" class="sidebar-link">LOOP Statement</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#using-character-sets-and-unicode" class="sidebar-link">Using Character Sets and Unicode</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#optimizing-queries-with-explain" class="sidebar-link">Optimizing Queries with EXPLAIN</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#mysql-delimiter" class="sidebar-link">MySQL Delimiter</a></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#mysql-store-procedure" class="sidebar-link">MySQL store procedure</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/a6c580/#definition" class="sidebar-link">Definition</a></li><li class="sidebar-sub-header level3"><a href="/pages/a6c580/#advantages-and-disadvantages" class="sidebar-link">Advantages and disadvantages</a></li><li class="sidebar-sub-header level3"><a href="/pages/a6c580/#basic-grammer" class="sidebar-link">Basic grammer</a></li><li class="sidebar-sub-header level3"><a href="/pages/a6c580/#variable-definition-and-variable-assignment" class="sidebar-link">Variable definition and variable assignment</a></li><li class="sidebar-sub-header level3"><a href="/pages/a6c580/#mysql-stored-procedure-queries" class="sidebar-link">MySQL stored procedure queries</a></li><li class="sidebar-sub-header level3"><a href="/pages/a6c580/#do-exercises" class="sidebar-link">Do exercises</a></li><li class="sidebar-sub-header level3"><a href="/pages/a6c580/#the-input-and-output-of-stored-procedure" class="sidebar-link">The input and output of stored procedure</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/a6c580/#mysql-event-scheduler" class="sidebar-link">MySQL Event Scheduler</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/a6c580/#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header level3"><a href="/pages/a6c580/#toggle-event-scheduler-status" class="sidebar-link">Toggle Event Scheduler status</a></li><li class="sidebar-sub-header level3"><a href="/pages/a6c580/#check-event-scheduler-status-mysql" class="sidebar-link">Check event scheduler status mysql</a></li><li class="sidebar-sub-header level3"><a href="/pages/a6c580/#event-syntax" class="sidebar-link">Event Syntax</a></li><li class="sidebar-sub-header level3"><a href="/pages/a6c580/#example-01" class="sidebar-link">Example 01</a></li></ul></li></ul></li><li><a href="/pages/f1fcc1/" class="sidebar-link">Database Basic</a></li><li><a href="/pages/f0f99c/" class="sidebar-link">Oracle User</a></li><li><a href="/pages/e5eee1/" class="sidebar-link">Oracle Scheduler</a></li><li><a href="/pages/4a2fe4/" class="sidebar-link">Oracle Index</a></li><li><a href="/pages/1d57f7/" class="sidebar-link">Oracle Database Link</a></li><li><a href="/pages/0a0040/" class="sidebar-link">Redis Basic</a></li><li><a href="/pages/61dadb/" class="sidebar-link">Redis Common Commands</a></li><li><a href="/pages/46f3df/" class="sidebar-link">MySQL QA</a></li><li><a href="/pages/cc9bf2/" class="sidebar-link">Oracle QA</a></li><li><a href="/pages/ad3e84/" class="sidebar-link">DB Client</a></li><li><a href="/pages/27a38c/" class="sidebar-link">DB Migration Tool</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MessageMiddleware</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-057748f7><div class="articleInfo" data-v-057748f7><ul class="breadcrumbs" data-v-057748f7><li data-v-057748f7><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-057748f7></a></li> <li data-v-057748f7><a href="/backend/#BE" data-v-057748f7>BE</a></li><li data-v-057748f7><a href="/backend/#Database" data-v-057748f7>Database</a></li></ul> <div class="info" data-v-057748f7><div title="作者" class="author iconfont icon-touxiang" data-v-057748f7><a href="https://github.com/dlwxin/wx-notes" target="_blank" title="作者" class="beLink" data-v-057748f7>wx</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-057748f7><a href="javascript:;" data-v-057748f7>2022-01-25</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><!---->MySQL Basic<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="links"><a href="#links" class="header-anchor">#</a> Links</h2> <ul><li><a href="https://dev.mysql.com/doc/" target="_blank" rel="noopener noreferrer">MySQL Documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://dev.mysql.com/downloads/" target="_blank" rel="noopener noreferrer">MySQL Community Downloads<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://dev.mysql.com/doc/connector-j/8.1/en/connector-j-reference-configuration-properties.html" target="_blank" rel="noopener noreferrer">MySql 的 jdbc 配置选项 MySQL Connector/J 8.1 Developer Guide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="connect-to-mariadb-mysql-in-the-command-line"><a href="#connect-to-mariadb-mysql-in-the-command-line" class="header-anchor">#</a> connect to MariaDB/Mysql in the command line</h2> <ul><li><a href="https://dev.mysql.com/doc/refman/8.0/en/password-security-user.html" target="_blank" rel="noopener noreferrer">End-User Guidelines for Password Security<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://dev.mysql.com/doc/refman/8.0/en/mysql-command-options.html" target="_blank" rel="noopener noreferrer">mysql Client Options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://dev.mysql.com/doc/refman/8.0/en/mysql-commands.html" target="_blank" rel="noopener noreferrer">mysql Client Commands<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql <span class="token operator">-</span>u username <span class="token operator">-</span>p

<span class="token comment">-- -h --&gt; Specify host; default value: localhost</span>
<span class="token comment">-- -P --&gt; Specify port; default value: 3306</span>
mysql <span class="token operator">-</span>h localhost <span class="token operator">-</span>P <span class="token number">3306</span> <span class="token operator">-</span>u username <span class="token operator">-</span>p
mysql <span class="token operator">-</span>h localhost <span class="token operator">-</span>P <span class="token number">3306</span> <span class="token operator">-</span>u username <span class="token comment">--password=$(cat ~/.login)</span>
sudo mysql <span class="token operator">-</span>h <span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span> <span class="token operator">-</span>P <span class="token number">3306</span> <span class="token operator">-</span>u username <span class="token operator">-</span>p <span class="token operator">-</span>D <span class="token punctuation">[</span><span class="token keyword">database</span><span class="token punctuation">]</span>

<span class="token comment">-- Specify the database to connect to</span>
mysql <span class="token operator">-</span>u username <span class="token operator">-</span>p <span class="token punctuation">[</span><span class="token keyword">database</span><span class="token punctuation">]</span>
<span class="token comment">-- or</span>
mysql <span class="token operator">-</span>u username <span class="token operator">-</span>p <span class="token operator">-</span>D <span class="token punctuation">[</span><span class="token keyword">database</span><span class="token punctuation">]</span>

<span class="token comment">-- connecting to your MySQL server simply add the option --comments and comments will now be preserved</span>
<span class="token comment">-- The default is --skip-comments which explains why comments are normally removed.</span>
mysql <span class="token operator">-</span>u username <span class="token operator">-</span>p <span class="token comment">--comments</span>

<span class="token comment">-- Output in table format.</span>
mysql <span class="token operator">-</span>u username <span class="token operator">-</span>p <span class="token comment">--table</span>
mysql <span class="token operator">-</span>u username <span class="token operator">-</span>p <span class="token operator">-</span>t

<span class="token comment">-- Append everything into outfile. See interactive help (\h) also.</span>
<span class="token comment">-- Does not work in batch mode. Disable with --disable-tee. This option is disabled by default.</span>
mysql <span class="token operator">-</span>u username <span class="token operator">-</span>p <span class="token comment">--tee</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="mysqldump"><a href="#mysqldump" class="header-anchor">#</a> mysqldump</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># export DDL</span>
mysqldump -d -P <span class="token number">3306</span> -u username -p -h <span class="token number">127.0</span>.0.1 <span class="token operator">&lt;</span>database_name<span class="token operator">&gt;</span>

<span class="token comment"># export insert statement</span>
mysqldump -t -u MyUserName -pMyPassword MyDatabase MyTable --where<span class="token operator">=</span><span class="token string">&quot;ID = 10&quot;</span>
mysqldump -t -u MyUserName -p --complete-insert MyDatabase MyTable --where<span class="token operator">=</span><span class="token string">&quot;ID = 10&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="execute-command-and-quit"><a href="#execute-command-and-quit" class="header-anchor">#</a> Execute command and quit</h2> <ul><li><a href="https://stackoverflow.com/questions/21196613/run-a-mysql-query-as-a-cron-job" target="_blank" rel="noopener noreferrer">Run a mySQL query as a cron job?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql <span class="token comment">--host=localhost --port=3306 --user=root --password=123456 --database=test_db --execute=&quot;SELECT NOW();&quot;</span>
mysql: <span class="token punctuation">[</span>Warning<span class="token punctuation">]</span> <span class="token keyword">Using</span> a password <span class="token keyword">on</span> the command line interface can be insecure<span class="token punctuation">.</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>
<span class="token operator">|</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>
<span class="token operator">|</span> <span class="token number">2022</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">16</span> <span class="token number">15</span>:<span class="token number">00</span>:<span class="token number">04</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="run-sql-script-in-command-line"><a href="#run-sql-script-in-command-line" class="header-anchor">#</a> run SQL script in command line</h2> <ul><li><a href="https://stackoverflow.com/questions/8940230/how-to-run-sql-script-in-mysql" target="_blank" rel="noopener noreferrer">How to run SQL script in MySQL?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- If you’re at the MySQL command line mysql&gt; you have to declare the SQL file as source.</span>
mysql<span class="token operator">&gt;</span> source <span class="token punctuation">.</span><span class="token operator">/</span><span class="token keyword">update</span><span class="token punctuation">.</span><span class="token keyword">sql</span>
mysql<span class="token operator">&gt;</span> source <span class="token keyword">update</span><span class="token punctuation">.</span><span class="token keyword">sql</span>
mysql<span class="token operator">&gt;</span> source <span class="token operator">/</span>home<span class="token operator">/</span>admin<span class="token operator">/</span>temp_folfer<span class="token operator">/</span>mysql_test<span class="token operator">/</span><span class="token keyword">update</span><span class="token punctuation">.</span><span class="token keyword">sql</span>

mysql<span class="token operator">&gt;</span> tee <span class="token operator">/</span>utplat<span class="token operator">/</span><span class="token keyword">user</span><span class="token operator">/</span>admin<span class="token operator">/</span>mysql<span class="token punctuation">.</span>txt
mysql<span class="token operator">&gt;</span> source <span class="token punctuation">.</span><span class="token operator">/</span>update1<span class="token punctuation">.</span><span class="token keyword">sql</span>
mysql<span class="token operator">&gt;</span> source <span class="token punctuation">.</span><span class="token operator">/</span>update2<span class="token punctuation">.</span><span class="token keyword">sql</span>
mysql<span class="token operator">&gt;</span> notee
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code>$ mysql --host<span class="token operator">=</span>localhost --port<span class="token operator">=</span><span class="token number">3306</span> --user<span class="token operator">=</span>root --password<span class="token operator">=</span><span class="token number">123456</span> --database<span class="token operator">=</span>test_db <span class="token operator">&lt;</span> /home/admin/temp_folfer/mysql_test/update.sql

$ mysql --host<span class="token operator">=</span>localhost --port<span class="token operator">=</span><span class="token number">3306</span> --user<span class="token operator">=</span>root --password<span class="token operator">=</span><span class="token number">123456</span> --database<span class="token operator">=</span>test_db <span class="token operator">&lt;</span> /home/admin/temp_folfer/mysql_test/*

$ mysql --host<span class="token operator">=</span>localhost --port<span class="token operator">=</span><span class="token number">3306</span> --user<span class="token operator">=</span>root --password<span class="token operator">=</span><span class="token number">123456</span> --database<span class="token operator">=</span>test_db <span class="token operator">&lt;</span> ./update.sql

$ mysql -u <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span> -p -e <span class="token string">&quot;INSERT INTO tableA (timestamp_column) VALUES (FROM_UNIXTIME(<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>))&quot;</span> database_name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="print-some-words-and-quit-in-sql-script"><a href="#print-some-words-and-quit-in-sql-script" class="header-anchor">#</a> print some words and quit in sql script</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- this is a sql file</span>
<span class="token comment">-- Option1:</span>
\<span class="token operator">!</span> echo <span class="token keyword">Use</span> <span class="token string">&quot;create extension functionality&quot;</span> <span class="token keyword">to</span> <span class="token keyword">load</span> this <span class="token keyword">file</span><span class="token punctuation">.</span>
quit

<span class="token comment">-- Option2:</span>
<span class="token keyword">SELECT</span> <span class="token string">'create extension functionality'</span> <span class="token keyword">AS</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token string">'create extension functionality'</span> <span class="token keyword">AS</span> <span class="token string">'Message'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="mysqladmin"><a href="#mysqladmin" class="header-anchor">#</a> mysqladmin</h2> <ul><li><a href="https://dev.mysql.com/doc/refman/8.0/en/mysqladmin.html" target="_blank" rel="noopener noreferrer">mysqladmin — A MySQL Server Administration Program<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p><code>mysqladmin</code> 命令是 mysql 服务器管理任务的客户端工具，它可以检查 mytsql 服务器的配置和当前工作状态，创建和删除数据库，创建用户和修改用户密码等操作。</p> <h2 id="show-variables-statement"><a href="#show-variables-statement" class="header-anchor">#</a> SHOW VARIABLES Statement</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> VARIABLES<span class="token punctuation">;</span>
<span class="token keyword">SHOW</span> <span class="token keyword">GLOBAL</span> VARIABLES<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="check-version"><a href="#check-version" class="header-anchor">#</a> check version</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="check-time-zone"><a href="#check-time-zone" class="header-anchor">#</a> check time zone</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> variables <span class="token operator">LIKE</span> <span class="token string">'%time_zone%'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th>Variable_name</th> <th>Value</th></tr></thead> <tbody><tr><td>system_time_zone</td> <td>UTC</td></tr> <tr><td>time_zone</td> <td>SYSTEM</td></tr></tbody></table> <blockquote><p>time_zone 说明 mysql 使用 system 的时区，system_time_zone 说明 system 使用 UTC 时区</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> UTC_TIMESTAMP<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">-- 2022-10-06 09:13:06</span>
<span class="token keyword">SELECT</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2022-10-06 09:13:06</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 修改 MySQL 全局时区为北京时间</span>
<span class="token keyword">set</span> <span class="token keyword">global</span> time_zone <span class="token operator">=</span> <span class="token string">'+8:00'</span><span class="token punctuation">;</span>

<span class="token comment">-- 修改当前会话时区</span>
<span class="token comment">-- set time_zone = 'SYSTEM';</span>
<span class="token comment">-- set time_zone = 'UTC';</span>
<span class="token keyword">set</span> time_zone <span class="token operator">=</span> <span class="token string">'+8:00'</span><span class="token punctuation">;</span>

<span class="token comment">-- 立即生效</span>
flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>After modified.</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> variables <span class="token operator">LIKE</span> <span class="token string">'%time_zone%'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th>Variable_name</th> <th>Value</th></tr></thead> <tbody><tr><td>system_time_zone</td> <td>UTC</td></tr> <tr><td>time_zone</td> <td>+08:00</td></tr></tbody></table> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> UTC_TIMESTAMP<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">-- 2022-10-06 09:20:49</span>
<span class="token keyword">SELECT</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2022-10-06 17:20:49</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="create-user"><a href="#create-user" class="header-anchor">#</a> create user</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">'username'</span><span class="token variable">@'host'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'password'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="grant-privileges"><a href="#grant-privileges" class="header-anchor">#</a> grant privileges</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'username'</span><span class="token variable">@'%'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span> <span class="token keyword">on</span> demoDB<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> <span class="token string">&quot;USERNAME&quot;</span><span class="token variable">@&quot;localhost&quot;</span> identified <span class="token keyword">by</span> <span class="token string">&quot;PASSWORD&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="refresh-the-system-permission-table"><a href="#refresh-the-system-permission-table" class="header-anchor">#</a> refresh the system permission table</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="database-engine-storage-engine"><a href="#database-engine-storage-engine" class="header-anchor">#</a> database engine/storage engine</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 查看 mysql 提供的存储引擎</span>
<span class="token keyword">show</span> engines<span class="token punctuation">;</span>
<span class="token comment">-- 查看 mysql 当前默认的存储引擎</span>
<span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'%storage_engine%'</span><span class="token punctuation">;</span>

<span class="token comment">-- 查看 mysql 表的存储引擎</span>
<span class="token keyword">show</span> <span class="token keyword">table</span> <span class="token keyword">status</span> <span class="token operator">like</span> <span class="token string">'city'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="view-the-current-session-isolation-level"><a href="#view-the-current-session-isolation-level" class="header-anchor">#</a> view the current session isolation level</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; SHOW VARIABLES LIKE 'transaction_isolation';
+-----------------------+-----------------+
| Variable_name         | Value           |
+-----------------------+-----------------+
| transaction_isolation | REPEATABLE-READ |
+-----------------------+-----------------+
1 row in set (0.01 sec)

mysql&gt; SELECT @@transaction_isolation;
+-------------------------+
| @@transaction_isolation |
+-------------------------+
| REPEATABLE-READ         |
+-------------------------+
1 row in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql&gt; show variables like 'autocommit';
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| autocommit    | ON    |
+---------------+-------+
1 row in set (0.00 sec)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="basic-mysql-operations"><a href="#basic-mysql-operations" class="header-anchor">#</a> Basic MySQL Operations</h2> <h3 id="classification-of-annotation"><a href="#classification-of-annotation" class="header-anchor">#</a> classification of annotation</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- mysql single line annotation</span>

<span class="token comment"># mysql single line annotation</span>

<span class="token comment">/*
  mysql multi-line annotation
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="operations-on-database"><a href="#operations-on-database" class="header-anchor">#</a> Operations on database</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 1.创建数据库</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> test2<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token punctuation">`</span>my<span class="token operator">-</span>test<span class="token punctuation">`</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> test_db<span class="token punctuation">;</span>

<span class="token comment">-- 2.查看所有数据库</span>
<span class="token keyword">SHOW</span> <span class="token keyword">DATABASES</span><span class="token punctuation">;</span>

<span class="token comment">-- 3.删除数据库</span>
<span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> test2<span class="token punctuation">;</span>

<span class="token comment">-- 4.指定使用的数据库</span>
<span class="token keyword">USE</span> test<span class="token punctuation">;</span>

<span class="token comment">-- 5.查看正在使用的数据库</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DATABASE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 6.显示数据库的结构</span>
<span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> test<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><code>SHOW DATABASES;</code>:</p> <table><thead><tr><th>Database</th></tr></thead> <tbody><tr><td>demo01</td></tr> <tr><td>information_schema</td></tr> <tr><td>mysql</td></tr> <tr><td>payment_demo</td></tr> <tr><td>performance_schema</td></tr> <tr><td>sys</td></tr> <tr><td>test_db</td></tr></tbody></table> <h3 id="operations-on-table"><a href="#operations-on-table" class="header-anchor">#</a> Operations on table</h3> <ol><li>删除表</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> student<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>创建表</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span>
  id <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
  name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  sex <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  age <span class="token keyword">int</span><span class="token punctuation">,</span>
  department <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="3"><li>插入记录</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>age<span class="token punctuation">,</span>department<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'1001'</span><span class="token punctuation">,</span><span class="token string">'张1'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">'工程管理'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>age<span class="token punctuation">,</span>department<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'1002'</span><span class="token punctuation">,</span><span class="token string">'张2'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">'工程管理'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'1003'</span><span class="token punctuation">,</span><span class="token string">'张3'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token string">'软件管理'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'1004'</span><span class="token punctuation">,</span><span class="token string">'张4'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token string">'计算机专业'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">IGNORE</span> <span class="token keyword">INTO</span> student<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>age<span class="token punctuation">,</span>department<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'1001'</span><span class="token punctuation">,</span><span class="token string">'张1'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">'工程管理'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- The ON DUPLICATE KEY UPDATE clause allows you to update the row with the new values when a duplicate value is found in the UNIQUE index or PRIMARY KEY column.</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> student<span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> age<span class="token punctuation">,</span> department<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'1001'</span><span class="token punctuation">,</span><span class="token string">'张1'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">'工程管理'</span><span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DUPLICATE</span> <span class="token keyword">KEY</span> <span class="token keyword">UPDATE</span> age <span class="token operator">=</span> <span class="token number">23</span><span class="token punctuation">;</span>

<span class="token comment">-- The REPLACE statement is an alternative to the ON DUPLICATE KEY UPDATE clause.</span>
<span class="token comment">--  MySQL will check the existing record to see if a row with the same unique value already exists</span>
<span class="token comment">--  When a row with the same unique value is found, then the row will be deleted using the DELETE statement. MySQL will then run the INSERT statement to replace the deleted row.</span>
<span class="token comment">--  When there’s no match in the existing record, then the REPLACE statement works like a regular INSERT statement.</span>
<span class="token keyword">REPLACE</span> <span class="token keyword">INTO</span> student<span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> age<span class="token punctuation">,</span> department<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'1001'</span><span class="token punctuation">,</span><span class="token string">'张1'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">'工程管理'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ol start="4"><li>查询表</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="5"><li>表的截断</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">truncate</span> <span class="token keyword">table</span> student

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><em>truncate 与 delete 的去区别：</em></p> <ul><li>delete 是逐行删除，所以在删除大量数据的时候速度慢，影响数据库效率, truncate 叫表的截断，是整表删除，删除大量数据的时候有优势</li> <li>delete 会触发行级触发器，truncate 不会触发行级触发器</li> <li>delete 在没有提交前是可以回滚的，truncate 操作不可以回滚。</li> <li>truncate 不能精确删除，一但操作不可找回</li> <li>delete 是 DML (数据操作语言)，truncate 是 DDL(数据定义语言)。</li></ul> <ol start="6"><li>复制一个表结构及数据</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 1&gt;.只复制了表的结构</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> studentbak <span class="token operator">like</span> student<span class="token punctuation">;</span>
<span class="token keyword">desc</span> studentbak<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> studentbak<span class="token punctuation">;</span>

<span class="token comment">-- 2&gt;.复制表的结构和数据</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> student2bak <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student2bak<span class="token punctuation">;</span>

<span class="token comment"># 开发常用的数据备份方式</span>
<span class="token comment">--表的备份步骤</span>

<span class="token comment">-- 1).复制一个表结构及数据，就是创建一个和目标表的相同结构的备份表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> student_bak <span class="token operator">like</span> student<span class="token punctuation">;</span>

<span class="token comment">-- 2).复制表结构及数据，这是把表的结构和数据一起复制过来</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> student_bak <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>

<span class="token comment">-- 3).删除原表的数据</span>
<span class="token keyword">truncate</span> <span class="token keyword">table</span> student<span class="token punctuation">;</span>

<span class="token comment">-- 4).利用备份的表，把数据导回原表</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student_bak<span class="token punctuation">;</span>

<span class="token comment">-- 5).删除备份表</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> student_bak<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><ol start="7"><li>显示所有的表</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="8"><li>显示表的结构</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="9"><li>显示表的字段信息</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">columns</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token keyword">desc</span> student<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="mysql-pagination"><a href="#mysql-pagination" class="header-anchor">#</a> mysql pagination</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- mysql的分页 limit start,length</span>
<span class="token comment">-- start(可选):选取数据开始的下标，从0开始，</span>
<span class="token comment">-- length(必须)：选取数据的数量</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> member <span class="token keyword">order</span> <span class="token keyword">by</span> age <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="mysql-字符串截取函数-substring-的用法"><a href="#mysql-字符串截取函数-substring-的用法" class="header-anchor">#</a> Mysql 字符串截取函数 substring 的用法</h3> <ol><li>截取字符串</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- substring（str, pos）pos 起始是1</span>
<span class="token comment">-- 说明：substring（被截取字段，从第几位开始截取）</span>
<span class="token keyword">select</span> substring<span class="token punctuation">(</span>name<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">as</span> abstract <span class="token keyword">from</span> member<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- substring（str, pos, length）</span>
<span class="token comment">-- substring（被截取字段，从第几位开始截取，截取长度）。</span>
<span class="token keyword">select</span> substring<span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">as</span> abstract <span class="token keyword">from</span> member<span class="token punctuation">;</span>
<span class="token comment">--（注：如果位数是负数 如-5 则是从后倒数位数，到字符串结束或截取的长度）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="2"><li>从左开始截取字符串</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- left（str, length）</span>
<span class="token comment">-- 说明：left（被截取字段，截取长度）</span>
<span class="token keyword">select</span> <span class="token keyword">left</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">as</span> abstract <span class="token keyword">from</span> member<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="3"><li>从右开始截取字符串</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- right（str, length）</span>
<span class="token comment">-- 说明：right（被截取字段，截取长度）</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="4"><li>按关键字截取字符串</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">--  substring_index（str,delim,count）</span>
<span class="token comment">-- 说明：substring_index（被截取字段，关键字，关键字出现的次数）</span>
<span class="token keyword">select</span> substring_index<span class="token punctuation">(</span><span class="token string">&quot;blog.jb51.net&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">as</span> abstract <span class="token keyword">from</span> member<span class="token punctuation">;</span>
<span class="token comment">-- 结果：blog.jb51?</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="the-basic-function-of-mysql"><a href="#the-basic-function-of-mysql" class="header-anchor">#</a> The basic function of MySQL</h2> <ol><li>charset(str) 返回字串字符集</li> <li>concat (string2 [,... ]) 连接字串</li> <li>instr (string ,substring ) 返回 substring 首次在 string 中出现的位置,不存在返回 0</li> <li>lcase (string2 ) 转换成小写</li> <li>left (string2 ,length ) 从 string2 中的左边起取 length 个字符</li> <li>length (string ) string 长度</li> <li>load_file (file_name ) 从文件读取内容</li> <li>locate (substring , string [,start_position ] ) 同 instr,但可指定开始位置</li> <li>lpad (string2 ,length ,pad ) 重复用 pad 加在 string 开头,直到字串长度为 length</li> <li>ltrim (string2 ) 去除前端空格</li> <li>repeat (string2 ,count ) 重复 count 次</li> <li>replace (str ,search_str ,replace_str ) 在 str 中用 replace_str 替换 search_str</li> <li>rpad (string2 ,length ,pad) 在 str 后用 pad 补充,直到长度为 length</li> <li>rtrim (string2 ) 去除后端空格</li> <li>strcmp (string1 ,string2 ) 逐字符比较两字串大小,</li> <li>substring (str , position ,[length ]) 从 str 的 position 开始,取 length 个字符</li></ol> <h2 id="alter-table-examples"><a href="#alter-table-examples" class="header-anchor">#</a> ALTER TABLE Examples</h2> <ul><li><a href="https://dev.mysql.com/doc/refman/8.0/en/alter-table-examples.html" target="_blank" rel="noopener noreferrer">ALTER TABLE Examples<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://c.biancheng.net/view/7201.html" target="_blank" rel="noopener noreferrer">MySQL 数据表添加字段（三种方式）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="drop-all-tables-in-mysql"><a href="#drop-all-tables-in-mysql" class="header-anchor">#</a> Drop all tables in MySQL</h2> <ul><li><a href="https://www.databasestar.com/mysql-drop-all-tables/" target="_blank" rel="noopener noreferrer">MySQL Drop All Tables: How-To With Examples<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SET</span> FOREIGN_KEY_CHECKS <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">SET</span> GROUP_CONCAT_MAX_LEN<span class="token operator">=</span><span class="token number">32768</span><span class="token punctuation">;</span>
<span class="token keyword">SET</span> <span class="token variable">@tables</span> <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> GROUP_CONCAT<span class="token punctuation">(</span><span class="token string">'`'</span><span class="token punctuation">,</span> table_name<span class="token punctuation">,</span> <span class="token string">'`'</span><span class="token punctuation">)</span> <span class="token keyword">INTO</span> <span class="token variable">@tables</span>
  <span class="token keyword">FROM</span> information_schema<span class="token punctuation">.</span><span class="token keyword">tables</span>
  <span class="token keyword">WHERE</span> table_schema <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token keyword">DATABASE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> IFNULL<span class="token punctuation">(</span><span class="token variable">@tables</span><span class="token punctuation">,</span><span class="token string">'dummy'</span><span class="token punctuation">)</span> <span class="token keyword">INTO</span> <span class="token variable">@tables</span><span class="token punctuation">;</span>
<span class="token keyword">SET</span> <span class="token variable">@tables</span> <span class="token operator">=</span> CONCAT<span class="token punctuation">(</span><span class="token string">'DROP TABLE IF EXISTS '</span><span class="token punctuation">,</span> <span class="token variable">@tables</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">PREPARE</span> stmt <span class="token keyword">FROM</span> <span class="token variable">@tables</span><span class="token punctuation">;</span>
<span class="token keyword">EXECUTE</span> stmt<span class="token punctuation">;</span>
<span class="token keyword">DEALLOCATE</span> <span class="token keyword">PREPARE</span> stmt<span class="token punctuation">;</span>
<span class="token keyword">SET</span> FOREIGN_KEY_CHECKS <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="call-sql-script-file-from-other-sql-script-file"><a href="#call-sql-script-file-from-other-sql-script-file" class="header-anchor">#</a> Call sql script file from other sql script file</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">use</span> your_db<span class="token punctuation">;</span>
source script<span class="token operator">/</span>create_table<span class="token punctuation">.</span><span class="token keyword">sql</span><span class="token punctuation">;</span>
source script<span class="token operator">/</span>create_job<span class="token punctuation">.</span><span class="token keyword">sql</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="mysql-关键字和保留字"><a href="#mysql-关键字和保留字" class="header-anchor">#</a> Mysql 关键字和保留字</h2> <ul><li><a href="http://www.lvesu.com/blog/main/cms-914.html" target="_blank" rel="noopener noreferrer">Mysql 关键字和保留字 - 版本 5.7<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.docs4dev.com/docs/zh/mysql/5.7/reference/keywords.html" target="_blank" rel="noopener noreferrer">9.3 关键字和保留字<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="datatype-mappings"><a href="#datatype-mappings" class="header-anchor">#</a> Datatype Mappings</h2> <ul><li><a href="https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-type-conversions.html" target="_blank" rel="noopener noreferrer">6.5 Java, JDBC, and MySQL Types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="loop-statement"><a href="#loop-statement" class="header-anchor">#</a> LOOP Statement</h2> <ul><li><a href="https://dev.mysql.com/doc/refman/5.7/en/loop.html" target="_blank" rel="noopener noreferrer">LOOP Statement<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://stackoverflow.com/questions/5817395/how-can-i-loop-through-all-rows-of-a-table-mysql" target="_blank" rel="noopener noreferrer">How can I loop through all rows of a table? (MySQL)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="using-character-sets-and-unicode"><a href="#using-character-sets-and-unicode" class="header-anchor">#</a> Using Character Sets and Unicode</h2> <ul><li><a href="https://dev.mysql.com/doc/refman/8.0/en/charset-unicode-utf8.htmls" target="_blank" rel="noopener noreferrer">The utf8 Character Set (Alias for utf8mb3)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>For Connector/J 8.0.13 and later: When <code>UTF-8</code> is used for <code>characterEncoding</code> in the connection string, it maps to the MySQL character set name <code>utf8mb4</code>. See <a href="https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-charsets.html" target="_blank" rel="noopener noreferrer">detail<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="optimizing-queries-with-explain"><a href="#optimizing-queries-with-explain" class="header-anchor">#</a> Optimizing Queries with EXPLAIN</h2> <ul><li><a href="https://dev.mysql.com/doc/refman/8.0/en/using-explain.html" target="_blank" rel="noopener noreferrer">Optimizing Queries with EXPLAIN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">EXPLAIN</span> <span class="token keyword">SELECT</span> department <span class="token keyword">FROM</span> student s <span class="token keyword">WHERE</span> age <span class="token operator">&gt;=</span> <span class="token number">25</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th>id</th> <th>select_type</th> <th>table</th> <th>partitions</th> <th>type</th> <th>possible_keys</th> <th>key</th> <th>key_len</th> <th>ref</th> <th>rows</th> <th>filtered</th> <th>Extra</th></tr></thead> <tbody><tr><td>1</td> <td>SIMPLE</td> <td>s</td> <td></td> <td>ALL</td> <td></td> <td></td> <td></td> <td></td> <td>6</td> <td>33.33</td> <td>Using where; Using temporary</td></tr></tbody></table> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;EXPLAIN SELECT department FROM student s WHERE age &gt;= 25 GROUP BY department&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;select_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SIMPLE&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;table&quot;</span><span class="token operator">:</span> <span class="token string">&quot;s&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;partitions&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ALL&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;possible_keys&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
      <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
      <span class="token property">&quot;key_len&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
      <span class="token property">&quot;ref&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rows&quot;</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
      <span class="token property">&quot;filtered&quot;</span><span class="token operator">:</span> <span class="token number">33.33</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Extra&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Using where; Using temporary&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="mysql-delimiter"><a href="#mysql-delimiter" class="header-anchor">#</a> MySQL Delimiter</h2> <p>默认情况下，<code>delimiter</code> 是分号<code>;</code>。在命令行客户端中，如果有一行命令以分号结束，
那么回车后，<code>mysql</code> 将会执行该命令。如输入下面的语句</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> \<span class="token operator">*</span> <span class="token keyword">from</span> test_table<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后回车，那么 <code>MySQL</code> 将立即执行该语句。
但有时候，不希望 <code>MySQL</code> 这么做。在为可能输入较多的语句，且语句中包含有分号。
就需要事先把 <code>delimiter</code> 换成其它符号，如<code>//</code>或<code>$$</code>。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">delimiter</span> <span class="token comment">//</span>

<span class="token comment">--用完可以再改回以分号结束.</span>
<span class="token keyword">delimiter</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="mysql-store-procedure"><a href="#mysql-store-procedure" class="header-anchor">#</a> MySQL store procedure</h2> <ul><li><a href="https://stackoverflow.com/questions/26338033/mysql-stored-procedure-print-error-message-and-rollback" target="_blank" rel="noopener noreferrer">mysql stored procedure print error message and rollback<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p>存储过程如同一门程序设计语言，同样包含了数据类型、流程控制、输入和输出和它自己的函数库。</p> <p><a href="https://www.cnblogs.com/cxxjohnson/p/5965194.html" target="_blank" rel="noopener noreferrer">mysql 存储过程语法及实例<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://www.cnblogs.com/chensh04/p/5864695.html" target="_blank" rel="noopener noreferrer">在开发过程中为什么需要写存储过程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="definition"><a href="#definition" class="header-anchor">#</a> Definition</h3> <p>存储过程(<code>Stored Procedure</code>)是一组为了完成特定功能的 <code>SQL</code> 语句集，经编译后存储在数据库中，用户通过指定存储过程的名字并给定参数（如果该存储过程带有参数）来调用执行它。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>经过第一次编译后再次调用不需要再次编译,存储过程是数据库中的一个重要对象</p></div> <p><strong>什么是游标</strong> 在数据库中，游标是一个十分重要的概念。游标提供了一种对从表中检索出的数据进行操作的灵活手段，就本质而言，游标实际上是一种能从包括多条数据记录的结果集中每次提取一条记录的机制。</p> <h3 id="advantages-and-disadvantages"><a href="#advantages-and-disadvantages" class="header-anchor">#</a> Advantages and disadvantages</h3> <ul><li><p>优点</p> <ul><li>存储过程增强了 SQL 语言的功能和灵活性。</li> <li>修改方便,对应用程序源代码没有影响</li> <li>存储过程能实现较快的执行速度。</li> <li>安全性高,可设定只有某些用户才具有对指定存储过程的使用权</li></ul></li> <li><p>缺点</p> <ul><li>可维护性比较差。</li> <li>可读性差。</li></ul></li></ul> <h3 id="basic-grammer"><a href="#basic-grammer" class="header-anchor">#</a> Basic grammer</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">--Myself存储过程创建的格式：CREATE PROCEDURE 过程名 ([过程参数[,...]])[特性 ...] 过程体</span>

<span class="token comment">-- 1.创建存储过程</span>
<span class="token keyword">create</span> <span class="token keyword">procedure</span> sp_name<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
<span class="token comment">-- omitted</span>
<span class="token keyword">end</span>

<span class="token comment">-- 2.调用存储过程</span>
<span class="token keyword">call</span> sp_name<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">--注意：存储过程名称后面必须加括号，哪怕该存储过程没有参数传递</span>

<span class="token comment">-- 3.删除存储过程</span>
<span class="token keyword">drop</span> <span class="token keyword">procedure</span> sp_name

<span class="token comment">-- 注意:不能在一个存储过程中删除另一个存储过程，只能调用另一个存储过程</span>

<span class="token comment">-- 4.其他常用命令</span>
<span class="token comment">-- 1&gt;.show procedure status</span>
<span class="token comment">-- 显示数据库中所有存储的存储过程基本信息，包括所属数据库，存储过程名称，创建时间等</span>

<span class="token comment">-- 2&gt;.show create procedure sp_name</span>
<span class="token comment">-- 显示某一个MySQL存储过程的详细信息</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="variable-definition-and-variable-assignment"><a href="#variable-definition-and-variable-assignment" class="header-anchor">#</a> Variable definition and variable assignment</h3> <ol><li>custom variable</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">declare</span> a <span class="token keyword">int</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> a<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>
<span class="token comment">-- 可用以下语句代替：declare a int default 100;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li>classification of variables</li></ol> <ul><li>user variables</li> <li>system variables(系统变量分为会话和全局级变量)</li></ul> <blockquote><p>注意：用户变量名一般以@开头，滥用用户变量会导致程序难以理解及管理</p></blockquote> <ol start="3"><li>Using user variables in mysql client</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 方式一</span>
<span class="token keyword">SELECT</span> <span class="token string">'Hello World'</span> <span class="token keyword">into</span> <span class="token variable">@x</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token variable">@x</span><span class="token punctuation">;</span>

<span class="token comment">-- 方式二</span>
<span class="token keyword">SET</span> <span class="token variable">@y</span><span class="token operator">=</span><span class="token string">'Goodbye Cruel World'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@y</span><span class="token punctuation">;</span>

<span class="token comment">-- 方式三</span>
<span class="token keyword">SET</span> <span class="token variable">@z</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@z</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol start="4"><li>在存储过程中使用用户变量</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> GreetWorld<span class="token punctuation">(</span> <span class="token punctuation">)</span> <span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span><span class="token variable">@greeting</span><span class="token punctuation">,</span><span class="token string">' World'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SET</span> <span class="token variable">@greeting</span><span class="token operator">=</span><span class="token string">'Hello'</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">CALL</span> GreetWorld<span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="5"><li>在存储过程间传递全局范围的用户变量</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> p1<span class="token punctuation">(</span> <span class="token punctuation">)</span> <span class="token keyword">SET</span> <span class="token variable">@last_procedure</span><span class="token operator">=</span><span class="token string">'p1'</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> p2<span class="token punctuation">(</span> <span class="token punctuation">)</span> <span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span><span class="token string">'Last procedure was '</span><span class="token punctuation">,</span><span class="token variable">@last_procedure</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">CALL</span> p1<span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">CALL</span> p2<span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="mysql-stored-procedure-queries"><a href="#mysql-stored-procedure-queries" class="header-anchor">#</a> MySQL stored procedure queries</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">--看某个数据库下面的存储过程</span>
<span class="token comment">--查询存储过程的名字</span>
<span class="token keyword">select</span> name <span class="token keyword">from</span> mysql<span class="token punctuation">.</span><span class="token keyword">proc</span> <span class="token keyword">where</span> db<span class="token operator">=</span><span class="token string">'employee'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> routine_name
<span class="token keyword">from</span> information_schema<span class="token punctuation">.</span>routines
<span class="token keyword">where</span> routine_schema<span class="token operator">=</span><span class="token string">'employee'</span><span class="token punctuation">;</span>

<span class="token comment">--查看存储过程的结构</span>
<span class="token keyword">show</span> <span class="token keyword">procedure</span> <span class="token keyword">status</span> <span class="token keyword">where</span> db<span class="token operator">=</span><span class="token string">'employee'</span><span class="token punctuation">;</span>

<span class="token comment">--查看存储过程的详细</span>
<span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> employee<span class="token punctuation">.</span>demo_in_parameter<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="do-exercises"><a href="#do-exercises" class="header-anchor">#</a> Do exercises</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">--当更新student表之后,调用存储过程实现把student的数据导入备份表</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> student<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span>
id <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
sex <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
flag <span class="token keyword">tinyint</span> <span class="token keyword">default</span> <span class="token number">0</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">drop</span> <span class="token keyword">table</span> studentbak<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> studentbak<span class="token punctuation">(</span>
id <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
sex <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--存储过程实现1 利用sql语句</span>
<span class="token keyword">create</span> <span class="token keyword">procedure</span> stupro<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> studentbak<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>sex<span class="token punctuation">)</span>
 <span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>sex
<span class="token keyword">from</span> student
<span class="token keyword">where</span> flag<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">update</span> student <span class="token keyword">set</span> flag<span class="token operator">=</span><span class="token number">1</span> <span class="token keyword">where</span> flag<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>

<span class="token comment">--存储过程实现2 利用游标</span>
<span class="token keyword">create</span> <span class="token keyword">procedure</span> promembak<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
<span class="token keyword">declare</span> done <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">/*声明变量来接受数据*/</span>
<span class="token keyword">declare</span> c_id <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> c_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> c_sex <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> c_flag <span class="token keyword">tinyint</span><span class="token punctuation">;</span>

<span class="token comment">/*声明游标*/</span>
<span class="token keyword">declare</span> rs <span class="token keyword">cursor</span> <span class="token keyword">for</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> flag<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">/*游标异常后捕捉，并设置循环使用变量done为1时结果循环*/</span>
<span class="token keyword">declare</span> <span class="token keyword">continue</span> <span class="token keyword">handler</span> <span class="token keyword">for</span> SQLSTATE <span class="token string">'02000'</span> <span class="token keyword">set</span> done<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">/*打开游标*/</span>
<span class="token keyword">open</span> rs<span class="token punctuation">;</span>
<span class="token comment">/*逐个取出当前纪录字段的值*/</span>
<span class="token keyword">fetch</span> <span class="token keyword">next</span> <span class="token keyword">from</span> rs <span class="token keyword">into</span> c_id<span class="token punctuation">,</span>c_name<span class="token punctuation">,</span>c_sex<span class="token punctuation">,</span>c_flag<span class="token punctuation">;</span>

<span class="token comment">/*遍历数据表*/</span>
<span class="token keyword">repeat</span>
   <span class="token comment">/*把数据插入到备份表studentbak*/</span>
   <span class="token keyword">insert</span> <span class="token keyword">into</span> studentbak <span class="token keyword">values</span><span class="token punctuation">(</span>c_id<span class="token punctuation">,</span>c_name<span class="token punctuation">,</span>c_sex<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">/*原表student把flag修改成1(处理完毕)状态*/</span>
   <span class="token keyword">update</span> student <span class="token keyword">set</span> flag<span class="token operator">=</span><span class="token number">1</span> <span class="token keyword">where</span> id<span class="token operator">=</span>c_id<span class="token punctuation">;</span>

   <span class="token comment">/*游标向下移动，取下一条数据*/</span>
   <span class="token keyword">fetch</span> <span class="token keyword">next</span> <span class="token keyword">from</span> rs <span class="token keyword">into</span> c_id<span class="token punctuation">,</span>c_name<span class="token punctuation">,</span>c_sex<span class="token punctuation">,</span>c_flag<span class="token punctuation">;</span>

until done <span class="token keyword">end</span> <span class="token keyword">repeat</span><span class="token punctuation">;</span>

<span class="token comment">/*关闭游标*/</span>
<span class="token keyword">close</span> rs<span class="token punctuation">;</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> visit_statistics_parameter <span class="token punctuation">(</span>
  id <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  sp_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  sp_parameter <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  eventtime <span class="token keyword">timestamp</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> visit_statistics_parameter <span class="token punctuation">(</span>id<span class="token punctuation">,</span> sp_name<span class="token punctuation">,</span> eventtime<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'sp_visit_statistics_benq'</span><span class="token punctuation">,</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> visit_statistics_parameter <span class="token punctuation">(</span>id<span class="token punctuation">,</span> sp_name<span class="token punctuation">,</span> eventtime<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'sp_visit_statistics_dell'</span><span class="token punctuation">,</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">DROP</span> <span class="token keyword">PROCEDURE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> sp_visit_statistics<span class="token punctuation">;</span>

<span class="token keyword">DELIMITER</span> $$
<span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> sp_visit_statistics<span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">BEGIN</span>
    <span class="token keyword">DECLARE</span> v_sp_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">DECLARE</span> v_row_count <span class="token keyword">int</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">DECLARE</span> i <span class="token keyword">int</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">DECLARE</span> <span class="token keyword">CONTINUE</span> <span class="token keyword">HANDLER</span> <span class="token keyword">FOR</span> SQLEXCEPTION
    <span class="token keyword">BEGIN</span>
      <span class="token keyword">SHOW</span> <span class="token keyword">ERRORS</span><span class="token punctuation">;</span>
      <span class="token keyword">SELECT</span> <span class="token string">'SQLException encountered in procedure sp_visit_statistics'</span> <span class="token keyword">AS</span> MESSAGE<span class="token punctuation">;</span>
      <span class="token comment">-- SELECT 'SQLException encountered in procedure sp_visit_statistics' AS '';</span>
      <span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span>
    <span class="token keyword">END</span><span class="token punctuation">;</span>

    <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">INTO</span> v_row_count <span class="token keyword">FROM</span> visit_statistics_parameter<span class="token punctuation">;</span>
    <span class="token keyword">SET</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">WHILE</span> i <span class="token operator">&lt;</span> v_row_count <span class="token keyword">DO</span>
      <span class="token keyword">SELECT</span> sp_name <span class="token keyword">INTO</span> v_sp_name <span class="token keyword">FROM</span> visit_statistics_parameter <span class="token keyword">LIMIT</span> i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">SET</span> <span class="token variable">@sql_str</span> <span class="token operator">=</span> CONCAT<span class="token punctuation">(</span><span class="token string">'CALL '</span><span class="token punctuation">,</span> v_sp_name<span class="token punctuation">,</span> <span class="token string">'()'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">PREPARE</span> stmt <span class="token keyword">FROM</span> <span class="token variable">@sql_str</span><span class="token punctuation">;</span>
      <span class="token keyword">EXECUTE</span> stmt<span class="token punctuation">;</span>
      <span class="token keyword">DEALLOCATE</span> <span class="token keyword">PREPARE</span> stmt<span class="token punctuation">;</span>
      <span class="token keyword">SET</span> i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">END</span> <span class="token keyword">WHILE</span><span class="token punctuation">;</span>
  <span class="token keyword">END</span> $$
<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="the-input-and-output-of-stored-procedure"><a href="#the-input-and-output-of-stored-procedure" class="header-anchor">#</a> The input and output of stored procedure</h3> <ol><li><p>IN 输入参数
表示该参数的值必须在调用存储过程时指定，在存储过程中修改该参数的值不能被返回，为默认值</p></li> <li><p>输出参数
该值可在存储过程内部被改变，并可返回</p></li> <li><p>INOUT 输入输出参数
调用时指定，并且可被改变和返回</p></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">--mysql存储过程的参数用在存储过程的定义，共有三种参数类型,IN,OUT,INOUT</span>
<span class="token comment">--Create procedure|function([[IN |OUT |INOUT ] 参数名 数据类形...])</span>

<span class="token comment">-- 1.IN参数例子：</span>
<span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> sp_demo_in_parameter<span class="token punctuation">(</span><span class="token operator">IN</span> p_in <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
<span class="token keyword">SELECT</span> p_in<span class="token punctuation">;</span> <span class="token comment">--查询输入参数</span>
<span class="token keyword">SET</span> p_in<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">--修改</span>
<span class="token keyword">select</span> p_in<span class="token punctuation">;</span><span class="token comment">--查看修改后的值</span>
<span class="token keyword">END</span><span class="token punctuation">;</span>

<span class="token comment">-- 执行结果:</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">set</span> <span class="token variable">@p_in</span><span class="token operator">=</span><span class="token number">1</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">call</span> sp_demo_in_parameter<span class="token punctuation">(</span><span class="token variable">@p_in</span><span class="token punctuation">)</span>
<span class="token comment">-- Omitted</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token variable">@p_in</span><span class="token punctuation">;</span>
<span class="token comment">-- Omitted</span>

<span class="token comment">-- 以上可以看出，p_in虽然在存储过程中被修改，但并不影响@p_id的值</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 2.OUT参数例子</span>
<span class="token comment">-- 创建:</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> sp_demo_out_parameter<span class="token punctuation">(</span><span class="token keyword">OUT</span> p_out <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
<span class="token keyword">SELECT</span> p_out<span class="token punctuation">;</span><span class="token comment">/*查看输出参数*/</span>
<span class="token keyword">SET</span> p_out<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token comment">/*修改参数值*/</span>
<span class="token keyword">SELECT</span> p_out<span class="token punctuation">;</span><span class="token comment">/*看看有否变化*/</span>
<span class="token keyword">END</span><span class="token punctuation">;</span>

<span class="token comment">-- 执行结果:</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SET</span> <span class="token variable">@p_out</span><span class="token operator">=</span><span class="token number">1</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">CALL</span> sp_demo_out_parameter<span class="token punctuation">(</span><span class="token variable">@p_out</span><span class="token punctuation">)</span>
<span class="token comment">-- omitted</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token variable">@p_out</span><span class="token punctuation">;</span>
<span class="token comment">-- omitted</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 3.INOUT参数例子：</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> sp_demo_inout_parameter<span class="token punctuation">(</span><span class="token keyword">INOUT</span> p_inout <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
<span class="token keyword">SELECT</span> p_inout<span class="token punctuation">;</span>
<span class="token keyword">SET</span> p_inout<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> p_inout<span class="token punctuation">;</span>
<span class="token keyword">END</span><span class="token punctuation">;</span>

<span class="token comment">-- 执行结果：</span>
<span class="token keyword">set</span> <span class="token variable">@p_inout</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">call</span> sp_demo_inout_parameter<span class="token punctuation">(</span><span class="token variable">@p_inout</span><span class="token punctuation">)</span> <span class="token comment">//</span>
<span class="token comment">-- omitted</span>
<span class="token keyword">select</span> <span class="token variable">@p_inout</span><span class="token punctuation">;</span>
<span class="token comment">-- omitted</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="mysql-event-scheduler"><a href="#mysql-event-scheduler" class="header-anchor">#</a> MySQL Event Scheduler</h2> <ul><li><a href="https://dev.mysql.com/doc/refman/8.0/en/events-overview.html" target="_blank" rel="noopener noreferrer">Event Scheduler Overview<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://dev.mysql.com/doc/refman/8.0/en/create-event.html" target="_blank" rel="noopener noreferrer">CREATE EVENT Statement<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h3> <p>Conceptually, this is similar to the idea of the Unix <code>crontab</code> (also known as a “cron job”) or the Windows Task Scheduler.</p> <p>Events are executed by a special event scheduler thread; when we refer to the Event Scheduler, we actually refer to this thread. When running, the event scheduler thread and its current state can be seen by users having the <code>PROCESS</code> privilege in the output of <code>SHOW PROCESSLIST</code>.</p> <p>The global <code>event_scheduler</code> system variable determines whether the Event Scheduler is enabled and running on the server. values are <code>ON</code>, <code>OFF</code> and <code>DISABLED</code>, default value is <code>ON</code>.</p> <p>When the Event Scheduler is ON, the event scheduler thread is listed in the output of <code>SHOW PROCESSLIS</code>T as a daemon process, and its state is represented as shown here:</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">SHOW</span> PROCESSLIST\G
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">1.</span> <span class="token keyword">row</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>
     Id: <span class="token number">1</span>
   <span class="token keyword">User</span>: root
   Host: localhost
     db: <span class="token boolean">NULL</span>
Command: Query
   <span class="token keyword">Time</span>: <span class="token number">0</span>
  State: <span class="token boolean">NULL</span>
   Info: <span class="token keyword">show</span> processlist
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">2.</span> <span class="token keyword">row</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>
     Id: <span class="token number">2</span>
   <span class="token keyword">User</span>: event_scheduler
   Host: localhost
     db: <span class="token boolean">NULL</span>
Command: Daemon
   <span class="token keyword">Time</span>: <span class="token number">3</span>
  State: Waiting <span class="token keyword">for</span> <span class="token keyword">next</span> activation
   Info: <span class="token boolean">NULL</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="toggle-event-scheduler-status"><a href="#toggle-event-scheduler-status" class="header-anchor">#</a> Toggle Event Scheduler status</h3> <p>If the Event Scheduler status has not been set to <code>DISABLED</code>, event_scheduler can be toggled between <code>ON</code> and <code>OFF</code> (using <code>SET</code>). It is also possible to use <code>0</code> for <code>OFF</code>, and <code>1</code> for <code>ON</code> when setting this variable. Thus, any of the following 4 statements can be used in the <strong>mysql client</strong> to turn on the Event Scheduler:</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> event_scheduler <span class="token operator">=</span> <span class="token keyword">ON</span><span class="token punctuation">;</span>
<span class="token keyword">SET</span> @<span class="token variable">@GLOBAL.event_scheduler</span> <span class="token operator">=</span> <span class="token keyword">ON</span><span class="token punctuation">;</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> event_scheduler <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">SET</span> @<span class="token variable">@GLOBAL.event_scheduler</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> event_scheduler <span class="token operator">=</span> <span class="token keyword">OFF</span><span class="token punctuation">;</span>
<span class="token keyword">SET</span> @<span class="token variable">@GLOBAL.event_scheduler</span> <span class="token operator">=</span> <span class="token keyword">OFF</span><span class="token punctuation">;</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> event_scheduler <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">SET</span> @<span class="token variable">@GLOBAL.event_scheduler</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p><strong>Important</strong></p> <p>It is possible to set the Event Scheduler to DISABLED only at server startup. If event_scheduler is ON or OFF, you cannot set it to DISABLED at runtime. Also, if the Event Scheduler is set to DISABLED at startup, you cannot change the value of event_scheduler at runtime.</p></div> <p>To disable the event scheduler, use one of the following two methods:</p> <ul><li>As a command-line option when starting the server:</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>--event-scheduler=DISABLED
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>In the server configuration file (my.cnf, or my.ini on Windows systems), include the line where it can be read by the server (for example, in a <code>[mysqld]</code> section):</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>event_scheduler=DISABLED
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="check-event-scheduler-status-mysql"><a href="#check-event-scheduler-status-mysql" class="header-anchor">#</a> Check event scheduler status mysql</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- select @@global.event_scheduler = 'ON'</span>
<span class="token keyword">SHOW</span> VARIABLES <span class="token keyword">WHERE</span> VARIABLE_NAME <span class="token operator">=</span> <span class="token string">'event_scheduler'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><table><thead><tr><th>Variable_name</th> <th>Value</th></tr></thead> <tbody><tr><td>event_scheduler</td> <td>ON</td></tr></tbody></table> <h3 id="event-syntax"><a href="#event-syntax" class="header-anchor">#</a> Event Syntax</h3> <ul><li><a href="https://dev.mysql.com/doc/refman/8.0/en/events-syntax.html" target="_blank" rel="noopener noreferrer">Event Syntax<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span>
    <span class="token punctuation">[</span><span class="token keyword">DEFINER</span> <span class="token operator">=</span> <span class="token keyword">user</span><span class="token punctuation">]</span>
    EVENT
    <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span>
    event_name
    <span class="token keyword">ON</span> SCHEDULE schedule
    <span class="token punctuation">[</span><span class="token keyword">ON</span> COMPLETION <span class="token punctuation">[</span><span class="token operator">NOT</span><span class="token punctuation">]</span> PRESERVE<span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token keyword">ENABLE</span> <span class="token operator">|</span> <span class="token keyword">DISABLE</span> <span class="token operator">|</span> <span class="token keyword">DISABLE</span> <span class="token keyword">ON</span> SLAVE<span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token keyword">COMMENT</span> <span class="token string">'string'</span><span class="token punctuation">]</span>
    <span class="token keyword">DO</span> event_body<span class="token punctuation">;</span>

schedule: {
    AT <span class="token keyword">timestamp</span> <span class="token punctuation">[</span><span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token keyword">interval</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token operator">|</span> EVERY <span class="token keyword">interval</span>
    <span class="token punctuation">[</span>STARTS <span class="token keyword">timestamp</span> <span class="token punctuation">[</span><span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token keyword">interval</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span>ENDS <span class="token keyword">timestamp</span> <span class="token punctuation">[</span><span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token keyword">interval</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
}

<span class="token keyword">interval</span>:
    quantity {<span class="token keyword">YEAR</span> <span class="token operator">|</span> QUARTER <span class="token operator">|</span> <span class="token keyword">MONTH</span> <span class="token operator">|</span> <span class="token keyword">DAY</span> <span class="token operator">|</span> <span class="token keyword">HOUR</span> <span class="token operator">|</span> <span class="token keyword">MINUTE</span> <span class="token operator">|</span>
              WEEK <span class="token operator">|</span> <span class="token keyword">SECOND</span> <span class="token operator">|</span> YEAR_MONTH <span class="token operator">|</span> DAY_HOUR <span class="token operator">|</span> DAY_MINUTE <span class="token operator">|</span>
              DAY_SECOND <span class="token operator">|</span> HOUR_MINUTE <span class="token operator">|</span> HOUR_SECOND <span class="token operator">|</span> MINUTE_SECOND}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> EVENT e_hourly
    <span class="token keyword">ON</span> SCHEDULE
      EVERY <span class="token number">1</span> <span class="token keyword">HOUR</span>
    <span class="token keyword">COMMENT</span> <span class="token string">'Clears out sessions table each hour.'</span>
    <span class="token keyword">DO</span>
      <span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> site_activity<span class="token punctuation">.</span>sessions<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> EVENT test_event_03
<span class="token keyword">ON</span> SCHEDULE EVERY <span class="token number">1</span> <span class="token keyword">MINUTE</span>
STARTS <span class="token keyword">CURRENT_TIMESTAMP</span>
ENDS <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">HOUR</span>
<span class="token keyword">ON</span> COMPLETION PRESERVE <span class="token comment">-- Do not delete this event after stopping</span>
<span class="token keyword">DO</span>
   <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> messages<span class="token punctuation">(</span>message<span class="token punctuation">,</span>created_at<span class="token punctuation">)</span>
   <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'Test MySQL recurring Event'</span><span class="token punctuation">,</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>There is no way to pass parameters directly to or from events; however, it is possible to invoke a stored routine with parameters within an event:</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- Execute it once, and delete the event immediately after the execution is complete.</span>
<span class="token keyword">CREATE</span> EVENT TEST_EVENT_01
  <span class="token keyword">ON</span> SCHEDULE AT <span class="token keyword">CURRENT_TIMESTAMP</span>
  <span class="token keyword">ON</span> COMPLETION <span class="token operator">NOT</span> PRESERVE <span class="token comment">-- defalut value</span>
  <span class="token keyword">DO</span>
    <span class="token keyword">CALL</span> CITY_SUM<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 每天的凌晨1点执行定时任务</span>
<span class="token keyword">ON</span> SCHEDULE EVERY <span class="token number">1</span> <span class="token keyword">DAY</span> STARTS DATE_ADD<span class="token punctuation">(</span>DATE_ADD<span class="token punctuation">(</span>CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">DAY</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">HOUR</span><span class="token punctuation">)</span>
<span class="token comment">-- 每天的凌晨3点执行定时任务</span>
<span class="token keyword">ON</span> SCHEDULE EVERY <span class="token number">1</span> <span class="token keyword">DAY</span> STARTS DATE_ADD<span class="token punctuation">(</span>DATE_ADD<span class="token punctuation">(</span>CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">DAY</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> <span class="token number">3</span> <span class="token keyword">HOUR</span><span class="token punctuation">)</span>
<span class="token comment">-- 从2022-10-11开始，每天的00:30:00执行定时任务</span>
<span class="token keyword">ON</span> SCHEDULE EVERY <span class="token number">1</span> <span class="token keyword">DAY</span> STARTS <span class="token string">'2022-10-11 00:30:00'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2022-09-22</span>
<span class="token keyword">SELECT</span> DATE_ADD<span class="token punctuation">(</span>CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">DAY</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2022-09-23</span>
<span class="token keyword">SELECT</span> DATE_ADD<span class="token punctuation">(</span>DATE_ADD<span class="token punctuation">(</span>CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">DAY</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">HOUR</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 2022-09-23 01:00:00</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> EVENT e_call_myproc
    <span class="token keyword">ON</span> SCHEDULE
      AT <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">DAY</span>
    <span class="token keyword">DO</span> <span class="token keyword">CALL</span> myproc<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">delimiter</span> <span class="token operator">|</span>

<span class="token keyword">CREATE</span> EVENT e
    <span class="token keyword">ON</span> SCHEDULE
      EVERY <span class="token number">5</span> <span class="token keyword">SECOND</span>
    <span class="token keyword">DO</span>
      <span class="token keyword">BEGIN</span>
        <span class="token keyword">DECLARE</span> v <span class="token keyword">INTEGER</span><span class="token punctuation">;</span>
        <span class="token keyword">DECLARE</span> <span class="token keyword">CONTINUE</span> <span class="token keyword">HANDLER</span> <span class="token keyword">FOR</span> SQLEXCEPTION <span class="token keyword">BEGIN</span> <span class="token keyword">END</span><span class="token punctuation">;</span>

        <span class="token keyword">SET</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">WHILE</span> v <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token keyword">DO</span>
          <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t1 <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">UPDATE</span> t2 <span class="token keyword">SET</span> s1 <span class="token operator">=</span> s1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
          <span class="token keyword">SET</span> v <span class="token operator">=</span> v <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">END</span> <span class="token keyword">WHILE</span><span class="token punctuation">;</span>
    <span class="token keyword">END</span> <span class="token operator">|</span>

<span class="token keyword">delimiter</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="example-01"><a href="#example-01" class="header-anchor">#</a> Example 01</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> TEST_TABLE_01<span class="token punctuation">;</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> TEST_TABLE_02<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> TEST_TABLE_01 <span class="token punctuation">(</span>
	EVENTTIME <span class="token keyword">TIMESTAMP</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">,</span>
	CITY <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> TEST_TABLE_02 <span class="token punctuation">(</span>
	EVENTTIME <span class="token keyword">TIMESTAMP</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">,</span>
	TOTAL <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">COMMENT</span> <span class="token string">'total count'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> TEST_TABLE_01
<span class="token punctuation">(</span>EVENTTIME<span class="token punctuation">,</span> CITY<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">,</span> <span class="token string">'DL'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>在 MySQL 中，默认情况下，存储过程中执行的语句会在存储过程结束时自动提交。这意味着在存储过程中不需要显式调用 <code>COMMIT</code> 命令来提交更改。但是，如果你在存储过程中使用了 <code>START TRANSACTION</code> 命令来启动一个事务，则需要在事务完成后使用 <code>COMMIT</code> 或 <code>ROLLBACK</code> 来明确地提交或回滚更改。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">PROCEDURE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> CITY_SUM<span class="token punctuation">;</span>
<span class="token keyword">DELIMITER</span> $$
<span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> CITY_SUM<span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">BEGIN</span>
		<span class="token keyword">DECLARE</span> total_count <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">INTO</span> total_count <span class="token keyword">FROM</span> TEST_TABLE_01<span class="token punctuation">;</span>
		<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> TEST_TABLE_02 <span class="token punctuation">(</span>EVENTTIME<span class="token punctuation">,</span> TOTAL<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">,</span> total_count<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">-- DELETE FROM mytable WHERE mytimestamp &lt; DATE_SUB(CURDATE(), INTERVAL 1 DAY);</span>
	<span class="token keyword">END</span>$$
<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- SHOW VARIABLES WHERE VARIABLE_NAME = 'event_scheduler'</span>
<span class="token comment">-- SET GLOBAL event_scheduler = ON;</span>

<span class="token keyword">DROP</span> EVENT <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> TEST_EVENT_01<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> EVENT TEST_EVENT_01
<span class="token keyword">ON</span>
SCHEDULE EVERY <span class="token number">1</span> <span class="token keyword">MINUTE</span>
STARTS <span class="token keyword">CURRENT_TIMESTAMP</span>
ENDS <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token operator">+</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">HOUR</span>
<span class="token keyword">DO</span>
	<span class="token keyword">CALL</span> CITY_SUM<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>Check Result</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> variables <span class="token operator">LIKE</span> <span class="token string">'%time_zone%'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;SHOW variables LIKE '%time_zone%'&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;Variable_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;system_time_zone&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;UTC&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;Variable_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;time_zone&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SYSTEM&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> UTC_TIMESTAMP<span class="token punctuation">,</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;SELECT UTC_TIMESTAMP, CURRENT_TIMESTAMP&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;UTC_TIMESTAMP&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2022-10-07 01:56:26&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;CURRENT_TIMESTAMP&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2022-10-07 01:56:26&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- SHOW EVENTS FROM &lt;your_database&gt;;</span>
<span class="token keyword">SHOW</span> EVENTS <span class="token keyword">FROM</span> test_db<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;SHOW EVENTS FROM test_db&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;Db&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test_db&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TEST_EVENT_01&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Definer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;root@%&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Time zone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SYSTEM&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RECURRING&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Execute at&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Interval value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Interval field&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MINUTE&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Starts&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2022-10-07 01:53:50&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Ends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2022-10-07 02:53:50&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ENABLED&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Originator&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;character_set_client&quot;</span><span class="token operator">:</span> <span class="token string">&quot;utf8mb4&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;collation_connection&quot;</span><span class="token operator">:</span> <span class="token string">&quot;utf8mb4_0900_ai_ci&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Database Collation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;utf8mb4_0900_ai_ci&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- SELECT * FROM information_schema.EVENTS;</span>
<span class="token comment">-- SELECT EVENT_SCHEMA, EVENT_NAME, TIME_ZONE, EVENT_DEFINITION, EVENT_TYPE, INTERVAL_FIELD, STARTS, ENDS, STATUS, ON_COMPLETION, CREATED, LAST_ALTERED, LAST_EXECUTED, EVENT_COMMENT, FROM information_schema.EVENTS;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> information_schema<span class="token punctuation">.</span>EVENTS <span class="token keyword">WHERE</span> EVENT_SCHEMA <span class="token operator">=</span> <span class="token string">'test_db'</span> <span class="token operator">AND</span> EVENT_NAME <span class="token operator">=</span> <span class="token string">'TEST_EVENT_01'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;SELECT * FROM information_schema.EVENTS WHERE EVENT_SCHEMA = 'test_db' AND EVENT_NAME = 'TEST_EVENT_01'&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;EVENT_CATALOG&quot;</span><span class="token operator">:</span> <span class="token string">&quot;def&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;EVENT_SCHEMA&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test_db&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;EVENT_NAME&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TEST_EVENT_01&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;DEFINER&quot;</span><span class="token operator">:</span> <span class="token string">&quot;root@%&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;TIME_ZONE&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SYSTEM&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;EVENT_BODY&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SQL&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;EVENT_DEFINITION&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CALL CITY_SUM()&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;EVENT_TYPE&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RECURRING&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;EXECUTE_AT&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
      <span class="token property">&quot;INTERVAL_VALUE&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;INTERVAL_FIELD&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MINUTE&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;SQL_MODE&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;STARTS&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2022-10-07 01:53:50&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;ENDS&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2022-10-07 02:53:50&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;STATUS&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ENABLED&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;ON_COMPLETION&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NOT PRESERVE&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;CREATED&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2022-10-07 01:53:50&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;LAST_ALTERED&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2022-10-07 01:53:50&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;LAST_EXECUTED&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2022-10-07 01:54:50&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;EVENT_COMMENT&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;ORIGINATOR&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;CHARACTER_SET_CLIENT&quot;</span><span class="token operator">:</span> <span class="token string">&quot;utf8mb4&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;COLLATION_CONNECTION&quot;</span><span class="token operator">:</span> <span class="token string">&quot;utf8mb4_0900_ai_ci&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;DATABASE_COLLATION&quot;</span><span class="token operator">:</span> <span class="token string">&quot;utf8mb4_0900_ai_ci&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><ul><li>CHARACTER_SET_CLIENT: The session value of the character_set_client system variable when the event was created.</li> <li>COLLATION_CONNECTION: The session value of the collation_connection system variable when the event was created.</li> <li>DATABASE_COLLATION: The collation of the database with which the event is associated.</li> <li>SQL_MODE: The SQL mode in effect when the event was created or altered, and under which the event executes</li></ul> <p>See details in <a href="https://dev.mysql.com/doc/refman/8.0/en/information-schema-events-table.html" target="_blank" rel="noopener noreferrer">The INFORMATION_SCHEMA EVENTS Table<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=Database" title="标签">#Database</a><a href="/tags/?tag=MySQL" title="标签">#MySQL</a></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/27/2023, 4:43:25 PM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/84cd9c/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">PostgreSQL Basic</div></a> <a href="/pages/f1fcc1/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Database Basic</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/84cd9c/" class="prev">PostgreSQL Basic</a></span> <span class="next"><a href="/pages/f1fcc1/">Database Basic</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/5a9395/"><div>
            Ehcache3 Basic
            <!----></div></a> <span class="date">01-30</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/71d94f/"><div>
            Apache HTTP Client Basic
            <!----></div></a> <span class="date">01-21</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/4a2fe4/"><div>
            Oracle Index
            <!----></div></a> <span class="date">12-27</span></dt></dl> <dl><dd></dd> <dt><a href="/archives" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/dlwxin/wx-notes" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="mailto:dlwxin@outlook.com" title="Email" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2024
    <span>wx | <a href="https://beian.miit.gov.cn" target="_blank">黑ICP备2022000430号</a> | <img src="https://dlwang.xin:11796/image/others/record_icon.png"/><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=23128302000114" target="_blank">黑公网安备 23128302000114号</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d382a226.js" defer></script><script src="/assets/js/2.87a8012a.js" defer></script><script src="/assets/js/68.9ff84d3d.js" defer></script>
  </body>
</html>
