(window.webpackJsonp=window.webpackJsonp||[]).push([[223],{685:function(s,a,t){"use strict";t.r(a);var e=t(18),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"links"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#links"}},[s._v("#")]),s._v(" Links")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://docs.aws.amazon.com/zh_cn/cli/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("AWS Command Line Interface 文档"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://awscli.amazonaws.com/v2/documentation/api/latest/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("AWS CLI Command Reference"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://docs.aws.amazon.com/zh_cn/cli/latest/userguide/cli-usage-alias.html?tag=fsou0c-20",target:"_blank",rel:"noopener noreferrer"}},[s._v("创建和使用 AWS CLI 别名"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://jmespath.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("JMESPath"),t("OutboundLink")],1)])]),s._v(" "),t("h2",{attrs:{id:"command-completion"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#command-completion"}},[s._v("#")]),s._v(" Command completion")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-completion.html?tag=fsou0c-20",target:"_blank",rel:"noopener noreferrer"}},[s._v("Command completion"),t("OutboundLink")],1)])]),s._v(" "),t("h3",{attrs:{id:"configuring-command-completion-on-linux-or-macos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuring-command-completion-on-linux-or-macos"}},[s._v("#")]),s._v(" Configuring command completion on Linux or macOS")]),s._v(" "),t("p",[t("strong",[s._v("1. Confirm the completer's folder is in your path")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" aws_completer\n/usr/local/bin/aws_completer\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("strong",[s._v("2. Enable command completion")])]),s._v(" "),t("ul",[t("li",[t("strong",[t("code",[s._v("bash")])]),s._v(" – Use the built-in command "),t("code",[s._v("complete")]),s._v(".")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ complete -C "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/usr/local/bin/aws_completer'")]),s._v(" aws\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("Add the previous command to "),t("code",[s._v("~/.bashrc")]),s._v(" to run it each time you open a new shell. Your "),t("code",[s._v("~/.bash_profile")]),s._v(" should source "),t("code",[s._v("~/.bashrc")]),s._v(" to ensure that the command is also run in login shells.")]),s._v(" "),t("ul",[t("li",[t("strong",[t("code",[s._v("zsh")])]),s._v(" – To run command completion, you need to run "),t("code",[s._v("bashcompinit")]),s._v(" by adding the following autoload line at the end of your "),t("code",[s._v("~/.zshrc")]),s._v(" profile script.")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ autoload bashcompinit "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" bashcompinit\n$ autoload -Uz compinit "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" compinit\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("To enable command completion, use the built-in command "),t("code",[s._v("complete")]),s._v(".")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ complete -C "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/usr/local/bin/aws_completer'")]),s._v(" aws\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("Add the previous commands to "),t("code",[s._v("~/.zshrc")]),s._v(" to run it each time you open a new shell.")]),s._v(" "),t("h2",{attrs:{id:"using-credentials-for-amazon-ec2-instance-metadata"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#using-credentials-for-amazon-ec2-instance-metadata"}},[s._v("#")]),s._v(" Using credentials for Amazon EC2 instance metadata")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-metadata.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Using credentials for Amazon EC2 instance metadata"),t("OutboundLink")],1)])]),s._v(" "),t("p",[s._v("从 Amazon Elastic Compute Cloud (Amazon EC2) 实例中运行 AWS CLI 时，可以简化向命令提供凭证的过程。"),t("strong",[s._v("每个 Amazon EC2 实例都包含 AWS CLI 能够直接查询临时凭证的元数据。向实例附加 IAM 角色后，AWS CLI 可以自动并且安全地从实例元数据检索凭证。")])]),s._v(" "),t("h2",{attrs:{id:"aws-sts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aws-sts"}},[s._v("#")]),s._v(" aws sts")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Get the account ID")]),s._v("\n$ aws sts get-caller-identity\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"UserId"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AIDAZ2KY389T63FOL9LIB"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Account"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"963089995269"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Arn"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"arn:aws:iam::963089995269:user/admin"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# To assume a role")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The output of the command contains an access key, secret key, and session token that you can use to authenticate to AWS")]),s._v("\naws sts assume-role --role-arn arn:aws:iam::123456789012:role/xaccounts3access --role-session-name s3-access-example\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DEPLOYMENT_ROLE_ARN")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"arn:aws:iam::123456789012:role/deployment-test"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("OUTPUT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"assume-role-output.json"')]),s._v("\naws sts assume-role --role-arn "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DEPLOYMENT_ROLE_ARN")]),s._v(" --role-session-name deployment-test-bootstrap "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$OUTPUT")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("AWS_ACCESS_KEY_ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" $OUTPUT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq -r "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.Credentials'")]),s._v("'.AccessKeyId'"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("AWS_SECRET_ACCESS_KEY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" $OUTPUT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq -r "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.Credentials'")]),s._v("'.SecretAccessKey'"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("AWS_SESSION_TOKEN")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" $OUTPUT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq -r "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.Credentials'")]),s._v("'.SessionToken'"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h2",{attrs:{id:"aws-configure"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aws-configure"}},[s._v("#")]),s._v(" aws configure")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# AWS CLI 使用 default 配置文件。您可以通过指定 --profile 选项并指定名称来创建和使用具有不同的凭证和设置的其他命名配置文件。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 要更新这些设置，请再次运行 aws configure")]),s._v("\n$ aws configure\nAWS Access Key ID "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("None"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": AKIAI44QH8DHBEXAMPLE\nAWS Secret Access Key "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("None"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": je7MtGbClwBF/2Zp9Utk/h3yCo8nvbEXAMPLEKEY\nDefault region name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("None"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": ap-northeast-1\nDefault output "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("format")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("None"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(": json\n\n$ aws configure get region\nap-northeast-1\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个名为 produser 的配置文件")]),s._v("\n$ aws configure --profile produser\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以指定 --profile profilename 并使用按该名称存储的凭证和设置。")]),s._v("\n$ aws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" --profile produser\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-07-16 00:24:11 cdk-hnb659fds-assets-963089995269-ap-northeast-1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("h2",{attrs:{id:"aws-iam"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aws-iam"}},[s._v("#")]),s._v(" aws iam")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# lists the aliases for the current account")]),s._v("\naws iam list-account-aliases\naws iam list-account-aliases "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("\naws iam list-account-aliases "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"region: '),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("aws configure get region"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REGION_NAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("aws configure get region"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Account Aliases: '),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("aws iam list-account-aliases --output text "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cut")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Current AWS Region: '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$REGION_NAME")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Region Display Name: '),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("aws lightsail get-regions --query "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"regions[?name=='"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$REGION_NAME")]),s._v("'].displayName\"")]),s._v(" --output text "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v("\n\naws iam get-account-summary\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h2",{attrs:{id:"aws-adfs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aws-adfs"}},[s._v("#")]),s._v(" aws adfs")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/venth/aws-adfs",target:"_blank",rel:"noopener noreferrer"}},[s._v("aws-adfs"),t("OutboundLink")],1)])]),s._v(" "),t("p",[s._v("Note:")]),s._v(" "),t("ol",[t("li",[s._v("Need to install aws cli, can download with pip or from offical website")]),s._v(" "),t("li",[s._v("Need to install Python, this cli tool depends on Python env")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Please note, that you need to add $HOME/.local/bin to your PATH")]),s._v("\npip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" aws-adfs\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("If aws-adfs command not found, refer solution below.")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://stackoverflow.com/questions/23332147/awscli-not-added-to-path-after-installation",target:"_blank",rel:"noopener noreferrer"}},[s._v("awscli not added to path after installation with pip"),t("OutboundLink")],1)])]),s._v(" "),t("blockquote",[t("p",[s._v("The solution was to add "),t("code",[s._v("/Library/Frameworks/Python.framework/Versions/3.10/bin")]),s._v(" to the my PATH.")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("aws-adfs login --adfs-host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("your-adfs-hostname\naws-adfs login --adfs-host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("adfs.example.com --region"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("us-east-1 --role-arn"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("arn:aws:iam::1234567891234:role/example-role --session-duration"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("36000")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"aws-s3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aws-s3"}},[s._v("#")]),s._v(" aws s3")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# List S3 objects and common prefixes under a prefix or all S3 buckets.")]),s._v("\naws s3 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v("\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-07-16 00:24:11 cdk-hnb659fds-assets-675047795269-ap-northeast-1\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" s3://mybucket\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" s3://mybucket/sit/\n\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" s3://mybucket --recursive\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Turn on debug logging.")]),s._v("\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" --debug\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --human-readable (boolean) Displays file sizes in human readable format.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --summarize (boolean) Displays summary information (number of objects,total size).")]),s._v("\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" --human-readable --summarize s3://mybucket\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Creates an S3 bucket")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# aws s3 mb s3://<bucketname>")]),s._v("\naws s3 mb s3://wx-test-bucket\nmake_bucket: wx-test-bucket\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# specify a region")]),s._v("\naws s3 mb s3://mybucket --region us-west-1\naws s3 mb s3://mybucket --region ap-northeast-1\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Copies a local file or S3 object to another location locally or in S3.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Copying a single file to S3")]),s._v("\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" test.txt s3://mybucket/test2.txt\n\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" test.txt s3://mybucket/test/\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# equals")]),s._v("\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" test.txt s3://mybucket/test/test.txt\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Copying a file from S3 to S3")]),s._v("\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" s3://mybucket/test.txt s3://mybucket/test2.txt\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" s3://mybucket/ s3://mybucket2/ --recursive --exclude "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"another/*"')]),s._v("\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" s3://mybucket/logs/ s3://mybucket2/logs/ --recursive --exclude "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),s._v(" --include "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.log"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Downloading a file from S3 to local")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Copying an S3 object to a local file")]),s._v("\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" s3://mybucket/test.txt "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" s3://mybucket/test.txt test2.txt\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Recursively copying S3 objects to a local directory")]),s._v("\n aws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" s3://mybucket "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" --recursive\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Syncs directories and S3 prefixes. Recursively copies new and updated files from the source directory to the destination. Only creates folders in the")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# destination if they contain one or more files.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uploading the local files to s3")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sync 是增量上传或备份")]),s._v("\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" s3://mybucket\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),s._v(" ./ s3://mybucket\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),s._v(" s3://mybucket s3://mybucket2\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Deletes an S3 object")]),s._v("\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" s3://mybucket/test2.txt\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" s3://mybucket --recursive\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" s3://mybucket/ --recursive --exclude "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.jpg"')]),s._v("\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" s3://mybucket/ --recursive --exclude "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"another/*"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Deleting an object from an S3 access point")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Deletes a single object (mykey) from the access point (myaccesspoint)")]),s._v("\naws s3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" s3://arn:aws:s3:us-west-2:123456789012:accesspoint/myaccesspoint/mykey\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Deletes an S3 bucket.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果存储桶没有启用版本控制，则可以使用 AWS CLI 删除包含对象的存储桶。当您删除一个包含对象的存储桶时，该存储桶中的所有对象都将被永久删除，包括已转换为 S3 Glacier 存储类的对象。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果存储桶未启用版本控制，则可将 rb（删除存储桶）AWS CLI 命令和 --force 参数结合使用来删除存储桶及其中的所有对象。此命令将先删除所有对象，然后再删除存储桶。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果启用了版本控制，则不会在此过程中删除版本控制对象，这将导致存储桶删除失败，因为存储桶不能为空。")]),s._v("\naws s3 rb s3://mybucket\naws s3 rb s3://mybucket --force\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br")])]),t("h2",{attrs:{id:"aws-s3api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aws-s3api"}},[s._v("#")]),s._v(" aws s3api")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.learnaws.org/2022/07/07/aws-s3-s3api/",target:"_blank",rel:"noopener noreferrer"}},[s._v("AWS CLI: s3 vs s3api"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://awscli.amazonaws.com/v2/documentation/api/latest/reference/s3api/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("s3api"),t("OutboundLink")],1)])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Returns a list of all buckets owned by the authenticated sender of the request.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# To use this operation, you must have the s3:ListAllMyBuckets permission.")]),s._v("\naws s3api list-buckets\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Returns some or all (up to 1,000) of the objects in a bucket with each request.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# By default, the output returns a LastModified field for every object in the response")]),s._v("\naws s3api list-objects-v2 --bucket "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("bucket-name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\naws s3api list-objects-v2 --bucket "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("bucket-name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --prefix my/subfolder\naws s3api list-objects-v2 --bucket "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("bucket-name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --prefix my/subfolder/\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# List bucket contents by last modified date")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Filter objects on certain date")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The query language is based on JMESPath")]),s._v("\naws s3api list-objects-v2 --bucket my-bucket  --query "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Contents[?contains(LastModified, `2022-01-01`)].Key'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Filter objects after certain date")]),s._v("\naws s3api list-objects-v2 --bucket my-bucket  --query "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Contents[?LastModified>`2022-01-01`].Key'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The HEAD action retrieves metadata from an object without returning the object itself.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This action is useful if you’re only interested in an object’s metadata.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# To use HEAD, you must have READ access to the object.")]),s._v("\naws s3api head-object --bucket my-bucket --key index.html\naws s3api head-object --bucket my-bucket --key index.html --query "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Metadata.\"codepipeline-artifact-revision-summary\"'")]),s._v(" --output text\naws s3api head-object --bucket my-bucket --key index.html --query "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Metadata.\"commit-id\"'")]),s._v(" --output text\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("h2",{attrs:{id:"aws-codebuild"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aws-codebuild"}},[s._v("#")]),s._v(" aws codebuild")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("aws codebuild create-project --generate-cli-skeleton\naws codebuild create-project --generate-cli-skeleton "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("create-project.json\n\naws codebuild create-project --cli-input-json file://create-project.json\n\naws codebuild start-build --project-name project-name\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# id 值可以通过 `aws codebuild start-build --project-name` 获取")]),s._v("\naws codebuild batch-get-builds --ids "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The variable CODEBUILD_SOURCE_VERSION provided by AWS CodeBuild")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CODEBUILD_SOURCE_BUCKET")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("CODEBUILD_SOURCE_VERSION"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#\"arn:aws:s3:::\"} | cut -d '/' -f 1")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CODEBUILD_SOURCE_KEY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${CODEBUILD_SOURCE_VERSION"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v('"arn'),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("aws"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("s3"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("$CODEBUILD_SOURCE_BUCKET"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v('"}')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REVISION_SUMMARY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("aws s3api head-object --bucket $CODEBUILD_SOURCE_BUCKET --key $CODEBUILD_SOURCE_KEY --query "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Metadata.\"codepipeline-artifact-revision-summary\"'")]),s._v(" --output text"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("COMMIT_ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" $REVISION_SUMMARY "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cut")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("' '")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h2",{attrs:{id:"aws-ecr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aws-ecr"}},[s._v("#")]),s._v(" aws ecr")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("aws ecr get-login-password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" docker login --username "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("your-username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" --password-stdin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("aws-ecr-repo-url"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\ndocker login -u AWS -p "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("aws ecr get-login-password --region REGION"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" aws_account_id.dkr.ecr.REGION.amazonaws.com\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Creates a repository.")]),s._v("\naws ecr create-repository --repository-name sample-repo\naws ecr create-repository --repository-name sample-repo --region region-name\naws ecr create-repository --repository-name sample-repo image-scanning-configuration "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("scanOnPush")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Deletes a list of specified images within a repository.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Images are specified with either an imageTag or imageDigest.")]),s._v("\naws ecr batch-delete-image --repository-name ubuntu image-ids "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("imageTag")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("precise\n\naws ecr delete-repository --repository-name hello-repository --region region --force\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h2",{attrs:{id:"aws-ec2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aws-ec2"}},[s._v("#")]),s._v(" aws ec2")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Query for all images created after April 1st, 2022")]),s._v("\naws ec2 describe-images --query "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Images[?CreationDate>=`2022-04-01`][]'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"aws-ssm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aws-ssm"}},[s._v("#")]),s._v(" aws ssm")]),s._v(" "),t("p",[s._v("To search for an SSM document"),t("br"),s._v("\nOpen the AWS Systems Manager console at "),t("a",{attrs:{href:"https://console.aws.amazon.com/systems-manager/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://console.aws.amazon.com/systems-manager/"),t("OutboundLink")],1),s._v("."),t("br"),s._v("\nIn the navigation pane, choose Documents.")]),s._v(" "),t("h3",{attrs:{id:"start-session"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#start-session"}},[s._v("#")]),s._v(" start-session")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("aws ssm start-session --target instance-id\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Starting a session (port forwarding)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Windows")]),s._v("\naws ssm start-session --target instance-id --document-name AWS-StartPortForwardingSession --parameters "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("portNumber")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3389")]),s._v(",localPortNumber"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56789")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Linux")]),s._v("\naws ssm start-session --target instance-id --document-name AWS-StartPortForwardingSession --parameters "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"portNumber":["80"], "localPortNumber":["56789"]}\'')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Starting a session (port forwarding to remote host)")]),s._v("\naws ssm start-session "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --target instance-id "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --document-name AWS-StartPortForwardingSessionToRemoteHost "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --parameters "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("host")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mydb.example.us-east-2.rds.amazonaws.com"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("portNumber")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1521"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("localPortNumber")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1521"')]),s._v("\n\naws ssm start-session "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --target instance-id "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --document-name AWS-StartPortForwardingSessionToRemoteHost "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --parameters "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"host":["mydb.example.us-east-2.rds.amazonaws.com"],"portNumber":["3306"], "localPortNumber":["3306"]}\'')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Start session")]),s._v("\naws ssm start-session --target "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$instance_id")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --document-name AWS-StartPortForwardingSession "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --parameters "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"portNumber":["XXXX"], "localPortNumber":["XXXX"]}\'')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Immediately get the session-id, sessions ordered by StartDate descending")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("my_identity")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("aws sts get-caller-identity --query "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Arn'")]),s._v(" --output text"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("session_id")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("aws ssm describe-sessions --state "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Active"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --filters "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key=Owner,value='),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$my_identity")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key=Target,value='),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$instance_id")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key=Status,value=Connected"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --query 'Sessions"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("SessionId:SessionId,StartDate:StartDate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" reverse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sort_by"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("@, "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("StartDate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".SessionId' --output text"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Terminate session")]),s._v("\naws ssm terminate-session --session-id "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$session_id")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br")])]),t("h3",{attrs:{id:"send-command"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#send-command"}},[s._v("#")]),s._v(" send-command")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://docs.aws.amazon.com/systems-manager/latest/userguide/walkthrough-cli.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Walkthrough: Use the AWS CLI with Run Command"),t("OutboundLink")],1)])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --targets")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Supported formats include the following.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   Key=InstanceIds,Values=<instance-id-1>,<instance-id-2>,<instance-id-3>")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   Key=tag:<my-tag-key>,Values=<my-tag-value-1>,<my-tag-value-2>")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   Key=tag-key,Values=<my-tag-key-1>,<my-tag-key-2>")]),s._v("\n\naws ssm send-command "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --document-name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AWS-RunPowerShellScript"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --targets "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Key")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("tag:Env,Values"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Dev,Test "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --parameters "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("commands")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo helloWorld"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\naws ssm send-command --profile "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${env"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("profile}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --document-name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AWS-RunPowerShellScript"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --targets "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Key")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("tag:Env,Values"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Dev,Test "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --parameters "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("workingDirectory")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"'C:"),t("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),t("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),t("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),t("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v("'\"")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("commands")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mkdir myapp -ea,\\\n    cd myapp,\\\n    Read-S3Object -BucketName mybucket -Key '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${env"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("myaccount}")]),s._v(" -File myFile -Region "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${env"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("region}")]),s._v(",\\\n    sleep 50,\\\n    cd release-note,\\\n    ."),t("span",{pre:!0,attrs:{class:"token entity",title:"\\\\"}},[s._v("\\\\")]),s._v('deploy.ps1,\\\n    sleep 60"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sh_command_id")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("aws ssm send-command "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --instance-ids "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"instance-ID"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --document-name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AWS-RunShellScript"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --comment "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Demo run shell script on Linux Instances"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --parameters "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("commands")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'python -V'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --output text --query "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Command.CommandId"')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" -c "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'aws ssm list-command-invocations \\\n    --command-id "$sh_command_id" \\\n    --details \\\n    --query "CommandInvocations[].CommandPlugins[].{Status:Status,Output:Output}"\'')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br")])]),t("h2",{attrs:{id:"aws-secretsmanager"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aws-secretsmanager"}},[s._v("#")]),s._v(" aws secretsmanager")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("aws secretsmanager get-secret-value --secret-id MyTestSecret\naws secretsmanager get-secret-value --secret-id MyTestSecret --query SecretString --output text\naws secretsmanager get-secret-value --secret-id MyTestSecret --query SecretString --output text "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq -r .tls_crt "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" base64 --decode\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"aws-lightsail"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aws-lightsail"}},[s._v("#")]),s._v(" aws lightsail")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# To view the Region name using the AWS CLI")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用 get-regions 命令，描述指定区域的名称。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REGION_NAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ap-northeast-1\naws lightsail get-regions --query "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"regions[?name=='"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$REGION_NAME")]),s._v("'].displayName\"")]),s._v(" --output text\naws lightsail get-regions --query "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"regions[?name=='"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$REGION_NAME")]),s._v("'].displayName\"")]),s._v(" --output text "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("\nTokyo\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"others"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#others"}},[s._v("#")]),s._v(" Others")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("aws --version\naws-cli/2.4.25 Python/3.8.8 Linux/5.4.0-92-generic exe/x86_64.ubuntu.20 prompt/off\n\naws "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);