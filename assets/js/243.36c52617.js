(window.webpackJsonp=window.webpackJsonp||[]).push([[243],{704:function(s,a,t){"use strict";t.r(a);var e=t(18),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"links"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#links"}},[s._v("#")]),s._v(" Links")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://docs.konghq.com/gateway/latest/admin-api/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Admin API"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://docs.konghq.com/api/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Welcome to Kong API Specs"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://docs.konghq.com/gateway/api/admin-oss/latest/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gateway Admin - OSS (Beta)"),t("OutboundLink")],1),s._v(" "),t("strong",[s._v("Useful Link")])]),s._v(" "),t("li",[t("a",{attrs:{href:"https://docs.konghq.com/gateway/api/admin-ee/latest",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gateway Admin - EE (Beta)"),t("OutboundLink")],1),s._v(" "),t("strong",[s._v("Useful Link")])])]),s._v(" "),t("h2",{attrs:{id:"host"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#host"}},[s._v("#")]),s._v(" Host")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Local")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("KONG_API_HOST")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://localhost:8001\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"workspace-object"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#workspace-object"}},[s._v("#")]),s._v(" Workspace Object")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://docs.konghq.com/gateway/api/admin-ee/latest/#/Workspaces",target:"_blank",rel:"noopener noreferrer"}},[s._v("Workspaces API reference"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://docs.konghq.com/gateway/latest/kong-enterprise/workspaces/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Workspace Examples"),t("OutboundLink")],1)])]),s._v(" "),t("h3",{attrs:{id:"list-all-workspaces"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#list-all-workspaces"}},[s._v("#")]),s._v(" List all Workspaces")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -i -X GET "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$KONG_API_HOST")]),s._v("/workspaces\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"service-object"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#service-object"}},[s._v("#")]),s._v(" Service Object")]),s._v(" "),t("h3",{attrs:{id:"add-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#add-service"}},[s._v("#")]),s._v(" Add Service")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$KONG_API_HOST")]),s._v("/services "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-H "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Content-Type: application/json'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{\n  "name": "my-service",\n  "url": "http://mockbin.org"\n}\'')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"fetch-a-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fetch-a-service"}},[s._v("#")]),s._v(" Fetch a service")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$KONG_API_HOST")]),s._v("/services/my-service\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"fetch-services"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fetch-services"}},[s._v("#")]),s._v(" Fetch services")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$KONG_API_HOST")]),s._v("/services "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"list-all-services-in-a-workspace"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#list-all-services-in-a-workspace"}},[s._v("#")]),s._v(" List all Services in a workspace")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WORKSPACE_NAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$KONG_API_HOST")]),s._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$WORKSPACE_NAME")]),s._v("/services\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"plugins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plugins"}},[s._v("#")]),s._v(" Plugins")]),s._v(" "),t("h3",{attrs:{id:"list-all-plugins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#list-all-plugins"}},[s._v("#")]),s._v(" List all Plugins")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -s "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$KONG_API_HOST")]),s._v("/plugins?size"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -s "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$KONG_API_HOST")]),s._v("/plugins?size"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.data[] | {name, id}'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rate-limiting"')]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"b8c57a02-83b8-4e87-ba0c-f02f3bec98b3"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -s "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$KONG_API_HOST")]),s._v("/plugins?size"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.data[] | .name, .id'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rate-limiting"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"b8c57a02-83b8-4e87-ba0c-f02f3bec98b3"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -s "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$KONG_API_HOST")]),s._v("/plugins?size"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.data[] | {(.name): .id}'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rate-limiting"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"b8c57a02-83b8-4e87-ba0c-f02f3bec98b3"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  会对 data 数组中的每个元素应用 map 操作,构造成一个包含所有 plugin name-id 对的 map 数组")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -s "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$KONG_API_HOST")]),s._v("/plugins?size"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.data | map({(.name): .id})'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rate-limiting"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"b8c57a02-83b8-4e87-ba0c-f02f3bec98b3"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Kong stores plugin information in its database. You can query the plugins table directly to get the id.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# For example in Postgres:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# SELECT id FROM plugins WHERE name = '{plugin name}';")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br")])]),t("h3",{attrs:{id:"disable-the-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#disable-the-plugin"}},[s._v("#")]),s._v(" Disable the plugin")]),s._v(" "),t("p",[s._v("For example: Use the plugin ID to "),t("code",[s._v("PATCH")]),s._v(" the "),t("code",[s._v("enabled")]),s._v(" field on the installed Key Authentication plugin.")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PLUGIN_ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -s $KONG_API_HOST/plugins?size"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" jq -r "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.data[] | select(.name == \"key-auth\") | .id'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -X PATCH "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$KONG_API_HOST")]),s._v("/plugins/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PLUGIN_ID")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --data "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);