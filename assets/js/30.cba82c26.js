(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{498:function(s,t,n){"use strict";n.r(t);var a=n(18),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"links"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#links"}},[s._v("#")]),s._v(" Links")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://docs.python.org/3/library/logging.html#logrecord-attributes",target:"_blank",rel:"noopener noreferrer"}},[s._v(" Python logging module/LogRecord attributes"),n("OutboundLink")],1)])]),s._v(" "),n("h2",{attrs:{id:"parsing-json-with-python-in-command-line"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#parsing-json-with-python-in-command-line"}},[s._v("#")]),s._v(" Parsing JSON with python in command line")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("json_string")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{ "foo": { "bar": { "baz": 123 } } }\'')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Python 3")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$json_string")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" python -c "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"import sys, json; print(json.load(sys.stdin)['foo'])\"")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# {'bar': {'baz': 123}}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"hostname":"test","domainname":"example.com"}\'')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" python -c "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'import json,sys;obj=json.load(sys.stdin);print(obj[\"hostname\"])'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Python 2")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PYTHONIOENCODING")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$json_string")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" python -c "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"import sys, json; print json.load(sys.stdin)['foo']\"")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" manifest.json "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" python -c "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"import sys, json; print json.load(sys.stdin)['source']\"")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h2",{attrs:{id:"zip-file-with-python-in-command-line"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#zip-file-with-python-in-command-line"}},[s._v("#")]),s._v(" Zip file with python in command line")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("manifest_file")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("manifest.json\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("manifest_zip_file")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("manifest.zip\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("manifest_json_string")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"name": "My App", "version" : 1.0}\'')]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 格式化 JSON 字符串写入到文件中")]),s._v("\npython -c "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"import os, json; \\\nf = open(os.environ['manifest_file'],'w'); \\\nf.write(json.dumps(json.loads(os.environ['manifest_json_string']), indent = 2)); \\\nf.close()\"")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ### zipfile ###")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 压缩文件")]),s._v("\npython -c "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"import os, zipfile; zf = zipfile.ZipFile(os.environ['manifest_zip_file'], 'w'); zf.write(os.environ['manifest_file']); zf.close()\"")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压文件")]),s._v("\npython -c "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"import os, zipfile, os; zf = zipfile.ZipFile(os.environ['manifest_zip_file']); zf.extractall(); zf.close()\"")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ### shutil 模块的 make_archive() ###")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - 第一个参数:压缩文件名,不包含扩展名")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - 第二个参数:'gztar' 表示 gzip 压缩的 tar 格式")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - 第三个参数:要压缩的文件夹路径")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 压缩文件夹")]),s._v("\npython -c "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"import shutil; shutil.make_archive('folder_name', 'gztar', 'path/to/folder')\"")]),s._v("\npython -c "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"import shutil; shutil.make_archive('source', 'zip', 'source')\"")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# source.zip")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 第一个参数是压缩文件名,第二个参数是解压到的目录")]),s._v("\npython -c "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"import shutil; shutil.unpack_archive('source.zip', extract_dir='path/to/extract') \"")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br")])]),n("h2",{attrs:{id:"connect-to-oracle-database"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#connect-to-oracle-database"}},[s._v("#")]),s._v(" Connect to Oracle Database")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://stackoverflow.com/questions/69165050/python-dpi-1047-cannot-locate-dlopenlibclntsh-dylib-on-macos",target:"_blank",rel:"noopener noreferrer"}},[s._v('Python "DPI-1047 Cannot locate dlopen(libclntsh.dylib)" on macOS'),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://python-oracledb.readthedocs.io/en/latest/user_guide/installation.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Installing python-oracledb"),n("OutboundLink")],1)])]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("pip "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" oracledb\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# python -m pip install oracledb")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" oracledb\n\nconnection "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" oracledb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("connect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'scott'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" password"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mypw'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dsn"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost:1521/oraclepdb1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" connection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cursor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" cursor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  sql "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""select sysdate from dual"""')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" row "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" cursor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("execute"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("row"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);