(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{628:function(e,n,s){"use strict";s.r(n);var a=s(18),t=Object(a.a)({},(function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h2",{attrs:{id:"links"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#links"}},[e._v("#")]),e._v(" Links")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.jenkins.io/doc/pipeline/steps/kubernetes/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Kubernetes plugin"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://plugins.jenkins.io/kubernetes",target:"_blank",rel:"noopener noreferrer"}},[e._v("Kubernetes plugin for Jenkins"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/jenkins-zh/jenkins-zh/issues/424",target:"_blank",rel:"noopener noreferrer"}},[e._v("[教程大纲] Kubernetes 动态节点"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://www.jenkins.io/zh/blog/2018/09/14/kubernetes-and-secret-agents/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Jenkins 和 Kubernetes -云上的神秘代理"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.cn/post/6963466680613896206",target:"_blank",rel:"noopener noreferrer"}},[e._v("Jenkins+k8s 实现自动化部署"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/jenkinsci/kubernetes-plugin/tree/master/examples",target:"_blank",rel:"noopener noreferrer"}},[e._v("Kubernetes plugin Pipeline examples"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://www.cnblogs.com/yanxinjiang/p/12108118.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("linux 运维、架构之路-K8s 中部署 Jenkins 集群高可用"),s("OutboundLink")],1)])]),e._v(" "),s("h2",{attrs:{id:"overview"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),s("p",[e._v("Jenkins plugin to run dynamic agents in a Kubernetes cluster. The plugin creates a Kubernetes Pod for each agent started, and stops it after each build. The Kubernetes plugin allocates Jenkins agents in Kubernetes pods. Within these pods, there is always one special container "),s("code",[e._v("jnlp")]),e._v(" that is running the Jenkins agent. (The "),s("code",[e._v("jnlp")]),e._v(" name is historical and is retained for compatibility.)")]),e._v(" "),s("h2",{attrs:{id:"prerequisites"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[e._v("#")]),e._v(" Prerequisites")]),e._v(" "),s("ul",[s("li",[e._v("A running Kubernetes cluster 1.14 or later. For OpenShift users, this means OpenShift Container Platform 4.x.")]),e._v(" "),s("li",[e._v("A Jenkins instance installed")]),e._v(" "),s("li",[e._v("The Jenkins Kubernetes plugin named "),s("code",[e._v("Kubernetes")]),e._v(" installed")]),e._v(" "),s("li",[e._v("A ServiceAccount with sufficient privileges ("),s("a",{attrs:{href:"https://github.com/jenkinsci/kubernetes-plugin/blob/master/src/main/kubernetes/service-account.yml",target:"_blank",rel:"noopener noreferrer"}},[e._v("example"),s("OutboundLink")],1),e._v(")")])]),e._v(" "),s("h3",{attrs:{id:"k8s-manifest"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#k8s-manifest"}},[e._v("#")]),e._v(" k8s manifest")]),e._v(" "),s("blockquote",[s("p",[e._v("Optional: specify a namespace like "),s("code",[e._v("jenkins")]),e._v(", Default namespace: "),s("code",[e._v("default")])])]),e._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<<")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("EOF"),s("span",{pre:!0,attrs:{class:"token bash punctuation"}},[e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" kubectl apply -f -")]),e._v('\n---\napiVersion: v1\nkind: Namespace\nmetadata:\n   name: jenkins\n\n---\napiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: jenkins\n  namespace: jenkins\n\n---\nkind: Role\napiVersion: rbac.authorization.k8s.io/v1\nmetadata:\n  name: jenkins\n  namespace: jenkins\nrules:\n- apiGroups: [""]\n  resources: ["pods"]\n  verbs: ["create","delete","get","list","patch","update","watch"]\n- apiGroups: [""]\n  resources: ["pods/exec"]\n  verbs: ["create","delete","get","list","patch","update","watch"]\n- apiGroups: [""]\n  resources: ["pods/log"]\n  verbs: ["get","list","watch"]\n- apiGroups: [""]\n  resources: ["events"]\n  verbs: ["watch"]\n- apiGroups: [""]\n  resources: ["secrets"]\n  verbs: ["get"]\n\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: RoleBinding\nmetadata:\n  name: jenkins\n  namespace: jenkins\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: Role\n  name: jenkins\nsubjects:\n- kind: ServiceAccount\n  name: jenkins\nEOF')]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br"),s("span",{staticClass:"line-number"},[e._v("25")]),s("br"),s("span",{staticClass:"line-number"},[e._v("26")]),s("br"),s("span",{staticClass:"line-number"},[e._v("27")]),s("br"),s("span",{staticClass:"line-number"},[e._v("28")]),s("br"),s("span",{staticClass:"line-number"},[e._v("29")]),s("br"),s("span",{staticClass:"line-number"},[e._v("30")]),s("br"),s("span",{staticClass:"line-number"},[e._v("31")]),s("br"),s("span",{staticClass:"line-number"},[e._v("32")]),s("br"),s("span",{staticClass:"line-number"},[e._v("33")]),s("br"),s("span",{staticClass:"line-number"},[e._v("34")]),s("br"),s("span",{staticClass:"line-number"},[e._v("35")]),s("br"),s("span",{staticClass:"line-number"},[e._v("36")]),s("br"),s("span",{staticClass:"line-number"},[e._v("37")]),s("br"),s("span",{staticClass:"line-number"},[e._v("38")]),s("br"),s("span",{staticClass:"line-number"},[e._v("39")]),s("br"),s("span",{staticClass:"line-number"},[e._v("40")]),s("br"),s("span",{staticClass:"line-number"},[e._v("41")]),s("br"),s("span",{staticClass:"line-number"},[e._v("42")]),s("br"),s("span",{staticClass:"line-number"},[e._v("43")]),s("br"),s("span",{staticClass:"line-number"},[e._v("44")]),s("br"),s("span",{staticClass:"line-number"},[e._v("45")]),s("br"),s("span",{staticClass:"line-number"},[e._v("46")]),s("br"),s("span",{staticClass:"line-number"},[e._v("47")]),s("br"),s("span",{staticClass:"line-number"},[e._v("48")]),s("br"),s("span",{staticClass:"line-number"},[e._v("49")]),s("br"),s("span",{staticClass:"line-number"},[e._v("50")]),s("br"),s("span",{staticClass:"line-number"},[e._v("51")]),s("br")])]),s("p",[e._v("Fetch token from "),s("RouterLink",{attrs:{to:"/pages/5c5daa/#access_endpoints"}},[e._v("k8s sa secret")])],1)])}),[],!1,null,null,null);n.default=t.exports}}]);