(window.webpackJsonp=window.webpackJsonp||[]).push([[217],{681:function(e,a,t){"use strict";t.r(a);var s=t(18),n=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"overview"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),t("p",[e._v("Virtual Servers in the Cloud")]),e._v(" "),t("h2",{attrs:{id:"troubleshooting"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting"}},[e._v("#")]),e._v(" Troubleshooting")]),e._v(" "),t("h3",{attrs:{id:"error-unprotected-private-key-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#error-unprotected-private-key-file"}},[e._v("#")]),e._v(" Error: Unprotected private key file")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/TroubleshootingInstancesConnecting.html#troubleshoot-unprotected-key",target:"_blank",rel:"noopener noreferrer"}},[e._v("Error: Unprotected private key file"),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("Your private key file must be protected from read and write operations from any other users. If your\nprivate key can be read or written to by anyone but you, then SSH ignores your key and you see the\nfollowing warning message below.")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n@ WARNING: UNPROTECTED PRIVATE KEY FILE! @\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nPermissions 0777 for '.ssh/my_private_key.pem' are too open.\nIt is required that your private key files are NOT accessible by others.\nThis private key will be ignored.\nbad permissions: ignore key: .ssh/my_private_key.pem\nPermission denied (publickey).\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br")])]),t("p",[e._v("If you are connecting from MacOS or Linux, run the following command to fix this error, substituting the\npath for your private key file.")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("ec2-user ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" 0400 .ssh/my_private_key.pem\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h3",{attrs:{id:"ec2-的-status-checks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ec2-的-status-checks"}},[e._v("#")]),e._v(" EC2 的 Status checks")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://docs.amazonaws.cn/AWSEC2/latest/UserGuide/monitoring-system-instance-status-check.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("实例的状态检查"),t("OutboundLink")],1)])]),e._v(" "),t("ol",[t("li",[e._v("系统状态检查")]),e._v(" "),t("li",[e._v("实例状态检查")])]),e._v(" "),t("h3",{attrs:{id:"amazon-ec2-实例类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#amazon-ec2-实例类型"}},[e._v("#")]),e._v(" Amazon EC2 实例类型")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://aws.amazon.com/cn/ec2/instance-types/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Amazon EC2 实例类型"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://aws.amazon.com/cn/blogs/china/amazon-ec2-spot-instance-detail/",target:"_blank",rel:"noopener noreferrer"}},[e._v("成本优化利器——Amazon EC2 Spot 实例详细介绍"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://www.amazonaws.cn/en/ec2/spot-instances/faqs/?nc1=h_ls",target:"_blank",rel:"noopener noreferrer"}},[e._v("Amazon EC2 Spot FAQs"),t("OutboundLink")],1)])]),e._v(" "),t("h3",{attrs:{id:"how-many-instances-can-i-run-in-amazon-ec2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#how-many-instances-can-i-run-in-amazon-ec2"}},[e._v("#")]),e._v(" How many instances can I run in Amazon EC2?")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://aws.amazon.com/ec2/faqs/#how-many-instances-ec2",target:"_blank",rel:"noopener noreferrer"}},[e._v("How many instances can I run in Amazon EC2?"),t("OutboundLink")],1)])]),e._v(" "),t("h3",{attrs:{id:"can-i-attach-more-than-1-iam-role-to-an-ec2-instance"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#can-i-attach-more-than-1-iam-role-to-an-ec2-instance"}},[e._v("#")]),e._v(" Can I attach more than 1 IAM role to an EC2 instance?")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://stackoverflow.com/questions/48528565/amazon-ec2-instances-multiple-iam-roles",target:"_blank",rel:"noopener noreferrer"}},[e._v("Amazon EC2 instances multiple IAM roles"),t("OutboundLink")],1)])]),e._v(" "),t("p",[t("strong",[e._v("You can attach only one role to ec2 instance.")])]),e._v(" "),t("h3",{attrs:{id:"对-amazon-ec2-实例元数据使用凭证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#对-amazon-ec2-实例元数据使用凭证"}},[e._v("#")]),e._v(" 对 Amazon EC2 实例元数据使用凭证")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://docs.aws.amazon.com/zh_cn/cli/latest/userguide/cli-configure-metadata.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("对 Amazon EC2 实例元数据使用凭证"),t("OutboundLink")],1)])]),e._v(" "),t("blockquote",[t("p",[e._v("从 Amazon Elastic Compute Cloud (Amazon EC2) 实例中运行 AWS CLI 时，可以简化向命令提供凭证的过程。"),t("strong",[e._v("每个 Amazon EC2 实例都包含 AWS CLI 能够直接查询临时凭证的元数据。向实例附加 IAM 角色后，AWS CLI 可以自动并且安全地从实例元数据检索凭证。")])]),e._v(" "),t("p",[e._v("要禁用此服务，请使用 AWS_EC2_METADATA_DISABLED 环境变量。")])]),e._v(" "),t("h2",{attrs:{id:"ec2-mount-efs-的例子"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ec2-mount-efs-的例子"}},[e._v("#")]),e._v(" EC2 mount EFS 的例子")]),e._v(" "),t("p",[e._v("当您想将 Amazon EC2 实例上的 Elastic File System（EFS）挂载到一个目录时，可以使用以下步骤:")]),e._v(" "),t("p",[t("strong",[e._v("1. 创建 EFS 文件系统")])]),e._v(" "),t("p",[e._v("在 AWS 控制台或使用 AWS CLI 创建一个 EFS 文件系统。确保将其放置在适合您的应用程序或服务的可用区。")]),e._v(" "),t("p",[t("strong",[e._v("2. 创建 EFS 挂载点")])]),e._v(" "),t("p",[e._v("在已创建的 EFS 文件系统上创建挂载点。挂载点是一个目录，将被挂载到 EC2 实例上。\n例如，要创建名为"),t("code",[e._v("/mnt/efs-mount-point")]),e._v("的挂载点，请使用以下命令：")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("aws efs create-mount-target --file-system-id "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("efs-file-system-id"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" --subnet-id "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("subnet-id"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" --security-groups "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("security-group-id"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" --mount-target-ip "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("ip-address"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("其中:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("<efs-file-system-id>")]),e._v(" 是您创建的 EFS 文件系统 ID。")]),e._v(" "),t("li",[t("code",[e._v("<subnet-id>")]),e._v(" 是 EC2 实例所在的子网 ID。")]),e._v(" "),t("li",[t("code",[e._v("<security-group-id>")]),e._v(" 是用于访问挂载点的安全组 ID。")]),e._v(" "),t("li",[t("code",[e._v("<ip-address>")]),e._v(" 是为挂载目标分配的 IP 地址。")])]),e._v(" "),t("p",[t("strong",[e._v("3. 在 EC2 实例上安装 nfs-utils 软件包")])]),e._v(" "),t("p",[e._v("通过运行适用于您的操作系统的适当的软件包管理器，在 EC2 实例上安装 nfs-utils 软件包。例如，在 Amazon Linux 2 上，可以使用以下命令：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo yum install -y nfs-utils\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[t("strong",[e._v("4. 在 EC2 实例上创建目标挂载点")])]),e._v(" "),t("p",[e._v("创建一个目录，将作为 EFS 文件系统的挂载点。例如，要在"),t("code",[e._v("/mnt/efs-mount-point")]),e._v("下创建一个目录，请使用以下命令：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo mkdir /mnt/efs-mount-point\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[t("strong",[e._v("5. 将 EFS 文件系统挂载到 EC2 实例")])]),e._v(" "),t("p",[e._v("使用 mount 命令将 EFS 文件系统挂载到 EC2 实例上的目录。例如，要将 EFS 文件系统挂载到"),t("code",[e._v("/mnt/efs-mount-point")]),e._v("，请使用以下命令：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("sudo mount -t nfs4 -o nfsvers=4.1,rsize=1048576,wsize=1048576,hard,timeo=600,retrans=2 <efs-file-system-dns-name>:/ /mnt/efs-mount-point\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("其中:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("<efs-file-system-dns-name>")]),e._v(" 是 EFS 文件系统的 DNS 名称。您可以在控制台上找到此值。")])]),e._v(" "),t("p",[t("strong",[e._v("要持久挂载 EFS 文件系统，您还可以添加相应的条目到"),t("code",[e._v("/etc/fstab")]),e._v("文件中。")])]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("当在 EC2 实例上创建目标挂载点时，您正在创建一个本地目录，该目录将用作将 EFS 文件系统挂载到 EC2 实例的路径。这个目录是您在 EC2 实例上创建的，并且可以根据您的需要命名为任何您喜欢的名称，比如"),t("code",[e._v("/mnt/efs-mount-point")]),e._v("。")]),e._v(" "),t("p",[e._v("而在创建 EFS 挂载点时，您是在 EFS 文件系统上创建一个挂载目标。这个挂载目标并不是一个本地目录，而是与 EFS 文件系统关联的一个网络端点。这个挂载点具有一个唯一的 IP 地址和一个安全组，它允许您的 EC2 实例连接到 EFS 文件系统。")]),e._v(" "),t("p",[e._v("在 EC2 实例上创建目标挂载点是为了确保在将 EFS 文件系统挂载到 EC2 实例之前，有一个本地的目录来接收 EFS 文件系统的内容。而创建 EFS 挂载点是为了建立 EC2 实例与 EFS 文件系统之间的连接。")]),e._v(" "),t("p",[e._v("简而言之，创建目标挂载点是为 EC2 实例创建一个本地目录，以便接收 EFS 文件系统的内容。而创建 EFS 挂载点是为了在 EFS 文件系统和 EC2 实例之间建立连接。")]),e._v(" "),t("hr"),e._v(" "),t("h3",{attrs:{id:"文件系统id-efs-aws区域-amazonaws-com-这里的-代表什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文件系统id-efs-aws区域-amazonaws-com-这里的-代表什么"}},[e._v("#")]),e._v(" "),t("code",[e._v("<文件系统ID>.efs.<AWS区域>.amazonaws.com:/")]),e._v(" 这里的 "),t("code",[e._v(":/")]),e._v(" 代表什么?")]),e._v(" "),t("blockquote",[t("p",[e._v("在挂载 Amazon EFS 文件系统时，"),t("code",[e._v(":/")]),e._v(" 表示要挂载整个文件系统的根目录。这表示将整个 Amazon EFS 文件系统挂载到指定的挂载点上。")]),e._v(" "),t("p",[e._v("当你使用 "),t("code",[e._v("fs-12345678.efs.us-east-1.amazonaws.com:/")]),e._v(" 这样的形式来指定挂载点时，"),t("code",[e._v(":/")]),e._v(" 表示将根目录挂载到指定的目录中。")]),e._v(" "),t("p",[e._v("如果你想要挂载 Amazon EFS 文件系统中的特定目录，而不是整个文件系统，你可以在挂载点的路径后添加相应的目录路径。例如，如果你想要将 Amazon EFS 文件系统的 /mydata 目录挂载到指定的挂载点，可以使用类似于 "),t("code",[e._v("fs-12345678.efs.us-east-1.amazonaws.com:/mydata")]),e._v(" 的路径。")]),e._v(" "),t("p",[e._v("总而言之，"),t("code",[e._v(":/")]),e._v(" 表示挂载整个 Amazon EFS 文件系统的根目录，而在 "),t("code",[e._v(":/")]),e._v(" 之后可以添加文件系统中特定的目录路径进行挂载。")])]),e._v(" "),t("h3",{attrs:{id:"上传文件到-efs-路径应该写什么-efs-挂载点-还是在-ec2-实例上创建的目标挂载点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#上传文件到-efs-路径应该写什么-efs-挂载点-还是在-ec2-实例上创建的目标挂载点"}},[e._v("#")]),e._v(" 上传文件到 EFS，路径应该写什么，EFS 挂载点，还是在 EC2 实例上创建的目标挂载点")]),e._v(" "),t("blockquote",[t("p",[e._v("要将文件上传到已挂载的 Amazon EFS 文件系统中，你需要将文件复制到 EFS 挂载点上的目标路径。")]),e._v(" "),t("p",[e._v("挂载点是 EFS 文件系统的入口点，决定了文件系统在 EC2 实例上的可访问路径。当你将文件复制到挂载点上的特定路径时，它将在文件系统中可见，并在所有连接到该文件系统的 EC2 实例上共享。")]),e._v(" "),t("p",[e._v("因此，在上传文件到 EFS 时，你应该使用 EFS 挂载点作为路径，而不是在 EC2 实例上创建的目标挂载点。")])])])}),[],!1,null,null,null);a.default=n.exports}}]);