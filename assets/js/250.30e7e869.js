(window.webpackJsonp=window.webpackJsonp||[]).push([[250],{713:function(e,t,s){"use strict";s.r(t);var n=s(18),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("ul",[s("li",[s("a",{attrs:{href:"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Introduction to the Build Lifecycle"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#lifecycle-reference",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lifecycle Reference"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://maven.apache.org/ref/3.8.6/maven-core/lifecycles.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lifecycles Reference"),s("OutboundLink")],1)])]),e._v(" "),s("h2",{attrs:{id:"overview"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),s("p",[s("strong",[e._v("There are three built-in build lifecycles:")]),e._v(" "),s("code",[e._v("default")]),e._v(", "),s("code",[e._v("clean")]),e._v(" and "),s("code",[e._v("site")]),e._v("."),s("br"),e._v("\nThe "),s("code",[e._v("default")]),e._v(" lifecycle handles your project deployment, the "),s("code",[e._v("clean")]),e._v(" lifecycle handles project cleaning, while the "),s("code",[e._v("site")]),e._v(" lifecycle handles the creation of your project's web site.")]),e._v(" "),s("h2",{attrs:{id:"a-build-lifecycle-is-made-up-of-phases"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-build-lifecycle-is-made-up-of-phases"}},[e._v("#")]),e._v(" A Build Lifecycle is Made Up of Phases")]),e._v(" "),s("p",[e._v("Each of these build lifecycles is defined by a different list of build phases, wherein a build phase represents a stage in the lifecycle.")]),e._v(" "),s("p",[s("strong",[e._v("Maven 内置了三个生命周期，每个生命周期又由不同的阶段（phase）组成。这些阶段在执行的时候是有固定顺序的。后面的阶段一定要等前面的阶段执行完成后才能被执行。")])]),e._v(" "),s("p",[e._v("For a complete list of the lifecycle phases, refer to the "),s("a",{attrs:{href:"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#lifecycle-reference",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lifecycle Reference"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"clean-lifecycle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#clean-lifecycle"}},[e._v("#")]),e._v(" Clean Lifecycle")]),e._v(" "),s("table",[s("thead",[s("tr",[s("th",[e._v("Phase")]),e._v(" "),s("th",[e._v("Description")])])]),e._v(" "),s("tbody",[s("tr",[s("td",[e._v("pre-clean")]),e._v(" "),s("td",[e._v("execute processes needed prior to the actual project cleaning")])]),e._v(" "),s("tr",[s("td",[s("strong",[e._v("clean")])]),e._v(" "),s("td",[e._v("remove all files generated by the previous build, E.g: "),s("code",[e._v("target")]),e._v(" folder")])]),e._v(" "),s("tr",[s("td",[e._v("post-clean")]),e._v(" "),s("td",[e._v("execute processes needed to finalize the project cleaning")])])])]),e._v(" "),s("h3",{attrs:{id:"default-lifecycle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-lifecycle"}},[e._v("#")]),e._v(" Default Lifecycle")]),e._v(" "),s("table",[s("thead",[s("tr",[s("th",[e._v("Phase")]),e._v(" "),s("th",[e._v("Description")])])]),e._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[e._v("validate")])]),e._v(" "),s("td",[e._v("validate the project is correct and all necessary information is available.")])]),e._v(" "),s("tr",[s("td",[e._v("initialize")]),e._v(" "),s("td",[e._v("initialize build state, e.g. set properties or create directories.")])]),e._v(" "),s("tr",[s("td",[e._v("generate-sources")]),e._v(" "),s("td",[e._v("generate any source code for inclusion in compilation.")])]),e._v(" "),s("tr",[s("td",[e._v("process-sources")]),e._v(" "),s("td",[e._v("process the source code, for example to filter any values.")])]),e._v(" "),s("tr",[s("td",[e._v("generate-resources")]),e._v(" "),s("td",[e._v("generate resources for inclusion in the package.")])]),e._v(" "),s("tr",[s("td",[e._v("process-resources")]),e._v(" "),s("td",[e._v("copy and process the resources into the destination directory, ready for packaging.")])]),e._v(" "),s("tr",[s("td",[s("strong",[e._v("compile")])]),e._v(" "),s("td",[e._v("compile the source code of the project.")])]),e._v(" "),s("tr",[s("td",[e._v("process-classes")]),e._v(" "),s("td",[e._v("post-process the generated files from compilation, for example to do bytecode enhancement on Java classes.")])]),e._v(" "),s("tr",[s("td",[e._v("generate-test-sources")]),e._v(" "),s("td",[e._v("generate any test source code for inclusion in compilation.")])]),e._v(" "),s("tr",[s("td",[e._v("process-test-sources")]),e._v(" "),s("td",[e._v("process the test source code, for example to filter any values.")])]),e._v(" "),s("tr",[s("td",[e._v("generate-test-resources")]),e._v(" "),s("td",[e._v("create resources for testing.")])]),e._v(" "),s("tr",[s("td",[e._v("process-test-resources")]),e._v(" "),s("td",[e._v("copy and process the resources into the test destination directory.")])]),e._v(" "),s("tr",[s("td",[s("strong",[e._v("test-compile")])]),e._v(" "),s("td",[e._v("compile the test source code into the test destination directory")])]),e._v(" "),s("tr",[s("td",[e._v("process-test-classes")]),e._v(" "),s("td",[e._v("post-process the generated files from test compilation, for example to do bytecode enhancement on Java classes.")])]),e._v(" "),s("tr",[s("td",[s("strong",[e._v("test")])]),e._v(" "),s("td",[e._v("run tests using a suitable unit testing framework. These tests should not require the code be packaged or deployed.")])]),e._v(" "),s("tr",[s("td",[e._v("prepare-package")]),e._v(" "),s("td",[e._v("perform any operations necessary to prepare a package before the actual packaging. This often results in an unpacked, processed version of the package.")])]),e._v(" "),s("tr",[s("td",[s("strong",[e._v("package")])]),e._v(" "),s("td",[e._v("take the compiled code and package it in its distributable format, such as a JAR.")])]),e._v(" "),s("tr",[s("td",[e._v("pre-integration-test")]),e._v(" "),s("td",[e._v("perform actions required before integration tests are executed. This may involve things such as setting up the required environment.")])]),e._v(" "),s("tr",[s("td",[e._v("integration-test")]),e._v(" "),s("td",[e._v("process and deploy the package if necessary into an environment where integration tests can be run.")])]),e._v(" "),s("tr",[s("td",[e._v("post-integration-test")]),e._v(" "),s("td",[e._v("perform actions required after integration tests have been executed. This may including cleaning up the environment.")])]),e._v(" "),s("tr",[s("td",[s("strong",[e._v("verify")])]),e._v(" "),s("td",[e._v("run any checks to verify the package is valid and meets quality criteria.")])]),e._v(" "),s("tr",[s("td",[s("strong",[e._v("install")])]),e._v(" "),s("td",[e._v("install the package into the local repository, for use as a dependency in other projects locally.")])]),e._v(" "),s("tr",[s("td",[s("strong",[e._v("deploy")])]),e._v(" "),s("td",[e._v("done in an integration or release environment, copies the final package to the remote repository for sharing with other developers and projects.")])])])]),e._v(" "),s("h3",{attrs:{id:"site-lifecycle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#site-lifecycle"}},[e._v("#")]),e._v(" Site Lifecycle")]),e._v(" "),s("table",[s("thead",[s("tr",[s("th",[e._v("Phase")]),e._v(" "),s("th",[e._v("Description")])])]),e._v(" "),s("tbody",[s("tr",[s("td",[e._v("pre-site")]),e._v(" "),s("td",[e._v("execute processes needed prior to the actual project site generation")])]),e._v(" "),s("tr",[s("td",[e._v("site")]),e._v(" "),s("td",[e._v("generate the project's site documentation")])]),e._v(" "),s("tr",[s("td",[e._v("post-site")]),e._v(" "),s("td",[e._v("execute processes needed to finalize the site generation, and to prepare for site deployment")])]),e._v(" "),s("tr",[s("td",[e._v("site-deploy")]),e._v(" "),s("td",[e._v("deploy the generated site documentation to the specified web server")])])])]),e._v(" "),s("h2",{attrs:{id:"useful-command-line-options-for-mvn"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#useful-command-line-options-for-mvn"}},[e._v("#")]),e._v(" Useful Command Line Options for mvn")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https_www.jrebel.com/?url=https%3A%2F%2Fwww.jrebel.com%2Fblog%2Fmaven-cheat-sheet"}},[e._v("(MVN) Maven Options Cheat Sheet")])])]),e._v(" "),s("p",[s("code",[e._v("-T")])]),e._v(" "),s("p",[e._v("Specify number of parallel threads involved in the build. If your project can be built in parallel, for example the modules that do not depend on each other, this option, say -T 4 (to use 4 threads) can significantly speed up your build time. Also if you're interested, we've looked into speeding up the Maven build before.")]),e._v(" "),s("p",[s("code",[e._v("-f,--file <arg>")])]),e._v(" "),s("p",[e._v("Force the use of an alternate POM file (or directory with pom.xml)")]),e._v(" "),s("p",[s("code",[e._v("-rf;--resume-from makes")])]),e._v(" "),s("p",[e._v("Maven resume the build from the specified project, if one invocation of the Maven option fails, you pretty much don't want to repeat the work that succeeded, so you can start from where the build get interrupted.")]),e._v(" "),s("p",[s("code",[e._v("-pl,--projects")])]),e._v(" "),s("p",[e._v("Makes Maven build only specified modules and not the whole project. When you're working in one module of the multi-module project, you know that your changes are localized there, so you'd likely want to avoid doing empty work by building everything else.")]),e._v(" "),s("p",[s("code",[e._v("-am,--also-make")])]),e._v(" "),s("p",[e._v("If project list is specified, also build projects required by the list.")]),e._v(" "),s("p",[s("code",[e._v("-o,--offline")])]),e._v(" "),s("p",[e._v("Build a Maven project offline. It uses the local repository for everything, and doesn't check the internet.")]),e._v(" "),s("p",[s("code",[e._v("-X,--debug")])]),e._v(" "),s("p",[e._v("Enables the debug output. When things go wrong, Maven doesn't always print the most useful error messages, enabling the debug can get you the needed hint to what went wrong.")]),e._v(" "),s("p",[s("code",[e._v("-U,--update-snapshots")])]),e._v(" "),s("p",[e._v("Forces a check for updated dependencies from the remote repositories. When you depend on a project that is still in development, you'll need to depend on the SNAPSHOT versions. And Maven will cache them in the local repository as usual. However, the problem with the snapshots is that one version identifier can mean different artifacts, when a new version of the snapshot is pushed to the repository. To make Maven ignore the local cache, use this option.")]),e._v(" "),s("h2",{attrs:{id:"usual-command-line-calls"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usual-command-line-calls"}},[e._v("#")]),e._v(" Usual Command Line Calls")]),e._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),s("p",[s("strong",[e._v("Some Phases Are Not Usually Called From the Command Line")])]),e._v(" "),s("p",[e._v("The phases named with hyphenated-words ("),s("code",[e._v("pre-*")]),e._v(", "),s("code",[e._v("post-*")]),e._v(", or "),s("code",[e._v("process-*")]),e._v(") are not usually directly called\nfrom the command line. These phases sequence the build, producing intermediate results that are not useful\noutside the build.")])]),e._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# If you are uncertain what you want, the preferred phase to call is")]),e._v("\nmvn verify\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# If you want your jar/war/ear/rar, run `package`")]),e._v("\nmvn package\nmvn clean package\nmvn clean package -f ./test/projects/pom.xml\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# `-DskipTests` means compiles the tests, but skips running them.")]),e._v("\nmvn -DskipTests clean package\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# mvnw -DskipTests clean package")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# `-Dmaven.test.skip=true` means skips compiling the tests and does not run them.")]),e._v("\nmvn clean package -Dmaven.test.skip"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("true\n\nmvn clean package -pl SHOPPING_EAR -am -Pprod\nmvn clean package -pl SHOPPING_EAR -am -Ptest\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# specify a Profile")]),e._v("\nmvn clean package -Ptest\nmvn clean package -P "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("test")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# It also can be executed -:)")]),e._v("\nmvn package clean\nmvn clean package clean\nmvn clean package clean verify\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br")])]),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# is used to bundle the main sources of the project into a jar archive.")]),e._v("\nmvn source:jar\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# see plugin http://www.mojohaus.org/exec-maven-plugin/")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# execute Java programs in the same VM.")]),e._v("\nmvn clean compile exec:java\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# execute programs and Java programs in a separate process.")]),e._v("\nmvn clean compile exec:exec\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# see plugin https://maven.apache.org/plugins/maven-help-plugin/")]),e._v("\nmvn help:active-profiles\nmvn clean package -pl SHOPPING_EAR -am -Pprod help:active-profiles\nmvn help:all-profiles\nmvn help:effective-pom\nmvn help:effective-settings\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# displays a list of the platform details like system properties and environment variables.")]),e._v("\nmvn help:system\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# see plugin https://maven.apache.org/plugins/maven-dependency-plugin/index.html")]),e._v("\nmvn dependency:tree\nmvn dependency:list\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# download all dependencies and their source attachments")]),e._v("\nmvn dependency:sources\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# tells Maven to clear dependency artifact files out of the local repository, and optionally re-resolve them.")]),e._v("\nmvn dependency:purge-local-repository\nmvn clean dependency:copy-dependencies package\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# --- maven-dependency-plugin:3.2.0:copy-dependencies (default-cli) @ demo ---")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# [INFO] Copying spring-boot-starter-web-2.6.4.jar to C:\\sourcecode\\be\\maven-test\\demo\\target\\dependency\\spring-boot-starter-web-2.6.4.jar")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br"),s("span",{staticClass:"line-number"},[e._v("25")]),s("br"),s("span",{staticClass:"line-number"},[e._v("26")]),s("br"),s("span",{staticClass:"line-number"},[e._v("27")]),s("br"),s("span",{staticClass:"line-number"},[e._v("28")]),s("br")])]),s("h2",{attrs:{id:"a-build-phase-is-made-up-of-plugin-goals"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-build-phase-is-made-up-of-plugin-goals"}},[e._v("#")]),e._v(" A Build Phase is Made Up of Plugin Goals")]),e._v(" "),s("p",[e._v("每个 Build Phase 是由一系列 Plugin Goals，就是说执行的每个 Phase，实际都是由对应的插件完成的，实行的是对应插件的 Goal")]),e._v(" "),s("p",[e._v("Note：一个插件可能有多个目标（Goals）")]),e._v(" "),s("p",[e._v("For example, consider the command below. The "),s("code",[e._v("clean")]),e._v(" and "),s("code",[e._v("package")]),e._v(" arguments are build phases,\nwhile the "),s("code",[e._v("dependency:copy-dependencies")]),e._v(" is a goal (of a plugin).")]),e._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[e._v("mvn clean dependency:copy-dependencies package\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("If this were to be executed, the "),s("code",[e._v("clean")]),e._v(" phase will be executed first (meaning it will run all preceding\nphases of the clean lifecycle, plus the "),s("code",[e._v("clean")]),e._v(" phase itself), and then the "),s("code",[e._v("dependency:copy-dependencies")]),e._v("\ngoal, before finally executing the package phase (and all its preceding build phases of the default\nlifecycle).")]),e._v(" "),s("p",[e._v("Moreover, if a goal is bound to one or more build phases, that goal will be called in all those phases.")]),e._v(" "),s("h2",{attrs:{id:"built-in-lifecycle-bindings"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#built-in-lifecycle-bindings"}},[e._v("#")]),e._v(" Built-in Lifecycle Bindings")]),e._v(" "),s("p",[e._v("Some phases have goals bound to them by default. And for the default lifecycle, these bindings depend on the packaging value. Here are some of the goal-to-build-phase bindings.")]),e._v(" "),s("p",[e._v("See "),s("a",{attrs:{href:"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#built-in-lifecycle-bindings",target:"_blank",rel:"noopener noreferrer"}},[e._v("Built-in Lifecycle Bindings"),s("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=a.exports}}]);