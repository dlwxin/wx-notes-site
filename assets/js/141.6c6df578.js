(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{603:function(e,s,t){"use strict";t.r(s);var a=t(18),r=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"links"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#links"}},[e._v("#")]),e._v(" Links")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.rockyourcode.com/run-docker-nginx-as-non-root-user/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Run Docker nginx as Non-Root-User"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://spring.io/guides/topicals/spring-boot-docker/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Spring Boot Docker"),t("OutboundLink")],1)])]),e._v(" "),t("h2",{attrs:{id:"common-usages"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#common-usages"}},[e._v("#")]),e._v(" Common usages")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# remove <none> images")]),e._v("\ndocker images\nREPOSITORY              TAG       IMAGE ID       CREATED         SIZE\ndocker rmi "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$(")]),e._v("docker images "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"<none>"')]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("awk")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'{print $3}'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v(")")])]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("docker images --format "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"table {{.ID}}'),t("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[e._v("\\t")]),e._v("{{.Repository}}"),t("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[e._v("\\t")]),e._v('{{.Tag}}"')]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h2",{attrs:{id:"docker-hub"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-hub"}},[e._v("#")]),e._v(" Docker Hub")]),e._v(" "),t("h3",{attrs:{id:"openjdk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#openjdk"}},[e._v("#")]),e._v(" OpenJDK")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/openjdk",target:"_blank",rel:"noopener noreferrer"}},[e._v("openjdk"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://bell-sw.com/blog/docker-hub-openjdk-images-are-officially-deprecated/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker Hub OpenJDK images are officially deprecated"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://developers.redhat.com/articles/2022/09/16/updating-docker-hubs-openjdk-image#",target:"_blank",rel:"noopener noreferrer"}},[e._v("My advice for updating use of the Docker Hub OpenJDK image"),t("OutboundLink")],1)])]),e._v(" "),t("p",[t("strong",[e._v("DEPRECATION NOTICE")])]),e._v(" "),t("p",[e._v("This image is officially deprecated and all users are recommended to find and use suitable replacements ASAP. Some examples of other Official Image alternatives (listed in alphabetical order with no intentional or implied preference):")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/amazoncorretto",target:"_blank",rel:"noopener noreferrer"}},[e._v("amazoncorretto"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/eclipse-temurin",target:"_blank",rel:"noopener noreferrer"}},[e._v("eclipse-temurin"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/ibm-semeru-runtimes",target:"_blank",rel:"noopener noreferrer"}},[e._v("ibm-semeru-runtimes"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/ibmjava",target:"_blank",rel:"noopener noreferrer"}},[e._v("ibmjava"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/sapmachine",target:"_blank",rel:"noopener noreferrer"}},[e._v("sapmachine"),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("See "),t("a",{attrs:{href:"https://github.com/docker-library/openjdk/issues/505",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker-library/openjdk#505"),t("OutboundLink")],1),e._v(" for more information.")]),e._v(" "),t("p",[e._v("The only tags which will continue to receive updates beyond July 2022 will be Early Access builds (which are sourced from "),t("a",{attrs:{href:"https://jdk.java.net/",target:"_blank",rel:"noopener noreferrer"}},[e._v("jdk.java.net"),t("OutboundLink")],1),e._v("), as those are not published/supported by any of the above projects.")]),e._v(" "),t("h2",{attrs:{id:"building-a-non-root-docker-container-65534"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#building-a-non-root-docker-container-65534"}},[e._v("#")]),e._v(" Building a non-root Docker container(65534)")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://dev.to/phuihock/building-a-non-root-docker-container-29ah",target:"_blank",rel:"noopener noreferrer"}},[e._v("Building a non-root Docker container"),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("user "),t("code",[e._v("nobody")]),e._v(", with id "),t("code",[e._v("65534")])]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# cat /etc/passwd | grep nobody")]),e._v("\nnobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("h2",{attrs:{id:"see-the-output-of-run-commands-in-the-dockerfile-when-using-buildkit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#see-the-output-of-run-commands-in-the-dockerfile-when-using-buildkit"}},[e._v("#")]),e._v(" See the output of RUN commands in the Dockerfile When using BuildKit")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://stackoverflow.com/questions/55756372/when-using-buildkit-with-docker-how-do-i-see-the-output-of-run-commands",target:"_blank",rel:"noopener noreferrer"}},[e._v("When using BuildKit with Docker, how do I see the output of RUN commands?"),t("OutboundLink")],1)])]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("docker build --progress"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("plain -t koa-demo:0.0.1 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\ndocker build --no-cache --progress"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("plain -t koa-demo:0.0.1 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("h2",{attrs:{id:"镜像加速器-mirror-accelerator"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#镜像加速器-mirror-accelerator"}},[e._v("#")]),e._v(" 镜像加速器/Mirror Accelerator")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://hub.daocloud.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("DaoCloud"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://cr.console.aliyun.com/cn-beijing/instances/mirrors",target:"_blank",rel:"noopener noreferrer"}},[e._v("阿里云镜像加速器"),t("OutboundLink")],1)])]),e._v(" "),t("ol",[t("li",[e._v("进入 "),t("a",{attrs:{href:"https://www.aliyun.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("aLiyun"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("进入 控制台")]),e._v(" "),t("li",[e._v("搜索"),t("strong",[e._v("容器镜像服务")])]),e._v(" "),t("li",[e._v("在侧边栏选择 "),t("strong",[e._v("镜像工具")]),e._v(" -> "),t("strong",[e._v("镜像加速器")])])]),e._v(" "),t("p",[e._v("For Example: on Linux"),t("br"),e._v("\n针对 Docker 客户端版本大于 1.10.0 的用户"),t("br"),e._v("\n您可以通过修改 daemon 配置文件"),t("code",[e._v("/etc/docker/daemon.json")]),e._v(" 来使用加速器")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" -p /etc/docker\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("tee")]),e._v(" /etc/docker/daemon.json "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<<-")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('\'EOF\'\n{\n  "registry-mirrors": ["https://2rhbup3n.mirror.aliyuncs.com"]\n}\nEOF')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" systemctl daemon-reload\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" systemctl restart docker\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br")])]),t("p",[e._v("修改后检查一下")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("$ docker info "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" -A1 "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Registry Mirrors"')]),e._v("\nWARNING: No swap limit support\n Registry Mirrors:\n  https://2rhbup3n.mirror.aliyuncs.com/\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("h2",{attrs:{id:"add-user-to-docker-group-in-linux"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#add-user-to-docker-group-in-linux"}},[e._v("#")]),e._v(" Add User To Docker Group In Linux")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# If the group does not exist, Create the docker group")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("groupadd")]),e._v(" docker\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# usermod -aG docker $USER")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("usermod")]),e._v(" -aG docker user_name\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# sudo service docker restart")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br")])]),t("p",[e._v("After this logout and login again for changes to take effect")]),e._v(" "),t("h2",{attrs:{id:"setup-mysql-docker-container"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setup-mysql-docker-container"}},[e._v("#")]),e._v(" Setup MySQL docker container")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1467641",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker 安装 MySql-挂载外部数据和配置"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/mysql",target:"_blank",rel:"noopener noreferrer"}},[e._v("Quick reference"),t("OutboundLink")],1)])]),e._v(" "),t("h3",{attrs:{id:"pull-the-mysql-docker-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pull-the-mysql-docker-image"}},[e._v("#")]),e._v(" Pull the MySQL Docker Image")]),e._v(" "),t("ol",[t("li",[e._v("Start by pulling the appropriate Docker image for MySQL. You can download a specific version or opt for the latest release as seen in the following command:")])]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("docker pull mysql:latest\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# docker pull mysql:8.0")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[e._v("Verify the image is now stored locally")])]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("docker images "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" mysql\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# OR")]),e._v("\ndocker image "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ls")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("h3",{attrs:{id:"deploy-the-mysql-container"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deploy-the-mysql-container"}},[e._v("#")]),e._v(" Deploy the MySQL Container")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("$ docker run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--detach "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--name"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("test-mysql "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--env"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"MYSQL_ROOT_PASSWORD=mypassword"')]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--publish "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("6603")]),e._v(":3306 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\nmysql:8.0\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br")])]),t("ul",[t("li",[t("code",[e._v("run")]),e._v(" - will run a new command in a new Docker container")]),e._v(" "),t("li",[e._v("The "),t("code",[e._v("--detach")]),e._v(" option instructs Docker to run the container as a service in the background")]),e._v(" "),t("li",[t("code",[e._v("–-name")]),e._v(" - will give a name to the new container created")]),e._v(" "),t("li",[t("code",[e._v("--publish")]),e._v(" - will make the internal docker port visible outside docker")]),e._v(" "),t("li",[t("code",[e._v("--env")]),e._v(" - will change the root password. Here you can insert whatever password you want")]),e._v(" "),t("li",[t("code",[e._v("mysql:8.0")]),e._v(" - will specify what image to run in the newly created container")])]),e._v(" "),t("h3",{attrs:{id:"connect-mysql-with-client"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#connect-mysql-with-client"}},[e._v("#")]),e._v(" Connect MySQL with client")]),e._v(" "),t("p",[e._v("For example: DBeaver")]),e._v(" "),t("ul",[t("li",[e._v("新建一个 MySQL 的 connection")]),e._v(" "),t("li",[e._v("输入 Server Host, Port, Database, Username, Password")]),e._v(" "),t("li",[e._v("点击 "),t("code",[e._v("Test Connection")])])]),e._v(" "),t("p",[e._v("可能出现 Error")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Public key retrieval is not allowed\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[t("strong",[e._v("Option1:")])]),e._v(" "),t("p",[e._v("点击 "),t("code",[e._v("SSL")]),e._v(" tab, （"),t("code",[e._v("Test Connection")]),e._v(" 在 "),t("code",[e._v("Main")]),e._v(" tab）,")]),e._v(" "),t("ul",[t("li",[e._v("Select checkbox "),t("code",[e._v("Use SSL")])]),e._v(" "),t("li",[e._v("Deselect checkbox "),t("code",[e._v("Verify server certificate")])]),e._v(" "),t("li",[e._v("Select checkbox "),t("code",[e._v("Allow Public key retrieval")])])]),e._v(" "),t("p",[e._v("之后再测试 "),t("code",[e._v("Test Connection")])]),e._v(" "),t("p",[t("strong",[e._v("Option2:")]),e._v("\n执行命令进入到容器中的 MySQL 中，执行下面的 Sql 语句")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 进入到容器中的 MySQL")]),e._v("\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ps")]),e._v("\n\nCONTAINER ID      IMAGE         COMMAND                  CREATED         STATUS         PORTS                  NAMES\n79742fe73ea9      mysql:8.0     "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"/entrypoint.sh mysq…"')]),e._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("24")]),e._v(" hours ago    Up "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("6")]),e._v(" seconds   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.0")]),e._v(".0.0:6630-"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("3306")]),e._v("/tcp, :::6630-"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("3306")]),e._v("/tcp    test-mysql\n\ndocker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("exec")]),e._v(" -it 79742fe73ea9 /bin/bash\nmysql -u root -p\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br")])]),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("ALTER")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("USER")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'root'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("@'%'")]),e._v(" IDENTIFIED "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WITH")]),e._v(" mysql_native_password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("BY")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'mypassword'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("之后再测试 "),t("code",[e._v("Test Connection")])]),e._v(" "),t("p",[t("strong",[e._v("Option3:")])]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://string.quest/read/17260420",target:"_blank",rel:"noopener noreferrer"}},[e._v("DBeaver 连接 mysql 时报错 Public Key Retrieval is not allowed - 探索字符串"),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("点击 "),t("code",[e._v("Driver properties")]),e._v(" tab,")]),e._v(" "),t("p",[e._v("change the value of "),t("code",[e._v("allowPublicKeyRetrieval")]),e._v(" to "),t("code",[e._v("true")])]),e._v(" "),t("h3",{attrs:{id:"docker-安装-mysql-挂载外部数据和配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-mysql-挂载外部数据和配置"}},[e._v("#")]),e._v(" Docker 安装 MySql-挂载外部数据和配置")]),e._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1467641",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker 安装 MySql-挂载外部数据和配置"),t("OutboundLink")],1)])]),e._v(" "),t("li",[t("p",[e._v("启动一个临时的 MySQL 容器。进入容器内部，找到配置文件的路径")])]),e._v(" "),t("li",[t("p",[e._v("通过 "),t("code",[e._v("docker cp")]),e._v(" 命令将配置文件复制到外部。这时就可以删除这个临时的 container 了")])]),e._v(" "),t("li",[t("p",[e._v("修改配置文件。")])])]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("docker run --name some-mysql -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("MYSQL_ROOT_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("my-secret-pw -d mysql:tag\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ps")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 进入 container 内部")]),e._v("\ndocker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("exec")]),e._v(" -it 79740fe73ea9 /bin/bash\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" /etc/mysql\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ls")]),e._v("\nconf.d  my.cnf  my.cnf.fallback\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 在容器外部执行 docker cp 命令")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" /home/wx/app/mysql\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" 79740fe73ea9:/etc/mysql "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ls")]),e._v("\nconf.d  my.cnf  my.cnf.fallback\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br"),t("span",{staticClass:"line-number"},[e._v("13")]),t("br"),t("span",{staticClass:"line-number"},[e._v("14")]),t("br")])]),t("h2",{attrs:{id:"setup-rabbitmq-docker-container"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setup-rabbitmq-docker-container"}},[e._v("#")]),e._v(" Setup RabbitMQ docker container")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1464310",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker 搭建 RabbitMQ"),t("OutboundLink")],1)])]),e._v(" "),t("h3",{attrs:{id:"download-rabbitmq-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#download-rabbitmq-image"}},[e._v("#")]),e._v(" Download RabbitMQ image")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 如果需要访问 web管理页面，就选择 tag 为 management 的")]),e._v("\ndocker pull rabbitmq:3.8.17-management\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("h3",{attrs:{id:"deploy-the-rabbitmq-container"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deploy-the-rabbitmq-container"}},[e._v("#")]),e._v(" Deploy the RabbitMQ Container")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("docker run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n-p "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1126")]),e._v(":15672 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n-p "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1127")]),e._v(":5672 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n-d --hostname rabbitmq_test "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n--name rabbitmq_test "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n-e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("RABBITMQ_DEFAULT_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("admin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n-e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("RABBITMQ_DEFAULT_PASS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("admin "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\nrabbitmq:3.8.17-management\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br")])]),t("ul",[t("li",[e._v("Test connection on host")])]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" localhost:1126\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("ul",[t("li",[e._v("Access web page via browser")])]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("ip:1126\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h2",{attrs:{id:"setup-postgres-docker-container"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setup-postgres-docker-container"}},[e._v("#")]),e._v(" Setup postgres docker container")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("docker run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n    --name some-postgres "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n    -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("POSTGRES_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("postgres "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n    -v /data/db_data/postgresql:/home/data/ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n    -p "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("5432")]),e._v(":5432 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n    -d postgres\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br")])]),t("p",[e._v("Expose port "),t("code",[e._v("5432")]),e._v(" if you need.")]),e._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("firewall-cmd --permanent --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("5432")]),e._v("/tcp\n\nfirewall-cmd --reload\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("h2",{attrs:{id:"common-images"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#common-images"}},[e._v("#")]),e._v(" Common images")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/alpine",target:"_blank",rel:"noopener noreferrer"}},[e._v("alpine"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/r/alpine/git",target:"_blank",rel:"noopener noreferrer"}},[e._v("alpine/git"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/r/bitnami/nginx",target:"_blank",rel:"noopener noreferrer"}},[e._v("bitnami/nginx"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/busybox?tab=tags&page=1&name=1.28.4",target:"_blank",rel:"noopener noreferrer"}},[e._v("busybox:1.28.4"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/busybox",target:"_blank",rel:"noopener noreferrer"}},[e._v("busybox"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/caddy",target:"_blank",rel:"noopener noreferrer"}},[e._v("caddy"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/r/dpage/pgadmin4",target:"_blank",rel:"noopener noreferrer"}},[e._v("dpage/pgadmin4"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/httpd",target:"_blank",rel:"noopener noreferrer"}},[e._v("httpd"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/nginx",target:"_blank",rel:"noopener noreferrer"}},[e._v("nginx"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/node",target:"_blank",rel:"noopener noreferrer"}},[e._v("node"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/postgres",target:"_blank",rel:"noopener noreferrer"}},[e._v("postgres"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/python/",target:"_blank",rel:"noopener noreferrer"}},[e._v("python:3.11.2-alpine3.17"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/python/",target:"_blank",rel:"noopener noreferrer"}},[e._v("python:3.12-rc-slim-buster"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/scratch/",target:"_blank",rel:"noopener noreferrer"}},[e._v("scratch"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://hub.docker.com/_/docker/",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/jqlang/jq/pkgs/container/jq",target:"_blank",rel:"noopener noreferrer"}},[e._v("jq"),t("OutboundLink")],1)])]),e._v(" "),t("h2",{attrs:{id:"harbor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#harbor"}},[e._v("#")]),e._v(" Harbor")]),e._v(" "),t("h2",{attrs:{id:"harbor-仓库问题处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#harbor-仓库问题处理"}},[e._v("#")]),e._v(" Harbor 仓库问题处理")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.lianst.com/4285.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Harbor 仓库问题处理"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://gitlab.com/gitlab-org/charts/gitlab/-/merge_requests/1007",target:"_blank",rel:"noopener noreferrer"}},[e._v("Add support for setting relativeurls registry config."),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/distribution/distribution/issues/970",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/distribution/distribution/issues/970"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);