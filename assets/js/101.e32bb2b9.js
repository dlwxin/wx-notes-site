(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{563:function(t,s,a){"use strict";a.r(s);var n=a(18),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"awk-overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#awk-overview"}},[t._v("#")]),t._v(" awk overview")]),t._v(" "),a("p",[a("strong",[t._v("1. awk 命令的基本格式")])]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# awk '条件1 {动作 1} 条件 2 {动作 2} …' 文件名")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("strong",[t._v("2. 选项")])]),t._v(" "),a("ul",[a("li",[t._v("-F 指定分隔符")]),t._v(" "),a("li",[t._v("-f 调用脚本")]),t._v(" "),a("li",[t._v("-v 定义变量")])]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("diff")]),t._v(" HEAD --name-only\nDemoAll/pom.xml\nt - Copy/u/kk\ntest02.js\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("diff")]),t._v(" HEAD --name-only "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" -F "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{print $NF}'")]),t._v("\npom.xml\nkk\ntest02.js\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# git diff HEAD -> 显示工作区与当前分支最新commit之间的差异")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --name-only   -> 只显示有变化的文件名（包括路径），不显示具体的内容")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# awk -F "/" \'{print $NF}\' -> 用 "/" 作为分隔符， 提取最后一列')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[a("strong",[t._v("3. 常用 awk 内置变量")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("变量名")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("$0")])]),t._v(" "),a("td",[t._v("当前记录(整条记录)")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("$1-$n")])]),t._v(" "),a("td",[t._v("当前记录的第 n 个字段")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("FS")])]),t._v(" "),a("td",[t._v("输入字段分隔符（等价于命令行 "),a("code",[t._v("-F")]),t._v("选项）默认是空格")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("RS")])]),t._v(" "),a("td",[t._v("输入记录分割符， 默认是换行符")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("NF")])]),t._v(" "),a("td",[t._v("当前记录中字段的个数，就是有多少列")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("NR")])]),t._v(" "),a("td",[t._v("已经读出的记录数，就是行号，从 1 开始")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("OFS")])]),t._v(" "),a("td",[t._v("输出字段分隔符，默认是空格")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("ORS")])]),t._v(" "),a("td",[t._v("输出记录分隔符 ，默认是换行符")])])])]),t._v(" "),a("p",[a("strong",[t._v("4. 条件（Pattern）")])]),t._v(" "),a("p",[t._v("一般使用关系表达式作为条件。")]),t._v(" "),a("p",[t._v("awk 支持的主要条件类型")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("条件类型")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("条 件")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("说 明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("awk 保留字")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("BEGIN")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("在 awk 程序一开始，尚未读取任何数据之前执行。BEGIN 后的动作只在程序开始时执行一次")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("awk 保留字")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("END")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("在 awk 程序处理完所有数据，即将结束时执行?END 后的动作只在程序结束时执行一次")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("关系运算符")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v(">")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("大于")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("<")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("小于")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v(">=")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("大于等于")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("<=")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("小于等于")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("==")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v('等于。用于判断两个值是否相等。如果是给变童赋值，则使用"=”')])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("!=")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("不等于")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("A~B")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("判断字符串 A 中是否包含能匹配 B 表达式的子字符串")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("A!~B")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("判断字符串 A 中是否不包含能匹配 B 表达式的子字符串")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("正则表达式")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("/正则/ 如果在“//”中可以写入字符，则也可以支持正则表达式")])])])]),t._v(" "),a("p",[a("strong",[t._v("5. 动作（Action）")])]),t._v(" "),a("ul",[a("li",[t._v("格式化输出")]),t._v(" "),a("li",[t._v("流程控制语句")])]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# awk \'{printf $2 "\\t" $6 "\\n"}\' student.txt')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输出第二列和第六列的内容")]),t._v("\nName Average\nLiming "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("87.66")]),t._v("\nSc "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("85.66")]),t._v("\nGao "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("91.66")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("在这个例子中没有设定任何的条件类型，所以这个文件中的所有内容都符合条件，动作会无条件执行。动作是格式化输出 "),a("code",[t._v("printf")]),t._v("，"),a("code",[t._v("$2")]),t._v("和"),a("code",[t._v("$6")]),t._v("分别代表第二个字段和第六个字段，所以这条 "),a("code",[t._v("awk")]),t._v(" 命令会列出 "),a("code",[t._v("student.txt")]),t._v(" 文件的第二个字段和第六个字段。")]),t._v(" "),a("p",[t._v("虽然都是截取列的命令，但是 "),a("code",[t._v("awk")]),t._v(" 命令比 "),a("code",[t._v("cut")]),t._v(" 命令智能多了，"),a("code",[t._v("cut")]),t._v(" 命令是不能很好地识别空格作为分隔符的；而对于 "),a("code",[t._v("awk")]),t._v(" 命令来说，只要分隔开，不管是空格还是制表符，都可以识别。")]),t._v(" "),a("h2",{attrs:{id:"awk-的条件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#awk-的条件"}},[t._v("#")]),t._v(" awk 的条件")]),t._v(" "),a("p",[a("strong",[t._v("1. BEGIN")])]),t._v(" "),a("p",[a("code",[t._v("BEGIN")]),t._v(" 是 "),a("code",[t._v("awk")]),t._v(" 的保留字，是一种特殊的条件类型。"),a("code",[t._v("BEGIN")]),t._v(' 的执行时机是"在 '),a("code",[t._v("awk")]),t._v(' 程序一开始，尚未读取任何数据之前"。一旦 '),a("code",[t._v("BEGIN")]),t._v(" 后的动作执行一次，当 "),a("code",[t._v("awk")]),t._v(" 开始从文件中读入数据时，"),a("code",[t._v("BEGIN")]),t._v(" 的条件就不再成立，所以 "),a("code",[t._v("BEGIN")]),t._v(" 定义的动作只能被执行一次。")]),t._v(" "),a("p",[t._v("Example 1:")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# awk \'BEGIN{printf "This is a transcript\\n"}')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("printf "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[t._v("\\t")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$6")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("' student.txt\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#awk命令只要检测不到完整的单引号就不会执行，所以这条命令的换行不用加入"\\"，就是一行命令')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#这里定义了两个动作")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#第一个动作使用BEGIN条件，所以会在读入文件数据前打印"这是一张成绩单"（只会执行一次）')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#第二个动作会打印文件的第二个字段和第六个字段")]),t._v("\nThis is a transcript\nName Average\nLiming "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("87.66")]),t._v("\nSc "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("85.66")]),t._v("\nGao "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("91.66")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("p",[t._v("Example 2:")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("test@host tmp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'BEGIN {printf "This is a list\\n"} {printf $1 "\\t" $2 "\\n"}\'')]),t._v(" book\nThis is a list\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("101")]),t._v("     西游记\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("102")]),t._v("     红楼梦\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("103")]),t._v("     水浒传\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("104")]),t._v("     三国演义\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[a("strong",[t._v("2. END")])]),t._v(" "),a("p",[a("code",[t._v("END")]),t._v(" 也是 "),a("code",[t._v("awk")]),t._v(" 的保留字，不过刚好和 "),a("code",[t._v("BEGIN")]),t._v(" 相反。"),a("code",[t._v("END")]),t._v(" 是在 "),a("code",[t._v("awk")]),t._v(" 程序处理完所有数据，即将结束时执行的。"),a("code",[t._v("END")]),t._v(" 后的动作只在程序结束时执行一次。")]),t._v(" "),a("p",[t._v("Example 1:")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# awk \'END{printf "The End \\n"}')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("printf "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\t"}},[t._v("\\t")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$6")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("' student.txt\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#输出结尾输入"The End"，这并不是文档本身的内容，而且只会执行一次')]),t._v("\nName Average\nLiming "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("87.66")]),t._v("\nSc "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("85.66")]),t._v("\nGao "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("91.66")]),t._v("\nThe End\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[t._v("Example 2:")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("wx@DESKTOP-HREI907 MINGW64 /c/wx/linuxLearn/temp\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'END{printf "the end \\n"}\n> {printf $1 "\\t" $2 "\\n"}\'')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("101")]),t._v("     西游记\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("102")]),t._v("     红楼梦\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("103")]),t._v("     水浒传\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("104")]),t._v("     三国演义\nthe end\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[a("strong",[t._v("3. 关系运算符")])]),t._v(" "),a("p",[t._v("Example 1:")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat student.txt | grep -v Name |awk'$6 >= 87 {printf $2'\\n\"}'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# 使用cat输出文件内容，用grep取反包含"Name"的行')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 判断第六个字段（平均成绩）大于等于87分的行，如果判断式成立，则打印第2列（学员名）")]),t._v("\nLiming\nGao\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("这条命令的执行过程是这样的：")]),t._v(" "),a("ul",[a("li",[t._v("如果有 BEGIN 条件，则先执行 BEGIN 定义的动作。")]),t._v(" "),a("li",[t._v("如果没有 BEGIN 条件，则读入第一行，把第一行的数据依次赋予 $0、$1、$2 等变量。其中，$0 代表此行的整体数据，$1 代表第一个字段，$2 代表第二个字段。")]),t._v(" "),a("li",[t._v("依据条件类型判断动作是否执行。如果条件符合，则执行动作；否则读入下一行激据。如果没有条件，则每行都执行动作。")]),t._v(" "),a("li",[t._v("读入下一行数据，重复执行社步骤。")])]),t._v(" "),a("p",[t._v("Example 2: 看 Sc 用户的平均成绩")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# awk'$2 -/Sc/ {printf $6 \"\\n\"}' student.txt")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# 如果第二个字段中包含"Sc"字符，则打印第六个字段')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("85.66")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# 在 awk 中，只有使用"//"包含的字符串，awk 命令才会査找。也就是说，字符串必须用"//"包含，awk 命令才能正确识别。')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[a("strong",[t._v("4. 正则表达式")])]),t._v(" "),a("p",[t._v('Example: 如果想让 awk 识别字符串，则必须使用"//"包含，')]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@localhost ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# awk '/Liming/ {print}' student.txt")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#打印Liming的成绩")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" Liming "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("82")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("95")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("86")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("87.66")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[a("strong",[t._v("5. awk 流程制")])]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TODO")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"examples"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#examples"}},[t._v("#")]),t._v(" Examples")]),t._v(" "),a("p",[a("strong",[t._v("1. 如何用 awk 打印除第一列之外的所有列")])]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("less")]),t._v(" test.txt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{$1=\"\";print}'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sub($1,\"\")'")]),t._v(" test.txt\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# awk \'{for(i=2;i<=NF;++i) printf $i "\\t";printf "\\n"}\' test.txt')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{for(i=2;i<=NF;++i);print}'")]),t._v(" test.txt\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# awk '{for(i=2;i<=NF;i++) {")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# \t\tif(i<NF) {printf "%s ",$i} else {print $i}')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \t}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# }'  test.txt")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{for(i=2;i<=NF;i++) { if(i<NF) {printf \"%s \",$i} else {print $i} } }'")]),t._v("  test.txt\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("p",[a("strong",[t._v("替换 k8s deployment.yml 的 image version")])]),t._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# deployment-simple-nginx-01.yaml")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" deployment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("simple"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" deployment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("simple"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" quay.io/bitnami/nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("1.20.2\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("imagePullPolicy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" IfNotPresent\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" -F "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image:"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{print $2}'")]),t._v(" ./deployment-simple-nginx-01.yaml "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{split($0, arr, \":\"); print arr[2]}'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.20")]),t._v(".2\n\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" -F "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image:"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{print $2}'")]),t._v(" ./deployment-simple-nginx-01.yaml"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\nquay.io/bitnami/nginx:1.20.2\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("new_version")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.21")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("current_version")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$(")]),t._v("awk -F "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image:"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{print $2}'")]),t._v(" ./deployment-simple-nginx-01.yaml "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{split($0, arr, \":\"); print arr[2]}'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i s%"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$current_version")]),t._v("%"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$new_version")]),t._v("%g ./deployment-simple-nginx-01.yaml\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);